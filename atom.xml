<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Arvin&#39;s blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-03-13T00:47:38.889Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Arvin&#39;s</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é›¶æ•£çŸ¥è¯†è®°å½•(æŒç»­æ›´æ–°)</title>
    <link href="http://yoursite.com/2018/01/12/code-notes/"/>
    <id>http://yoursite.com/2018/01/12/code-notes/</id>
    <published>2018-01-12T02:40:06.000Z</published>
    <updated>2018-03-13T00:47:38.889Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20180112-00-blog.png" alt=""></p>
<p>è®°å½•ä¸€äº›å¹³æ—¶æ¯”è¾ƒå°‘ç”¨æˆ–è€…å®¹æ˜“å¿˜è®°çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œä¸»è¦æ˜¯é›¶æ•£ä»£ç æ®µã€‚</p>
<p><strong>ä¸€ï¼Œ</strong> ä½¿ç”¨å®é‡æ–°å®šä¹‰æ§åˆ¶å°çš„logè¾“å‡ºï¼Œå»æ‰é»˜è®¤çš„è¾“å‡ºå†…å®¹ï¼Œå®šä½è¾“å‡ºæ‰€åœ¨çš„ç±»ï¼Œä»£ç è¡Œæ•°åŠæ–¹æ³•åã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;asl.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#ifdef DEBUG</span></div><div class="line">    <span class="meta">#define THIS_FILE [(@<span class="meta-string">""</span> __FILE__) lastPathComponent]</span></div><div class="line">    <span class="meta">#define NSLog(fmt,...) _NSLog((@<span class="meta-string">"%@: Line %d %s "</span> fmt), THIS_FILE, __LINE__, __FUNCTION__, ##__VA_ARGS__)</span></div><div class="line"><span class="meta">#else</span></div><div class="line">    <span class="meta">#define NSLog(fmt,...)</span></div><div class="line"><span class="meta">#endif</span></div><div class="line"></div><div class="line"><span class="meta">#define _NSLog(fmt,...) &#123;                                               \</span></div><div class="line">    <span class="keyword">do</span> &#123;                                                                \</div><div class="line">        <span class="built_in">NSString</span> *str = [<span class="built_in">NSString</span> stringWithFormat:fmt, <span class="meta">##__VA_ARGS__]; \</span></div><div class="line">        printf(<span class="string">"%s\n"</span>,[str UTF8String]);                                \</div><div class="line">        asl_log(<span class="literal">NULL</span>, <span class="literal">NULL</span>, ASL_LEVEL_NOTICE, <span class="string">"%s"</span>, [str UTF8String]);  \</div><div class="line">    &#125; <span class="keyword">while</span>(<span class="number">0</span>);                                                         \</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>äºŒï¼Œ</strong> ğŸ˜‚è®©wkwebviewé¡µé¢æ»šåŠ¨èµ·æ¥ â€˜ä¸èˆ¬é¡ºæ»‘â€™ï¼Œè¦çŸ¥é“é»˜è®¤æ»šåŠ¨é€Ÿåº¦çœŸæ˜¯æ€¥æ­»ä¸ªäººçš„ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)scrollViewWillBeginDragging:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</div><div class="line">    [scrollView setDecelerationRate:<span class="built_in">UIScrollViewDecelerationRateNormal</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ä¸‰ï¼Œ</strong> æ’­æ”¾/åœæ­¢ç³»ç»ŸéŸ³æ•ˆï¼ˆæ¯”å¦‚ç³»ç»Ÿæ¶ˆæ¯æ¨é€æç¤ºéŸ³ï¼‰ï¼Œ<strong><em> <a href="http://iphonedevwiki.net/index.php/AudioServices" target="_blank" rel="external">iOS ç³»ç»Ÿè¯¦ç»†éŸ³æ•ˆåˆ—è¡¨</a>ã€‚</em></strong> </p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ·»åŠ  AudioToolbox.framework åˆ°é¡¹ç›®ï¼Œå¯¼å…¥å¤´æ–‡ä»¶</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;AudioToolbox/AudioToolbox.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// ä¼ å…¥éŸ³æ•ˆ ID å³å¯æ’­æ”¾ï¼Œâ€˜1007â€™ è¡¨ç¤ºç³»ç»Ÿæ¨é€æç¤ºçš„é‚£ä¸ªéŸ³æ•ˆ</span></div><div class="line"><span class="comment">// æ³¨ï¼šæ­¤æ–¹æ³•å³å°†åºŸå¼ƒï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•</span></div><div class="line">AudioServicesPlaySystemSound(<span class="number">1007</span>);</div><div class="line"></div><div class="line"><span class="comment">// æ­¤æ–¹æ³•å¤šäº†ä¸€ä¸ªå›è°ƒå‚æ•°ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œæ¯å®Œæˆä¸€æ¬¡ç³»ç»Ÿå£°éŸ³å°è¯•éƒ½ä¼šæ‰§è¡Œå®Œæˆå—ã€‚ </span></div><div class="line"><span class="comment">// å›è°ƒåœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸Šå‘å‡ºï¼Œå®¢æˆ·ç«¯è´Ÿè´£å¤„ç†çº¿ç¨‹å®‰å…¨ã€‚</span></div><div class="line">AudioServicesPlaySystemSoundWithCompletion(<span class="number">1007</span>, ^&#123;</div><div class="line">   <span class="comment">// æ’­æ”¾å®Œæˆåå›è°ƒ </span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// æ’­æ”¾æ—¶å¸¦éœ‡åŠ¨</span></div><div class="line"><span class="comment">// æ³¨ï¼šæ­¤æ–¹æ³•å³å°†åºŸå¼ƒï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•</span></div><div class="line">AudioServicesPlayAlertSound(<span class="number">1007</span>);</div><div class="line"></div><div class="line"><span class="comment">// æ­¤æ–¹æ³•å¤šäº†ä¸€ä¸ªå›è°ƒå‚æ•°ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œæ¯å®Œæˆä¸€æ¬¡ç³»ç»Ÿå£°éŸ³å°è¯•éƒ½ä¼šæ‰§è¡Œå®Œæˆå—ã€‚ </span></div><div class="line"><span class="comment">// å›è°ƒåœ¨ä¸²è¡Œé˜Ÿåˆ—ä¸Šå‘å‡ºï¼Œå®¢æˆ·ç«¯è´Ÿè´£å¤„ç†çº¿ç¨‹å®‰å…¨ã€‚</span></div><div class="line">AudioServicesPlayAlertSoundWithCompletion(<span class="number">1007</span>, ^&#123;</div><div class="line">   <span class="comment">// æ’­æ”¾å®Œæˆåå›è°ƒ </span></div><div class="line">&#125;); </div><div class="line"></div><div class="line"><span class="comment">// é”€æ¯(é‡Šæ”¾)éŸ³æ•ˆ</span></div><div class="line">AudioServicesDisposeSystemSoundID(<span class="number">1007</span>);</div></pre></td></tr></table></figure>
<p><strong>å››ï¼Œ</strong> å¦‚æœéœ€è¦ä½¿ç”¨ <code>AudioServices</code> æ’­æ”¾è‡ªå®šä¹‰çš„éŸ³æ•ˆï¼ŒMP3æ–‡ä»¶æ˜¯æ— æ³•æ’­æ”¾çš„ï¼Œéœ€è¦è½¬æ¢æˆ .caf æ–‡ä»¶ã€‚<strong> æ³¨æ„ï¼š<code>AudioServices</code>åªèƒ½æ’­æ”¾30ç§’ä»¥å†…çš„çŸ­å£°éŸ³ï¼Œå¤§äº30ç§’çš„æ–‡ä»¶æ— æ³•æ’­æ”¾ï¼Œå¯ä»¥ä½¿ç”¨ <code>AVAudioPlayer</code> è¿™ä¸ªç±»æ¥è¿›è¡Œæ’­æ”¾ã€‚</strong> </p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä½¿ç”¨ç»ˆç«¯å‘½ä»¤è½¬æ¢</span></div><div class="line"><span class="comment">// xxx.mp3 éœ€è½¬æ¢æ–‡ä»¶</span></div><div class="line"><span class="comment">// xxx.caf è¢«è½¬æ¢ç›®æ ‡æ–‡ä»¶</span></div><div class="line"></div><div class="line"><span class="comment">// æ–¹å¼1ï¼šæ­¤æ–¹æ³•è½¬æ¢å‡ºæ¥çš„æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä¸æ¨è</span></div><div class="line">$ afconvert -f caff -d LEI16@<span class="number">44100</span> -c <span class="number">1</span> xxx.mp3 xxx.caf</div><div class="line"></div><div class="line"><span class="comment">// æ–¹å¼2ï¼šæ­¤æ–¹æ³•è½¬æ¢å‡ºæ¥çš„æ–‡ä»¶æ¯”è¾ƒå°ï¼Œæ¨èä½¿ç”¨</span></div><div class="line">$ afconvert xxx.mp3 xxx.caf -d ima4 -f caff -v</div></pre></td></tr></table></figure>
<p><strong>äº”ï¼Œ</strong> æ’­æ”¾è‡ªå®šä¹‰å£°æ•ˆç¤ºä¾‹ä»£ç ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(<span class="number">0</span>, <span class="number">0</span>), ^&#123;</div><div class="line">   SystemSoundID soundID = <span class="number">0</span>;</div><div class="line">   <span class="built_in">NSURL</span> *url = [[<span class="built_in">NSBundle</span> mainBundle] URLForResource:<span class="string">@"xxx.caf"</span> withExtension:<span class="literal">nil</span>];</div><div class="line">   AudioServicesCreateSystemSoundID((__bridge <span class="built_in">CFURLRef</span> _Nonnull)(url), &amp;soundID);</div><div class="line">   AudioServicesAddSystemSoundCompletion(soundID, <span class="literal">NULL</span>, <span class="literal">NULL</span>, soundCompleteCallback, <span class="literal">NULL</span>);</div><div class="line">   <span class="comment">// AudioServicesPlayAlertSound(soundID); // æ’­æ”¾éŸ³æ•ˆå¹¶éœ‡åŠ¨</span></div><div class="line">   AudioServicesPlaySystemSound(soundID);   <span class="comment">// åªæ’­æ”¾éŸ³æ•ˆ</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">void</span> soundCompleteCallback(SystemSoundID soundID, <span class="keyword">void</span> *clientData) &#123;</div><div class="line">   AudioServicesDisposeSystemSoundID(soundID); <span class="comment">// é”€æ¯å£°éŸ³</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å…­ï¼Œ</strong> åœ¨ä»»æ„ç•Œé¢æ§åˆ¶å™¨ä¸­è·³è½¬åˆ°æ ¹æ§åˆ¶å™¨ï¼ŒæŒ‡å®šæ ¹æ§åˆ¶å™¨çš„ indexã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åœ¨ AppDelegate.h ä¸­å®šä¹‰ï¼š</span></div><div class="line">- (<span class="keyword">void</span>)jumpTabBarSelectedIndex:(<span class="built_in">NSInteger</span>)index</div><div class="line">                       complete:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))block;</div><div class="line"></div><div class="line"><span class="comment">// åœ¨ AppDelegate.m ä¸­å®ç°ï¼š</span></div><div class="line">- (<span class="keyword">void</span>)jumpTabBarSelectedIndex:(<span class="built_in">NSInteger</span>)index complete:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))block &#123;</div><div class="line">   [(<span class="built_in">UITabBarController</span> *)<span class="keyword">self</span>.window.rootViewController setSelectedIndex:index];</div><div class="line">   !block ?: block();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è°ƒç”¨ï¼š</span></div><div class="line">[kAppDelegate() jumpTabBarSelectedIndex:<span class="number">0</span> complete:^&#123; </div><div class="line">   <span class="comment">// è·³è½¬å®Œæˆåå›è°ƒ</span></div><div class="line">&#125;];</div><div class="line"></div><div class="line"><span class="meta">#pragma mark - å…¨å±€æ–¹æ³•</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> AppDelegate *kAppDelegate() &#123;</div><div class="line">    <span class="keyword">return</span> (AppDelegate *)[<span class="built_in">UIApplication</span> sharedApplication].delegate;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ä¸ƒï¼Œ</strong> åœ¨ä»»æ„é¡µé¢è·å¾—å½“å‰çš„æ ˆé¡¶æ§åˆ¶å™¨ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UIViewController</span> *)currentTopVC &#123;</div><div class="line">    <span class="built_in">UIWindow</span> *keyWindow = [<span class="built_in">UIApplication</span> sharedApplication].keyWindow;</div><div class="line">    <span class="built_in">UIViewController</span> *topVC = [<span class="keyword">self</span> topViewController:[keyWindow rootViewController]];</div><div class="line">    <span class="keyword">while</span> (topVC.presentedViewController) &#123;</div><div class="line">        topVC = [<span class="keyword">self</span> topViewController:topVC.presentedViewController];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> topVC;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">UIViewController</span> *)topViewController:(<span class="built_in">UIViewController</span> *)controller &#123;</div><div class="line">    <span class="keyword">if</span> ([controller isKindOfClass:[<span class="built_in">UINavigationController</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">        <span class="keyword">return</span> [<span class="keyword">self</span> topViewController:[(<span class="built_in">UINavigationController</span> *)controller topViewController]];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([controller isKindOfClass:[<span class="built_in">UITabBarController</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">        <span class="keyword">return</span> [<span class="keyword">self</span> topViewController:[(<span class="built_in">UITabBarController</span> *)controller selectedViewController]];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> controller;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>å…«ï¼Œ</strong> è·å–å¯åŠ¨é¡µå›¾ç‰‡ã€‚</p>
<figure class="highlight obj-c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">UIImage</span> *)getLaunchImage &#123;</div><div class="line">    <span class="built_in">CGSize</span> viewSize = [<span class="built_in">UIScreen</span> mainScreen].bounds.size;</div><div class="line">    <span class="built_in">NSString</span> *viewOrientation = <span class="string">@"Portrait"</span>; <span class="comment">// Horizontal "Landscape"</span></div><div class="line">    <span class="built_in">NSString</span> *launchImage = <span class="string">@""</span>;</div><div class="line">    <span class="built_in">NSArray</span> *imagesDict = [[<span class="built_in">NSBundle</span> mainBundle] infoDictionary][<span class="string">@"UILaunchImages"</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSDictionary</span> *dict <span class="keyword">in</span> imagesDict) &#123;</div><div class="line">        <span class="built_in">CGSize</span> imageSize = <span class="built_in">CGSizeFromString</span>(dict[<span class="string">@"UILaunchImageSize"</span>]);</div><div class="line">        <span class="keyword">if</span> (<span class="built_in">CGSizeEqualToSize</span>(imageSize, viewSize) &amp;&amp;</div><div class="line">            [viewOrientation isEqualToString:dict[<span class="string">@"UILaunchImageOrientation"</span>]]) &#123;</div><div class="line">            launchImage = dict[<span class="string">@"UILaunchImageName"</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> [<span class="built_in">UIImage</span> imageNamed:launchImage];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20180112-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;è®°å½•ä¸€äº›å¹³æ—¶æ¯”è¾ƒå°‘ç”¨æˆ–è€…å®¹æ˜“å¿˜è®°çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œä¸»è¦æ˜¯é›¶æ•£ä»£ç æ®µã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸€ï¼Œ&lt;/stron
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/categories/iOS/Objective-C/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>Mac Terminal è®¾ç½®ä»£ç†</title>
    <link href="http://yoursite.com/2017/11/21/mac-terminal-proxy/"/>
    <id>http://yoursite.com/2017/11/21/mac-terminal-proxy/</id>
    <published>2017-11-21T02:14:24.000Z</published>
    <updated>2018-04-14T08:43:02.840Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20171121-01-blog.jpg" alt=""></p>
<p>æ˜¨å¤©æ›´æ–° CocoaPods çš„æ—¶å€™ï¼Œä½¿ç”¨<code>pod setup</code>å‘½ä»¤æ›´æ–°ä¸€ç›´å¤±è´¥ï¼Œä¼°è®¡æ˜¯å› ä¸º CocoaPods å·²è¢« iOS å¼€å‘è€…å¹¿æ³›ä½¿ç”¨ï¼Œç´¢å¼•åº“çš„æ–‡ä»¶ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼ŒåŠ ä¸Šå¢™çš„åŸå› ï¼Œæ‰€ä»¥ä¸‹è½½ç´¢å¼•åº“æ–‡ä»¶åˆ°æœ¬åœ°ä¹Ÿè¶Šæ¥è¶Šæ…¢ï¼Œæ²¡åŠæ³•åªèƒ½æŒ‚æ¢¯å­äº†ã€‚</p>
<p>æœ¬æ¥ä»¥ä¸º Mac çš„ç³»ç»Ÿä»£ç†åœ¨ç»ˆç«¯ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯ä¸€é€šæŸ¥å‘ç°åœ¨ç»ˆç«¯éœ€è¦å•ç‹¬è®¾ç½®ä»£ç†ã€‚åœ¨ç½‘ä¸Šæ‰¾åˆ°å¾ˆå¤šç›¸å…³æ–‡ç« ï¼Œè¿™é‡Œé‡‡å–äº†ä¸¤ä¸ªæœ€ç®€å•å´è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># cd åˆ°æ ¹ç›®å½•ï¼ŒæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰</div><div class="line">$ ls -al</div></pre></td></tr></table></figure>
<p>å¦‚æœè¦åœ¨ Finder ä¸­æ˜¾ç¤º/éšè—ç³»ç»Ÿéšè—æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># æ˜¾ç¤º Finder  éšè—æ–‡ä»¶</div><div class="line">$ defaults write com.apple.finder AppleShowAllFiles -bool true</div><div class="line"></div><div class="line"># éšè— Finder éšè—æ–‡ä»¶</div><div class="line">$ defaults write com.apple.finder AppleShowAllFiles -bool false</div></pre></td></tr></table></figure></p>
<p>æ‰¾åˆ° <code>.bash_profile</code> æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼ˆMac é»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶çš„ï¼‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># åˆ›å»º .bash_profile æ–‡ä»¶</div><div class="line">$ touch .bash_profile</div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ vim ç¼–è¾‘å™¨æ‰“å¼€ <code>.bash_profile</code> æ–‡ä»¶ï¼ŒæŒ‰ i è¿›å…¥å¯ç¼–è¾‘çŠ¶æ€ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p>
<p>æ–¹å¼ä¸€ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># http://127.0.0.1:1080 æ›¿æ¢æˆè‡ªå·±çš„ IP å’Œç«¯å£</div><div class="line">$ alias goproxy=&apos;export http_proxy=http://127.0.0.1:1080 https_proxy=http://127.0.0.1:1080&apos;</div><div class="line">$ alias disproxy=&apos;unset http_proxy https_proxy&apos;</div></pre></td></tr></table></figure></p>
<p>æ–¹å¼äºŒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># http://127.0.0.1:1080 æ›¿æ¢æˆè‡ªå·±çš„ IP å’Œç«¯å£</div><div class="line">$ alias setproxy=&quot;export http_proxy=http://127.0.0.1:1080; export https_proxy=$http_proxy; echo &apos;HTTP Proxy on&apos;;&quot;</div><div class="line">$ alias unsetproxy=&quot;unset http_proxy; unset https_proxy; echo &apos;HTTP Proxy off&apos;;&quot;</div></pre></td></tr></table></figure></p>
<p>ç¼–è¾‘å®ŒåæŒ‰ esc é”®é€€å‡ºç¼–è¾‘çŠ¶æ€ï¼Œå†è¾“å…¥ <code>:wq</code> æŒ‰å›è½¦ä¿å­˜å¹¶é€€å‡º vim ç¼–è¾‘å™¨ã€‚</p>
<p>æœ€åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è®© <code>.bash_profile</code> æ–‡ä»¶ç«‹å³ç”Ÿæ•ˆï¼Œæˆ–è€…é‡å¯ç”µè„‘ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ source ~/.bash_profile</div></pre></td></tr></table></figure></p>
<p>æ–¹å¼äºŒå¯ä»¥é€šè¿‡å‘½ä»¤æ¥æ§åˆ¶å¼€å¯å’Œå…³é—­ç»ˆç«¯ä»£ç†ï¼Œä½¿ç”¨æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># å¼€å¯ä»£ç†</div><div class="line">$ setproxy    </div><div class="line">HTTP Proxy on</div><div class="line"></div><div class="line"># å…³é—­ä»£ç†</div><div class="line">$ unsetproxy  </div><div class="line">HTTP Proxy off</div></pre></td></tr></table></figure></p>
<p>å¼€å¯ä»£ç†åï¼Œå¹³å‡ä¸‹è½½é€Ÿåº¦å°†è¿‘ 2M/sï¼Œå‡ åˆ†é’Ÿå°±æå®šäº†ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20171121-00-blog.png" alt=""></p>
<p>å‚è€ƒæ–‡ç« ï¼š<br><a href="https://eliyar.biz/proxy-for-mac-terminal/" target="_blank" rel="external">ä¸ºMac Terminalè®¾ç½®ä»£ç†</a><br><a href="http://honglu.me/2015/11/06/%E7%BB%99iTerm%E7%BB%88%E7%AB%AF%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/" target="_blank" rel="external">ç»™ iTerm ç»ˆç«¯è®¾ç½®ä»£ç†</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20171121-01-blog.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ˜¨å¤©æ›´æ–° CocoaPods çš„æ—¶å€™ï¼Œä½¿ç”¨&lt;code&gt;pod setup&lt;/code&gt;å‘½ä»¤æ›´æ–°ä¸€ç›´å¤±è´¥ï¼Œä¼°è®¡æ˜¯å› ä¸º
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="Terminal" scheme="http://yoursite.com/categories/Technology/Terminal/"/>
    
    
      <category term="Proxy" scheme="http://yoursite.com/tags/Proxy/"/>
    
  </entry>
  
  <entry>
    <title>CocoaPodså®‰è£…ç¬¬ä¸‰æ–¹åº“æŠ¥é”™</title>
    <link href="http://yoursite.com/2017/10/19/cocoapods-install-error/"/>
    <id>http://yoursite.com/2017/10/19/cocoapods-install-error/</id>
    <published>2017-10-19T02:41:52.000Z</published>
    <updated>2018-03-21T02:21:04.079Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20171219-00-blog.png" alt=""></p>
<p>ä»Šå¤©åœ¨ä½¿ç”¨ CocoaPods å®‰è£… <a href="https://github.com/ReactiveCocoa/ReactiveObjC" target="_blank" rel="external">ReactiveObjC</a> çš„æ—¶å€™å¤±è´¥ï¼ŒæŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[!] Error installing ReactiveObjC</div><div class="line">[!] /usr/bin/git clone https://github.com/ReactiveCocoa/ReactiveObjC.git /var/folders/bz/29qvklsn77x9_706n9wq8j5m0000gn/T/d20180314-1931-1qoi06x --template= --single-branch --depth 1 --branch 3.1.0</div><div class="line"></div><div class="line">Cloning into '/var/folders/bz/29qvklsn77x9_706n9wq8j5m0000gn/T/d20180314-1931-1qoi06x'...</div><div class="line">fatal: unable to access 'https://github.com/ReactiveCocoa/ReactiveObjC.git/': LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443</div></pre></td></tr></table></figure></p>
<p>ç½‘ä¸Šä¸€é€šæ‰¾ï¼ŒåŸæ¥æ˜¯ git çš„ä»£ç†é…ç½®é—®é¢˜å¯¼è‡´ï¼Œå› ä¸ºæŸäº›åŸå› ï¼ˆğŸ¤¡ä½ æ‡‚çš„ï¼‰å¯¼è‡´æ¢¯å­ç»å¸¸æ¢ï¼Œä¹‹å‰é…ç½®çš„ç«¯å£ä¸èƒ½ç”¨äº†ï¼Œè€Œæ¢äº†æ–°çš„ç«¯å£é…ç½®æ²¡æ”¹ï¼Œæ‰€ä»¥é‡æ–°é…ç½®ä¸‹å°±è§£å†³é—®é¢˜å•¦~</p>
<p>æ–¹æ³•å¦‚ä¸‹ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼Œåé¢é”®å…¥ IP åœ°å€å’Œç«¯å£å·ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git config --global https.proxy 'socks5://Your ip address:port'</div><div class="line"></div><div class="line">$ git config --global http.proxy 'socks5://Your ip address:port'</div></pre></td></tr></table></figure></p>
<p>å®Œäº†é‡æ–° pod installï¼Œæå®š~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20171219-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå¤©åœ¨ä½¿ç”¨ CocoaPods å®‰è£… &lt;a href=&quot;https://github.com/ReactiveCo
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="CocoaPods" scheme="http://yoursite.com/categories/Technology/CocoaPods/"/>
    
    
      <category term="CocoaPods" scheme="http://yoursite.com/tags/CocoaPods/"/>
    
      <category term="Git" scheme="http://yoursite.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨åŒé¡¹ç›®ä¸­ä½¿ç”¨ Swift å’Œ Objective-C</title>
    <link href="http://yoursite.com/2017/10/02/Swift-and-Objective-C-in-the-Same-Project/"/>
    <id>http://yoursite.com/2017/10/02/Swift-and-Objective-C-in-the-Same-Project/</id>
    <published>2017-10-02T03:18:12.000Z</published>
    <updated>2018-04-29T07:10:21.250Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20171002-00-blog.png?imageView/2/w/600/q/80" alt=""></p>
<p>Swift ä¸ Objective-C çš„å…¼å®¹æ€§ä½¿ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ç§è¯­è¨€ç¼–å†™çš„é¡¹ç›®ã€‚ä½ å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½ï¼ˆcalled mix and matchï¼‰ç¼–å†™å…·æœ‰æ··åˆè¯­è¨€ä»£ç åº“çš„åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨æ··åˆç¼–å†™ï¼Œä½ å¯ä»¥ä½¿ç”¨æœ€æ–°çš„ Swift ç‰¹æ€§å®ç°åº”ç”¨ç¨‹åºçš„éƒ¨åˆ†åŠŸèƒ½ï¼Œå¹¶å°†å…¶æ— ç¼é›†æˆåˆ°ä½ ç°æœ‰çš„ Objective-C ä»£ç åº“ä¸­ã€‚</p>
<h3 id="Mix-and-Match-æ¦‚è¿°"><a href="#Mix-and-Match-æ¦‚è¿°" class="headerlink" title="Mix and Match æ¦‚è¿°"></a>Mix and Match æ¦‚è¿°</h3><p>Objective-C å’ŒSwift æ–‡ä»¶å¯ä»¥å…±å­˜äºä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ— è®ºè¯¥é¡¹ç›®æœ€åˆæ˜¯ Objective-C è¿˜æ˜¯ Swift é¡¹ç›®ã€‚ä½ å¯ä»¥ç›´æ¥å°†å…¶ä»–è¯­è¨€çš„æ–‡ä»¶æ·»åŠ åˆ°ç°æœ‰çš„é¡¹ç›®ä¸­ã€‚è¿™ç§è‡ªç„¶çš„å·¥ä½œæµç¨‹ä½¿å¾—åˆ›å»ºæ··åˆè¯­è¨€åº”ç”¨ç¨‹åºå’Œæ¡†æ¶ç›®æ ‡ï¼ˆframework targetsï¼‰ä¸åˆ›å»ºç”¨å•ä¸€è¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ç›®æ ‡ä¸€æ ·ç®€å•ã€‚</p>
<p>å–å†³äºä½ æ˜¯ç¼–å†™åº”ç”¨ç¨‹åºè¿˜æ˜¯æ¡†æ¶ï¼Œä½¿ç”¨æ··åˆè¯­è¨€ç¼–å†™çš„è¿‡ç¨‹ç•¥æœ‰ä¸åŒã€‚ä¸‹é¢æè¿°äº†åœ¨åŒä¸€ä¸ª Target ä¸­ä½¿ç”¨ä¸¤ç§è¯­è¨€çš„ä¸€èˆ¬å¯¼å…¥æ¨¡å¼ï¼Œå¹¶åœ¨ä»¥ä¸‹å„èŠ‚ä¸­å¯¹å…¶è¿›è¡Œäº†æ›´è¯¦ç»†çš„ä»‹ç»ã€‚</p>
<h3 id="ä»ç›¸åŒåº”ç”¨ç›®æ ‡ä¸­å¯¼å…¥ä»£ç "><a href="#ä»ç›¸åŒåº”ç”¨ç›®æ ‡ä¸­å¯¼å…¥ä»£ç " class="headerlink" title="ä»ç›¸åŒåº”ç”¨ç›®æ ‡ä¸­å¯¼å…¥ä»£ç "></a>ä»ç›¸åŒåº”ç”¨ç›®æ ‡ä¸­å¯¼å…¥ä»£ç </h3><p>å¦‚æœä½ æ­£åœ¨ç¼–å†™æ··åˆè¯­è¨€çš„åº”ç”¨ç¨‹åºï¼Œåˆ™å¯èƒ½éœ€è¦ä» Swift è®¿é—®ä½ çš„ Objective-C ä»£ç ï¼Œæˆ–è€…ä» Objective-C è®¿é—®ä½ çš„ Swift ä»£ç ã€‚æœ¬èŠ‚æè¿°çš„è¿‡ç¨‹é€‚ç”¨äºéæ¡†æ¶ç›®æ ‡ï¼ˆnon-framework targetsï¼‰ã€‚</p>
<h4 id="å°†-Objective-C-å¯¼å…¥åˆ°-Swift"><a href="#å°†-Objective-C-å¯¼å…¥åˆ°-Swift" class="headerlink" title="å°† Objective-C å¯¼å…¥åˆ° Swift"></a>å°† Objective-C å¯¼å…¥åˆ° Swift</h4><p>è¦å°†ä¸€ç»„ Objective-C æ–‡ä»¶å¯¼å…¥ä¸ Swift ä»£ç ç›¸åŒçš„åº”ç”¨ç¨‹åº Target ä¸­ï¼Œä½ éœ€è¦ä¾é  Objective-C æ¡¥æ¥å¤´æ–‡ä»¶å°†è¿™äº›æ–‡ä»¶å…¬å¼€åˆ° Swift ä¸­ã€‚å½“ä½ å°† Swift æ–‡ä»¶æ·»åŠ åˆ°ç°æœ‰çš„ Objective-C åº”ç”¨ç¨‹åºæˆ–å°† Objective-C æ–‡ä»¶æ·»åŠ åˆ°ç°æœ‰çš„ Swift åº”ç”¨ç¨‹åºæ—¶ï¼ŒXcode æä¾›åˆ›å»ºæ­¤å¤´æ–‡ä»¶ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20171002-01-blog.png" alt=""></p>
<p>å¦‚æœä½ æ¥å—ï¼ŒXcode ä¼šåˆ›å»ºå¤´æ–‡ä»¶ä»¥åŠä½ æ­£åœ¨åˆ›å»ºçš„æ–‡ä»¶ï¼Œå¹¶å°†å…¶å‘½åä¸ºä½ çš„äº§å“æ¨¡å—åç§°ï¼ˆproduct module nameï¼‰ï¼Œç„¶åæ·»åŠ  â€œ<code>-Bridging-Header.h</code>â€œã€‚ï¼ˆç¨åä½ å°†åœ¨äº§å“æ¨¡å—å‘½åä¸­è¯¦ç»†äº†è§£<a href="#Naming_Your_Product_Module">äº§å“æ¨¡å—åç§°</a>ï¼‰</p>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥é€šè¿‡é€‰æ‹© File &gt; New &gt; File &gt;ï¼ˆiOSï¼ŒwatchOSï¼ŒtvOS æˆ– macOSï¼‰&gt; Source &gt; Header File æ¥è‡ªè¡Œåˆ›å»ºæ¡¥æ¥å¤´ã€‚</p>
<p>ä½ éœ€è¦ç¼–è¾‘æ¡¥æ¥å¤´æ–‡ä»¶ä»¥å°†ä½ çš„ Objective-C ä»£ç å±•ç¤ºï¼ˆå…¬å¼€ï¼‰ç»™ä½ çš„ Swift ä»£ç ã€‚</p>
<h5 id="å°†-Objective-C-ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ°-Swift-ä¸­"><a href="#å°†-Objective-C-ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ°-Swift-ä¸­" class="headerlink" title="å°† Objective-C ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ° Swift ä¸­"></a>å°† Objective-C ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ° Swift ä¸­</h5><p>åœ¨ä½ çš„ Objective-C æ¡¥æ¥å¤´æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥ä½ æƒ³æš´éœ²ç»™ Swift çš„æ¯ä¸ª Objective-C å¤´æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"XYZCustomCell.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"XYZCustomView.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"XYZCustomViewController.h"</span></span></div></pre></td></tr></table></figure>
<p>åœ¨ Build Settings &gt; Swift Compiler - Code Generation ä¸­ï¼Œç¡®ä¿ Objective-C æ¡¥æ¥å¤´æ„å»ºè®¾ç½®å…·æœ‰æ¡¥æ¥å¤´æ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<p>è·¯å¾„åº”è¯¥ä¸ä½ çš„é¡¹ç›®ç›¸å…³ï¼Œç±»ä¼¼äºåœ¨ Build Settings ä¸­æŒ‡å®š Info.plist è·¯å¾„çš„æ–¹å¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦ä¿®æ”¹æ­¤è®¾ç½®ã€‚</p>
<p>åœ¨è¿™ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ä¸­åˆ—å‡ºçš„ä»»ä½•å…¬å…±çš„ Objective-C å¤´æ–‡ä»¶éƒ½å¯ä»¥è¢« Swift çœ‹åˆ°ã€‚ç„¶ååœ¨è¯¥ Target ä¸­æ‰€æœ‰çš„ Swift æ–‡ä»¶ä¸­å°†è‡ªåŠ¨æä¾› Objective-C çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ä»»ä½•å¯¼å…¥è¯­å¥ã€‚ä½ è‡ªå®šä¹‰çš„ Objective-C ä»£ç ï¼Œå¯ä½¿ç”¨ä¸ç³»ç»Ÿç±»ç›¸åŒçš„ Swift è¯­æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> myCell = <span class="type">XYZCustomCell</span>()</div><div class="line">myCell.subtitle = <span class="string">"A custom cell"</span></div></pre></td></tr></table></figure>
<h4 id="å°†-Swift-å¯¼å…¥åˆ°-Objective-C"><a href="#å°†-Swift-å¯¼å…¥åˆ°-Objective-C" class="headerlink" title="å°† Swift å¯¼å…¥åˆ° Objective-C"></a>å°† Swift å¯¼å…¥åˆ° Objective-C</h4><p>å°† Swift ä»£ç å¯¼å…¥ Objective-C æ—¶ï¼Œä½ éœ€è¦ä¾é  Xcode ç”Ÿæˆçš„å¤´æ–‡ä»¶å°†è¿™äº›æ–‡ä»¶å…¬å¼€åˆ° Objective-C ä¸­ã€‚è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶æ˜¯ä¸€ä¸ª Objective-C å¤´æ–‡ä»¶ï¼Œç”¨äºåœ¨ Target ä¸­å£°æ˜ Swift æ¥å£ã€‚å®ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä½ çš„ Swift çš„ä»£ç å¤´ï¼ˆumbrella headerï¼‰ã€‚è¿™ä¸ªä»£ç å¤´çš„åå­—æ˜¯ä½ çš„äº§å“æ¨¡å—åç§°åé¢åŠ ä¸Š â€œ<code>-Swift.h</code>â€œã€‚ï¼ˆç¨åä½ å°†åœ¨äº§å“æ¨¡å—å‘½åä¸­è¯¦ç»†äº†è§£<a href="#Naming_Your_Product_Module">äº§å“æ¨¡å—åç§°</a>ï¼‰</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„å¤´æ–‡ä»¶åŒ…å«ç”¨ <code>public</code> æˆ– <code>open</code> ä¿®é¥°ç¬¦æ ‡è®°çš„ Swift å£°æ˜çš„æ¥å£ã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åº Target å…·æœ‰ Objective-C æ¡¥æ¥æ ‡é¢˜ï¼Œå®ƒè¿˜åŒ…å«é‚£äº›æ ‡æœ‰ <code>internal</code> ä¿®é¥°ç¬¦çš„æ ‡è®°ã€‚ä½¿ç”¨ <code>private</code> æˆ– <code>fileprivate</code> ä¿®é¥°ç¬¦æ ‡è®°çš„å£°æ˜ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„æ ‡é¢˜ä¸­ã€‚é™¤éæ˜ç¡®ç”¨ <code>@IBAction</code>ï¼Œ<code>@IBOutlet</code> æˆ– <code>@objc</code> æ ‡è®°çš„ç§æœ‰å£°æ˜ï¼Œå¦åˆ™å®ƒä»¬ä¸ä¼šæš´éœ²ç»™ Objective-Cã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åº Target æ˜¯åœ¨å¯ç”¨æµ‹è¯•çš„æƒ…å†µä¸‹ç¼–è¯‘çš„ï¼Œåˆ™å•å…ƒæµ‹è¯•ç›®æ ‡å¯ä»¥ä½¿ç”¨ <code>internal</code> ä¿®é¥°ç¬¦è®¿é—®ä»»ä½•å£°æ˜ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯ä½¿ç”¨ <code>public</code> ä¿®é¥°ç¬¦å£°æ˜çš„ï¼Œæ–¹æ³•æ˜¯å°† <code>@testable</code> æ·»åŠ åˆ°äº§å“æ¨¡å—å¯¼å…¥è¯­å¥ä¸­ã€‚</p>
<p>æœ‰å…³è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097" target="_blank" rel="external">Swift ç¼–ç¨‹è¯­è¨€ï¼ˆSwift 4.1ï¼‰</a>ä¸­çš„<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/AccessControl.html#//apple_ref/doc/uid/TP40014097-CH41" target="_blank" rel="external">è®¿é—®æ§åˆ¶</a>ã€‚</p>
<p>ä½ ä¸éœ€è¦åšä»»ä½•ç‰¹åˆ«çš„äº‹æƒ…æ¥åˆ›å»ºç”Ÿæˆçš„å¤´æ–‡ä»¶ï¼Œåªéœ€å°†å…¶å¯¼å…¥åˆ°ä½ çš„ Objective-C ä»£ç ä¸­å³å¯ä½¿ç”¨å®ƒçš„å†…å®¹ã€‚è¯·æ³¨æ„ï¼Œç”Ÿæˆå¤´æ–‡ä»¶ä¸­çš„Swiftæ¥å£åŒ…å«å¯¹å…¶ä¸­ä½¿ç”¨çš„æ‰€æœ‰ Objective-C ç±»å‹çš„å¼•ç”¨ã€‚å¦‚æœä½ åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨è‡ªå·±çš„ Objective-C ç±»å‹ï¼Œè¯·åŠ¡å¿…åœ¨å°† Swift ç”Ÿæˆçš„å¤´æ–‡ä»¶å¯¼å…¥è¦ä»ä¸­è®¿é—® Swift ä»£ç çš„ Objective-C .m æ–‡ä»¶ä¹‹å‰ï¼Œä¸ºè¿™äº›ç±»å‹å¯¼å…¥ Objective-C å¤´æ–‡ä»¶ã€‚</p>
<h5 id="å°†-Swift-ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ°-Objective-C-ä¸­"><a href="#å°†-Swift-ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ°-Objective-C-ä¸­" class="headerlink" title="å°† Swift ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ° Objective-C ä¸­"></a>å°† Swift ä»£ç ä»åŒä¸€ä¸ªç›®æ ‡å¯¼å…¥åˆ° Objective-C ä¸­</h5><p>ä½¿ç”¨æ­¤è¯­æ³•å°†è¯¥ Target ä¸­çš„ Swift ä»£ç å¯¼å…¥åˆ°è¯¥ Target ä¸­çš„ä»»ä½• Objective-C .m æ–‡ä»¶ä¸­ï¼Œå¹¶æ›¿æ¢é€‚å½“çš„åç§°ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ProductModuleName-Swift.h"</span></span></div></pre></td></tr></table></figure>
<p>Target ä¸­çš„ Swift æ–‡ä»¶å°†åœ¨åŒ…å«æ­¤å¯¼å…¥è¯­å¥çš„ Objective-C .m æ–‡ä»¶ä¸­å¯è§ã€‚æœ‰å…³ä» Objective-C ä»£ç ä½¿ç”¨ Swift çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="#Using_Swift_from_Objective-C">ä» Objective-C ä½¿ç”¨ Swift</a>ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">Import into Swift</th>
<th style="text-align:center">Import into Objective-C</th>
</tr>
</thead>
<tbody>
<tr>
<td>Swift code</td>
<td style="text-align:center">No import statement</td>
<td style="text-align:center"><code>#import &quot;ProductModuleName-Swift.h&quot;</code></td>
</tr>
<tr>
<td>Objective-C code</td>
<td style="text-align:center">No import statement; Objective-C bridging header required</td>
<td style="text-align:center"><code>#import &quot;Header.h&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="ä»ç›¸åŒæ¡†æ¶ç›®æ ‡ä¸­å¯¼å…¥ä»£ç "><a href="#ä»ç›¸åŒæ¡†æ¶ç›®æ ‡ä¸­å¯¼å…¥ä»£ç " class="headerlink" title="ä»ç›¸åŒæ¡†æ¶ç›®æ ‡ä¸­å¯¼å…¥ä»£ç "></a>ä»ç›¸åŒæ¡†æ¶ç›®æ ‡ä¸­å¯¼å…¥ä»£ç </h3><p>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ··åˆè¯­è¨€æ¡†æ¶ï¼Œä½ å¯èƒ½éœ€è¦ä» Swift ä¸­è®¿é—®ä½ çš„ Objective-C ä»£ç ï¼Œæˆ–è€…ä» Objective-C ä¸­è®¿é—®ä½ çš„ Swift ä»£ç ã€‚</p>
<h4 id="å°†-Objective-C-å¯¼å…¥åˆ°-Swift-1"><a href="#å°†-Objective-C-å¯¼å…¥åˆ°-Swift-1" class="headerlink" title="å°† Objective-C å¯¼å…¥åˆ° Swift"></a>å°† Objective-C å¯¼å…¥åˆ° Swift</h4><p>è¦å°†ä¸€ç»„ Objective-C æ–‡ä»¶å¯¼å…¥ä¸ Swift ä»£ç ç›¸åŒçš„æ¡†æ¶ Target ä¸­ï¼Œä½ éœ€è¦å°†è¿™äº›æ–‡ä»¶å¯¼å…¥åˆ°æ¡†æ¶çš„ Objective-C æ¡¥æ¥å¤´æ–‡ä»¶ä¸­ã€‚</p>
<h5 id="å°†-Objective-C-ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ°-Swift-ä¸­"><a href="#å°†-Objective-C-ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ°-Swift-ä¸­" class="headerlink" title="å°† Objective-C ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ° Swift ä¸­"></a>å°† Objective-C ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ° Swift ä¸­</h5><ol>
<li>åœ¨ â€œBuild Settingsâ€ ä¸‹çš„ â€œPackagingâ€ ä¸­ï¼Œç¡®ä¿è¯¥æ¡†æ¶ Target çš„ â€œDefines Moduleâ€ è®¾ç½®è®¾ç½®ä¸º â€œYesâ€ã€‚</li>
<li>åœ¨ä½ çš„ç±»å¤´æ–‡ä»¶ä¸­ï¼Œå¯¼å…¥ä½ æƒ³æš´éœ²ç»™ Swift çš„æ¯ä¸ª Objective-C å¤´æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;XYZ/XYZCustomCell.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;XYZ/XYZCustomView.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;XYZ/XYZCustomViewController.h&gt;</span></span></div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ¡¥æ¥å¤´æ–‡ä»¶ä¸­åˆ—å‡ºçš„ä»»ä½•å…¬å…±çš„ Objective-C å¤´æ–‡ä»¶éƒ½å¯ä»¥è¢« Swift çœ‹åˆ°ã€‚è¯¥æ¡†æ¶ä¸­çš„ Objective-C æ–‡ä»¶çš„å†…å®¹å°†è‡ªåŠ¨åœ¨è¯¥æ¡†æ¶ç›®æ ‡ä¸­çš„ä»»ä½• Swift æ–‡ä»¶ä¸­æä¾›ï¼Œè€Œä¸éœ€è¦ä»»ä½•å¯¼å…¥è¯­å¥ã€‚ä½ è‡ªå®šä¹‰çš„ Objective-C ä»£ç ï¼Œå¯ä½¿ç”¨ä¸ç³»ç»Ÿç±»ç›¸åŒçš„ Swift è¯­æ³•ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> myOtherCell = <span class="type">XYZCustomCell</span>()</div><div class="line">myOtherCell.subtitle = <span class="string">"Another custom cell"</span></div></pre></td></tr></table></figure>
<h4 id="å°†-Swift-å¯¼å…¥åˆ°-Objective-C-1"><a href="#å°†-Swift-å¯¼å…¥åˆ°-Objective-C-1" class="headerlink" title="å°† Swift å¯¼å…¥åˆ° Objective-C"></a>å°† Swift å¯¼å…¥åˆ° Objective-C</h4><p>è¦å°†ä¸€ç»„ Swift æ–‡ä»¶å¯¼å…¥ä¸ Objective-C ä»£ç ç›¸åŒçš„æ¡†æ¶ç›®æ ‡ä¸­ï¼Œä½ ä¸éœ€è¦å°†ä»»ä½•å†…å®¹å¯¼å…¥æ¡†æ¶çš„å¤´æ–‡ä»¶ä¸­ã€‚ç›¸åï¼Œå°†ç”¨äº Swift ä»£ç çš„ Xcode ç”Ÿæˆçš„å¤´æ–‡ä»¶å¯¼å…¥åˆ°è¦ä½¿ç”¨ Swift ä»£ç çš„ä»»ä½• Objective-C .m æ–‡ä»¶ä¸­ã€‚</p>
<p>ç”±äºä¸ºæ¡†æ¶ Target ç”Ÿæˆçš„å¤´æ˜¯æ¡†æ¶å…¬å…±æ¥å£çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åªæœ‰ä¸º <code>public</code> æˆ– <code>open</code> ä¿®é¥°ç¬¦æ ‡è®°çš„å£°æ˜æ‰ä¼šå‡ºç°åœ¨ä¸ºæ¡†æ¶ Target ç”Ÿæˆçš„å¤´ä¸­ã€‚</p>
<p>Objective-C è¿è¡Œæ—¶å¯ä»¥è®¿é—®ç”¨å†…éƒ¨ä¿®é¥°ç¬¦æ ‡è®°å¹¶åœ¨ä» Objective-C ç±»ç»§æ‰¿çš„ç±»ä¸­å£°æ˜çš„ Swift æ–¹æ³•å’Œå±æ€§ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘æ—¶ä¸å¯è®¿é—®ï¼Œå¹¶ä¸”ä¸ä¼šå‡ºç°åœ¨ä¸ºæ¡†æ¶ç›®æ ‡ç”Ÿæˆçš„å¤´æ–‡ä»¶ä¸­ã€‚</p>
<p>æœ‰å…³è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097" target="_blank" rel="external">Swift ç¼–ç¨‹è¯­è¨€ï¼ˆSwift 4.1ï¼‰</a>ä¸­çš„<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/AccessControl.html#//apple_ref/doc/uid/TP40014097-CH41" target="_blank" rel="external">è®¿é—®æ§åˆ¶</a>ã€‚</p>
<h5 id="å°†-Swift-ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ°-Objective-C-ä¸­"><a href="#å°†-Swift-ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ°-Objective-C-ä¸­" class="headerlink" title="å°† Swift ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ° Objective-C ä¸­"></a>å°† Swift ä»£ç ä»åŒä¸€ä¸ªæ¡†æ¶å¯¼å…¥åˆ° Objective-C ä¸­</h5><ol>
<li>åœ¨ â€œBuild Settingsâ€ ä¸‹çš„ â€œPackagingâ€ ä¸­ï¼Œç¡®ä¿è¯¥æ¡†æ¶ Target çš„ â€œDefines Moduleâ€ è®¾ç½®è®¾ç½®ä¸º â€œYesâ€ã€‚</li>
<li>ä½¿ç”¨æ­¤è¯­æ³•å°†è¯¥æ¡†æ¶ Target ä¸­çš„ Swift ä»£ç å¯¼å…¥è¯¥æ¡†æ¶ Target ä¸­çš„ä»»ä½• Objective-C .m æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢é€‚å½“çš„åç§°ï¼š</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;ProductName/ProductModuleName-Swift.h&gt;</span></span></div></pre></td></tr></table></figure>
<p>åŒ…å«æ­¤å¯¼å…¥è¯­å¥çš„ Objective-C .m æ–‡ä»¶ä¸­å°†æ˜¾ç¤ºæ¡†æ¶ Targetä¸­çš„ Swift æ–‡ä»¶ã€‚æœ‰å…³ä» Objective-C ä»£ç ä½¿ç”¨ Swift çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="#Using_Swift_from_Objective-C">ä» Objective-C ä½¿ç”¨ Swift</a>ã€‚</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">Import into Swift</th>
<th style="text-align:center">Import into Objective-C</th>
</tr>
</thead>
<tbody>
<tr>
<td>Swift code</td>
<td style="text-align:center">No import statement</td>
<td style="text-align:center"><code>#import &lt;ProductName/ProductModuleName-Swift.h&gt;</code></td>
</tr>
<tr>
<td>Objective-C code</td>
<td style="text-align:center">No import statement; Objective-C umbrella header required</td>
<td style="text-align:center"><code>#import &quot;Header.h&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="å¯¼å…¥å¤–éƒ¨æ¡†æ¶"><a href="#å¯¼å…¥å¤–éƒ¨æ¡†æ¶" class="headerlink" title="å¯¼å…¥å¤–éƒ¨æ¡†æ¶"></a>å¯¼å…¥å¤–éƒ¨æ¡†æ¶</h3><p>ä½ å¯ä»¥å¯¼å…¥å…·æœ‰çº¯ç²¹çš„ Objective-C ä»£ç åº“ï¼Œçº¯ Swift ä»£ç åº“æˆ–æ··åˆè¯­è¨€ä»£ç åº“çš„å¤–éƒ¨æ¡†æ¶ã€‚æ— è®ºæ¡†æ¶æ˜¯ç”¨å•ä¸€è¯­è¨€ç¼–å†™è¿˜æ˜¯åŒ…å«æ¥è‡ªä¸¤ç§è¯­è¨€çš„æ–‡ä»¶ï¼Œå¯¼å…¥å¤–éƒ¨æ¡†æ¶çš„è¿‡ç¨‹éƒ½æ˜¯ç›¸åŒçš„ã€‚å½“ä½ å¯¼å…¥å¤–éƒ¨æ¡†æ¶æ—¶ï¼Œè¯·ç¡®ä¿ä½ è¦å¯¼å…¥çš„æ¡†æ¶çš„ â€œDefines Moduleâ€ æ„å»ºè®¾ç½®è®¾ç½®ä¸º â€œYesâ€ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•å°†æ¡†æ¶å¯¼å…¥åˆ°ä¸åŒ Target ä¸­çš„ä»»ä½• Swift æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> FrameworkName</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•å°†æ¡†æ¶å¯¼å…¥åˆ°ä¸åŒ Target ä¸­çš„ä»»ä½• Objective-C .m æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@import</span> FrameworkName;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">Import into Swift</th>
<th style="text-align:center">Import into Objective-C</th>
</tr>
</thead>
<tbody>
<tr>
<td>Any language framework</td>
<td style="text-align:center"><code>import FrameworkName</code></td>
<td style="text-align:center"><code>@import FrameworkName;</code></td>
</tr>
</tbody>
</table>
<h3 id="ä»-Objective-C-ä½¿ç”¨-Swift"><a href="#ä»-Objective-C-ä½¿ç”¨-Swift" class="headerlink" title=" ä» Objective-C ä½¿ç”¨ Swift"></a><a id="Using_Swift_from_Objective-C"></a> ä» Objective-C ä½¿ç”¨ Swift</h3><p>ä¸€æ—¦å°† Swift ä»£ç å¯¼å…¥åˆ° Objective-C ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨å¸¸è§„çš„ Objective-C è¯­æ³•æ¥å¤„ç† Swift ç±»ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MySwiftClass *swiftObject = [[MySwiftClass alloc] init];</div><div class="line">[swiftObject swiftMethod];</div></pre></td></tr></table></figure>
<p>Swift ç±»å¿…é¡»æ˜¯ Objective-C ç±»çš„å­ç±»ï¼ˆdescendantï¼‰æ‰èƒ½åœ¨ Objective-C ä¸­è®¿é—®å’Œä½¿ç”¨ã€‚æœ‰å…³å¯ä»¥ä» Objective-C è®¿é—®ä»€ä¹ˆä»¥åŠå¦‚ä½•å¯¼å…¥ Swift æ¥å£çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithObjective-CAPIs.html#//apple_ref/doc/uid/TP40014216-CH4-ID53" target="_blank" rel="external">Swift ç±»å‹å…¼å®¹æ€§</a>ã€‚</p>
<h4 id="åœ¨-Objective-C-å¤´æ–‡ä»¶ä¸­å¼•ç”¨-Swift-ç±»æˆ–åè®®"><a href="#åœ¨-Objective-C-å¤´æ–‡ä»¶ä¸­å¼•ç”¨-Swift-ç±»æˆ–åè®®" class="headerlink" title="åœ¨ Objective-C å¤´æ–‡ä»¶ä¸­å¼•ç”¨ Swift ç±»æˆ–åè®®"></a>åœ¨ Objective-C å¤´æ–‡ä»¶ä¸­å¼•ç”¨ Swift ç±»æˆ–åè®®</h4><p>å½“ä½ çš„ä»£ç å¼•ç”¨æ¥è‡ªä¸åŒæ¨¡å—çš„ Swift ç±»æˆ–åè®®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@import</code> å°† Swift æ¨¡å—å¯¼å…¥åˆ° Objective-C å¤´æ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œä¸ºé¿å…å¾ªç¯å¼•ç”¨ï¼Œè¯·å‹¿å°†åŒä¸€æ¨¡å—ä¸­çš„ Swift ä»£ç å¯¼å…¥åˆ° Objective-C æ ‡å¤´ï¼ˆ.hï¼‰æ–‡ä»¶ä¸­ã€‚ç›¸åï¼Œä½ å¯ä»¥å‰å‘å£°æ˜ Swift ç±»æˆ–åè®®ä»¥åœ¨ Objective-C ç•Œé¢ä¸­å¼•ç”¨å®ƒã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MyObjcClass.h</span></div><div class="line"><span class="class"><span class="keyword">@class</span> <span class="title">MySwiftClass</span>;</span></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">MySwiftProtocol</span>;</span></div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyObjcClass</span> : <span class="title">NSObject</span></span></div><div class="line">- (MySwiftClass *)returnSwiftClassInstance;</div><div class="line">- (<span class="keyword">id</span> &lt;MySwiftProtocol&gt;)returnInstanceAdoptingSwiftProtocol;</div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>Swift ç±»å’Œåè®®çš„å‰å‘å£°æ˜åªèƒ½ç”¨ä½œæ–¹æ³•å’Œå±æ€§å£°æ˜çš„ç±»å‹ã€‚</p>
<h4 id="å£°æ˜å¯ä»¥è¢«-Objective-C-ç±»é‡‡ç”¨çš„-Swift-åè®®"><a href="#å£°æ˜å¯ä»¥è¢«-Objective-C-ç±»é‡‡ç”¨çš„-Swift-åè®®" class="headerlink" title="å£°æ˜å¯ä»¥è¢« Objective-C ç±»é‡‡ç”¨çš„ Swift åè®®"></a>å£°æ˜å¯ä»¥è¢« Objective-C ç±»é‡‡ç”¨çš„ Swift åè®®</h4><p>è¦åˆ›å»ºä¸€ä¸ª Objective-C ç±»å¯ä»¥é‡‡ç”¨çš„ Swift åè®®ï¼Œè¯·ä½¿ç”¨ <code>@objc</code> å±æ€§æ ‡è®°åè®®å£°æ˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@objc</span> <span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">MySwiftProtocol</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">func</span> <span class="title">requiredMethod</span><span class="params">()</span></span></div><div class="line">	 </div><div class="line">	<span class="meta">@objc</span> <span class="keyword">optional</span> <span class="function"><span class="keyword">func</span> <span class="title">optionalMethod</span><span class="params">()</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åè®®å£°æ˜ Objective-C ç±»å¿…é¡»å®ç°çš„æ‰€æœ‰åˆå§‹åŒ–æ–¹æ³•ï¼Œå±æ€§ï¼Œä¸‹æ ‡å’Œæ–¹æ³•ä»¥ç¬¦åˆåè®®ã€‚ä»»ä½•å¯é€‰çš„åè®®è¦æ±‚éƒ½å¿…é¡»ç”¨ <code>@objc</code> å±æ€§æ ‡è®°ï¼Œå¹¶å…·æœ‰å¯é€‰çš„ä¿®é¥°ç¬¦ã€‚</p>
<p>å¦‚æœä½ éœ€è¦åœ¨æ»¡è¶³ Swift åè®®è¦æ±‚çš„ Objective-C ä¸­å£°æ˜å¼±å±æ€§ï¼Œè¯·ä½¿ç”¨å¼±ä¿®é¥°ç¬¦æ ‡è®° Swift å±æ€§éœ€æ±‚ã€‚è¯·æ³¨æ„ï¼Œåº”ç”¨å¼±ä¿®é¥°ç¬¦å¯¹é‡‡ç”¨è¯¥åè®®çš„ Swift ç±»å‹æ²¡æœ‰å½±å“ã€‚</p>
<h4 id="åœ¨-Objective-C-å®ç°ä¸­é‡‡ç”¨-Swift-åè®®"><a href="#åœ¨-Objective-C-å®ç°ä¸­é‡‡ç”¨-Swift-åè®®" class="headerlink" title="åœ¨ Objective-C å®ç°ä¸­é‡‡ç”¨ Swift åè®®"></a>åœ¨ Objective-C å®ç°ä¸­é‡‡ç”¨ Swift åè®®</h4><p>Objective-C ç±»å¯ä»¥é€šè¿‡å¯¼å…¥ç”± Xcode ç”Ÿæˆçš„ Swift ä»£ç å¤´å¹¶ä½¿ç”¨ç±»æ‰©å±•æ¥åœ¨å…¶å®ç°ï¼ˆ.mï¼‰æ–‡ä»¶ä¸­é‡‡ç”¨ Swift åè®®ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MyObjcClass.m</span></div><div class="line"><span class="meta">#import <span class="meta-string">"ProductModuleName-Swift.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyObjcClass</span> () &lt;<span class="title">MySwiftProtocol</span>&gt;</span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyObjcClass</span></span></div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h4 id="å£°æ˜å¯ä»¥åœ¨-Objective-C-ä¸­ä½¿ç”¨çš„-Swift-é”™è¯¯ç±»å‹"><a href="#å£°æ˜å¯ä»¥åœ¨-Objective-C-ä¸­ä½¿ç”¨çš„-Swift-é”™è¯¯ç±»å‹" class="headerlink" title="å£°æ˜å¯ä»¥åœ¨ Objective-C ä¸­ä½¿ç”¨çš„ Swift é”™è¯¯ç±»å‹"></a>å£°æ˜å¯ä»¥åœ¨ Objective-C ä¸­ä½¿ç”¨çš„ Swift é”™è¯¯ç±»å‹</h4><p>ç¬¦åˆ Error åè®®å¹¶ä½¿ç”¨ <code>@objc</code> å±æ€§å£°æ˜çš„ Swift æšä¸¾äº§ç”Ÿä¸€ä¸ª <code>NS_ENUM</code> å£°æ˜ï¼Œä»¥åŠä¸€ä¸ª <code>NSString</code> å¸¸é‡ï¼Œç”¨äºç”Ÿæˆå¤´æ–‡ä»¶ä¸­ç›¸åº”çš„é”™è¯¯åŸŸã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸‹é¢çš„ Swift æšä¸¾å£°æ˜ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@objc</span> <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">CustomError</span>: <span class="title">Int</span>, <span class="title">Error</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> a, b, <span class="built_in">c</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯ç”Ÿæˆçš„å¤´æ–‡ä»¶ä¸­ç›¸åº”çš„ Objective-C å£°æ˜ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Project-Swift.h</span></div><div class="line"><span class="keyword">typedef</span> SWIFT_ENUM(<span class="built_in">NSInteger</span>, CustomError) &#123;</div><div class="line">	CustomErrorA = <span class="number">0</span>,</div><div class="line">	CustomErrorB = <span class="number">1</span>,</div><div class="line">	CustomErrorC = <span class="number">2</span>,</div><div class="line">&#125;;</div><div class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> CustomErrorDomain = <span class="string">@"Project.CustomError"</span>;</div></pre></td></tr></table></figure>
<h3 id="è¦†ç›–-Objective-C-æ¥å£çš„-Swift-åç§°"><a href="#è¦†ç›–-Objective-C-æ¥å£çš„-Swift-åç§°" class="headerlink" title="è¦†ç›– Objective-C æ¥å£çš„ Swift åç§°"></a>è¦†ç›– Objective-C æ¥å£çš„ Swift åç§°</h3><p>Swift ç¼–è¯‘å™¨è‡ªåŠ¨å¯¼å…¥ Objective-C ä»£ç ä½œä¸ºä¼ ç»Ÿçš„ Swift ä»£ç ã€‚å®ƒå¯¼å…¥ Objective-C ç±»å·¥å‚æ–¹æ³•ä½œä¸º Swift åˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸” Objective-C æšä¸¾æ¡ˆä¾‹æˆªæ–­äº†åç§°ã€‚</p>
<p>ä»£ç ä¸­å¯èƒ½å­˜åœ¨ä¸è‡ªåŠ¨å¤„ç†çš„è¾¹ç•Œæƒ…å†µã€‚å¦‚æœéœ€è¦æ›´æ”¹ç”± Swift å¯¼å…¥çš„ Objective-C æ–¹æ³•åç§°ï¼Œæšä¸¾å¤§å°æˆ–é€‰é¡¹é›†å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>NS_SWIFT_NAME</code> å®æ¥è‡ªå®šä¹‰å£°æ˜çš„å¯¼å…¥æ–¹å¼ã€‚</p>
<h4 id="ç±»å·¥å‚æ–¹æ³•"><a href="#ç±»å·¥å‚æ–¹æ³•" class="headerlink" title="ç±»å·¥å‚æ–¹æ³•"></a>ç±»å·¥å‚æ–¹æ³•</h4><p>å¦‚æœ Swift ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«ç±»å·¥å‚æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>NS_SWIFT_NAME</code> å®ï¼Œä¼ é€’åˆå§‹åŒ–ç¨‹åºçš„ Swift ç­¾åä»¥ä½¿å…¶æ­£ç¡®å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">instancetype</span>)recordWithRPM:(<span class="built_in">NSUInteger</span>)RPM <span class="built_in">NS_SWIFT_NAME</span>(init(rpm:));</div></pre></td></tr></table></figure>
<p>å¦‚æœSwiftç¼–è¯‘å™¨é”™è¯¯åœ°å°†æ–¹æ³•æ ‡è¯†ä¸ºç±»å·¥å‚æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>NS_SWIFT_NAME</code> å®ï¼Œå¹¶ä¼ é€’è¯¥æ–¹æ³•çš„ Swift ç­¾åä»¥ä½¿å…¶æ­£ç¡®å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">id</span>)recordWithQuality:(<span class="keyword">double</span>)quality <span class="built_in">NS_SWIFT_NAME</span>(record(quality:));</div></pre></td></tr></table></figure>
<h4 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwift é€šè¿‡æˆªæ–­æšä¸¾å€¼åç§°å‰ç¼€æ¥å¯¼å…¥æšä¸¾ã€‚è¦è‡ªå®šä¹‰æšä¸¾å¤§å°å†™çš„åç§°ï¼Œå¯ä»¥ä½¿ç”¨ <code>NS_SWIFT_NAME</code> å®æ¥ä¼ é€’ Swift æšä¸¾å¤§å°å†™åç§°ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, ABCRecordSide) &#123;</div><div class="line">	ABCRecordSideA,</div><div class="line">	ABCRecordSideB <span class="built_in">NS_SWIFT_NAME</span>(flipSide),</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="æå–-Objective-C-å£°æ˜"><a href="#æå–-Objective-C-å£°æ˜" class="headerlink" title="æå– Objective-C å£°æ˜"></a>æå– Objective-C å£°æ˜</h3><p>ä½ å¯ä»¥åœ¨ Objective-C æ–¹æ³•å£°æ˜ä¸­ä½¿ç”¨ <code>NS_REFINED_FOR_SWIFT</code> å®ï¼Œä»¥åœ¨æ‰©å±•ä¸­æä¾›æ”¹è¿›çš„ Swift æ¥å£ï¼ŒåŒæ—¶ä¿æŒåŸå§‹å®ç°å¯ä»ç²¾ç¡®æ¥å£è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡é’ˆå‚æ•°çš„ Objective-C æ–¹æ³•å¯ä»¥åœ¨ Swift ä¸­è¿›è¡Œä¼˜åŒ–ï¼Œä»¥è¿”å›å€¼çš„å…ƒç»„ã€‚</p>
<ul>
<li>åˆå§‹åŒ–æ–¹æ³•ç”± Swift ç”¨åŒä¸‹åˆ’çº¿ï¼ˆ__ï¼‰å¯¼å…¥åˆ°å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°æ ‡ç­¾ã€‚</li>
<li>å¦‚æœ getter æˆ– setter æ–¹æ³•è¢«æ ‡è®°ä¸º <code>NS_REFINED_FOR_SWIFT</code>ï¼Œé‚£ä¹ˆå¯¹è±¡ä¸‹æ ‡æ–¹æ³•å°†ä½œä¸ºå¸¦æœ‰åŒä¸‹åˆ’çº¿ï¼ˆ__ï¼‰çš„æ–¹æ³•ç”± Swift å¯¼å…¥ï¼Œè€Œä¸æ˜¯ Swift ä¸‹æ ‡ã€‚</li>
<li>å…¶ä»–æ–¹æ³•ä½¿ç”¨åŒä¸‹åˆ’çº¿ï¼ˆ__ï¼‰å¯¼å…¥å…¶åŸºæœ¬åç§°ã€‚</li>
</ul>
<p>é‰´äºä»¥ä¸‹ Objective-C å£°æ˜ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Color</span> : <span class="title">NSObject</span></span></div><div class="line"> </div><div class="line">- (<span class="keyword">void</span>)getRed:(<span class="keyword">nullable</span> <span class="built_in">CGFloat</span> *)red</div><div class="line">	 green:(<span class="keyword">nullable</span> <span class="built_in">CGFloat</span> *)green</div><div class="line">	  blue:(<span class="keyword">nullable</span> <span class="built_in">CGFloat</span> *)blue</div><div class="line">	 alpha:(<span class="keyword">nullable</span> <span class="built_in">CGFloat</span> *)alpha <span class="built_in">NS_REFINED_FOR_SWIFT</span>;</div><div class="line"> </div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åƒè¿™æ ·åœ¨ä¸€ä¸ªæ‰©å±•ä¸­æä¾›ä¸€ä¸ªç²¾è‡´çš„ Swift æ¥å£ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Color</span> </span>&#123;</div><div class="line">   <span class="keyword">var</span> <span class="type">RGBA</span>: (red: <span class="type">CGFloat</span>, green: <span class="type">CGFloat</span>, blue: <span class="type">CGFloat</span>, alpha: <span class="type">CGFloat</span>) &#123;</div><div class="line">	   <span class="keyword">var</span> r: <span class="type">CGFloat</span> = <span class="number">0.0</span></div><div class="line">	   <span class="keyword">var</span> g: <span class="type">CGFloat</span> = <span class="number">0.0</span></div><div class="line">	   <span class="keyword">var</span> b: <span class="type">CGFloat</span> = <span class="number">0.0</span></div><div class="line">	   <span class="keyword">var</span> a: <span class="type">CGFloat</span> = <span class="number">0.0</span></div><div class="line">	   __getRed(red: &amp;r, green: &amp;g, blue: &amp;b, alpha: &amp;a)</div><div class="line">	   <span class="keyword">return</span> (red: r, green: g, blue: b, alpha: a)</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="åœ¨-Swift-ä¸­ä½¿-Objective-C-æ¥å£ä¸å¯ç”¨"><a href="#åœ¨-Swift-ä¸­ä½¿-Objective-C-æ¥å£ä¸å¯ç”¨" class="headerlink" title="åœ¨ Swift ä¸­ä½¿ Objective-C æ¥å£ä¸å¯ç”¨"></a>åœ¨ Swift ä¸­ä½¿ Objective-C æ¥å£ä¸å¯ç”¨</h3><p>ä¸€äº› Objective-C æ¥å£å¯èƒ½ä¸é€‚åˆæˆ–ä¸éœ€è¦ä½œä¸º Swift æ¥å£å…¬å¼€ã€‚è¦é˜²æ­¢ Swift å¯¼å…¥ Objective-C å£°æ˜ï¼Œè¯·ä½¿ç”¨ <code>NS_SWIFT_UNAVAILABLE</code> å®ï¼Œå¹¶å°†æ¶ˆæ¯ä¼ é€’ç»™ API è°ƒç”¨è€…ä»¥ä½¿å…¶å¯ä½¿ç”¨å¯èƒ½å­˜åœ¨çš„å…¶å®ƒæ›¿ä»£æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ª Objective-C ç±»æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„åˆå§‹å€¼è®¾å®šé¡¹ï¼Œå®ƒä¸ºé”® - å€¼å¯¹æä¾›å¯å˜å‚æ•°ï¼Œå¯èƒ½ä¼šå»ºè®® Swift ä½¿ç”¨è€…ä½¿ç”¨å­—å…¸æ–‡å­—ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">instancetype</span>)collectionWithValues:(<span class="built_in">NSArray</span> *)values forKeys:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSCopying</span>&gt; *)keys <span class="built_in">NS_SWIFT_UNAVAILABLE</span>(<span class="string">"Use a dictionary literal instead"</span>);</div></pre></td></tr></table></figure>
<p>è¯•å›¾ä» Swift ä»£ç ä¸­è°ƒç”¨ <code>+ collectionWithValues:forKeys:</code> æ–¹æ³•ä¼šå¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯ã€‚</p>
<p>è¦åœ¨ç¼–è¯‘æ—¶åœ¨ Swift å’Œ Objective-C ä¸­ä½¿ Objective-C å£°æ˜ä¸å¯ç”¨ï¼Œè¯·ä½¿ç”¨ <code>NS_UNAVAILABLE</code> å®ã€‚è¯¥å®çš„è¡Œä¸ºä¸ <code>NS_SWIFT_UNAVAILABLE</code> å®ç±»ä¼¼ï¼Œåªæ˜¯å®ƒçœç•¥äº†å¯å®šåˆ¶çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶ä¸”å®ƒé™åˆ¶äº† Objective-C ä»£ç ä¸­å¯¹å£°æ˜çš„ç¼–è¯‘æ—¶è®¿é—®ã€‚</p>
<h3 id="å°†å¯ç”¨æ€§ä¿¡æ¯æ·»åŠ åˆ°-Objective-C-API"><a href="#å°†å¯ç”¨æ€§ä¿¡æ¯æ·»åŠ åˆ°-Objective-C-API" class="headerlink" title="å°†å¯ç”¨æ€§ä¿¡æ¯æ·»åŠ åˆ° Objective-C API"></a>å°†å¯ç”¨æ€§ä¿¡æ¯æ·»åŠ åˆ° Objective-C API</h3><p>åœ¨ Swift ä¸­ï¼Œå¯ä»¥ç”¨ <code>@available</code> å±æ€§æ¥æ§åˆ¶åœ¨ä¸ºç‰¹å®šç›®æ ‡å¹³å°æ„å»ºåº”ç”¨ç¨‹åºæ—¶æ˜¯å¦å¯ä»¥ä½¿ç”¨ã€‚åŒæ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨å¯ç”¨æ¡ä»¶ <code>#available</code> æ ¹æ®æ‰€éœ€çš„å¹³å°å’Œç‰ˆæœ¬æ¡ä»¶æœ‰æ¡ä»¶åœ°æ‰§è¡Œä»£ç ã€‚</p>
<p>Objective-C ä¸­æä¾›äº†ä¸¤ç§å¯ç”¨æ€§è¯´æ˜ç¬¦ï¼Œä½¿ç”¨ä»¥ä¸‹ç¤ºä¾‹ä¸­æ˜¾ç¤ºçš„ç›¸åº”è¯­æ³•ã€‚</p>
<p>æ­¤ç¤ºä¾‹æ˜¾ç¤º Swift ä¸­çš„å£°æ˜ä¸­ä½¿ç”¨çš„å¯ç”¨æ€§ä¿¡æ¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@available</span>(iOS <span class="number">11</span>, macOS <span class="number">10.13</span>, *)</div><div class="line">	<span class="function"><span class="keyword">func</span> <span class="title">newMethod</span><span class="params">()</span></span> &#123;</div><div class="line">	<span class="comment">// Use iOS 11 APIs.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯ Objective-C ä¸­æ·»åŠ ç›¸åŒå¯ç”¨æ€§ä¿¡æ¯çš„æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyViewController</span> : <span class="title">UIViewController</span></span></div><div class="line">- (<span class="keyword">void</span>)newMethod API_AVAILABLE(ios(<span class="number">11</span>), macosx(<span class="number">10.13</span>));</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº† Swift æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨çš„å¯ç”¨æ€§ä¿¡æ¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> #available(iOS <span class="number">11</span>, *) &#123;</div><div class="line">	<span class="comment">// Use iOS 11 APIs.</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="comment">// Alternative code for earlier versions of iOS.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯ Objective-C ä¸­å¦‚ä½•ä½¿ç”¨ç›¸åŒçš„å¯ç”¨æ€§ä¿¡æ¯ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (@available(iOS <span class="number">11</span>, *)) &#123;</div><div class="line">	<span class="comment">// Use iOS 11 APIs.</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="comment">// Alternative code for earlier versions of iOS.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ‰å…³æŒ‡å®šå¹³å°å¯ç”¨æ€§çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097" target="_blank" rel="external">Swift ç¼–ç¨‹è¯­è¨€ï¼ˆSwift 4.1ï¼‰</a>ä¸­çš„<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/Attributes.html#//apple_ref/doc/uid/TP40014097-CH35-ID348" target="_blank" rel="external">å£°æ˜å±æ€§</a>ã€‚</p>
<h3 id="å‘½åä½ çš„äº§å“æ¨¡å—"><a href="#å‘½åä½ çš„äº§å“æ¨¡å—" class="headerlink" title=" å‘½åä½ çš„äº§å“æ¨¡å—"></a><a id="Naming_Your_Product_Module"></a> å‘½åä½ çš„äº§å“æ¨¡å—</h3><p>Swift ä»£ç ç”Ÿæˆçš„ Xcode ç”Ÿæˆå¤´æ–‡ä»¶çš„åç§°ä»¥åŠ Xcode ä¸ºä½ åˆ›å»ºçš„ Objective-C æ¡¥æ¥å¤´åç§°æ˜¯ä»ä½ çš„äº§å“æ¨¡å—åç§°ä¸­ç”Ÿæˆçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„äº§å“æ¨¡å—åç§°ä¸ä½ çš„äº§å“åç§°ç›¸åŒã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çš„äº§å“åç§°åŒ…å«ä»»ä½•éå­—æ¯æ•°å­—å­—ç¬¦ï¼ˆå¦‚å¥ç‚¹ï¼ˆ.ï¼‰ï¼‰ï¼Œåˆ™å®ƒä»¬å°†æ›¿æ¢ä¸ºäº§å“æ¨¡å—åç§°ä¸­çš„ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€‚å¦‚æœåç§°ä»¥æ•°å­—å¼€å¤´ï¼Œåˆ™ç¬¬ä¸€ä¸ªæ•°å­—å°†æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ã€‚</p>
<p>ä½ è¿˜å¯ä»¥ä¸ºäº§å“æ¨¡å—åç§°æä¾›è‡ªå®šä¹‰åç§°ï¼ŒXcode å°†åœ¨å‘½åæ¡¥æ¥å’Œç”Ÿæˆçš„æ ‡å¤´æ—¶ä½¿ç”¨æ­¤åç§°ã€‚ä¸ºæ­¤ï¼Œè¯·æ›´æ”¹ â€œProduct Module Nameâ€ æ„å»ºè®¾ç½®ã€‚</p>
<blockquote>
<p>æ³¨æ„<br>ä½ æ— æ³•è¦†ç›–æ¡†æ¶çš„äº§å“æ¨¡å—åç§°ã€‚</p>
</blockquote>
<h3 id="å¸¸è§é—®é¢˜è§£ç­”å’Œæé†’"><a href="#å¸¸è§é—®é¢˜è§£ç­”å’Œæé†’" class="headerlink" title="å¸¸è§é—®é¢˜è§£ç­”å’Œæé†’"></a>å¸¸è§é—®é¢˜è§£ç­”å’Œæé†’</h3><ul>
<li>å°†ä½ çš„ Swift å’Œ Objective-C æ–‡ä»¶è§†ä¸ºåŒä¸€ä»£ç é›†åˆï¼Œå¹¶æ³¨æ„å‘½åå†²çªã€‚</li>
<li>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨æ¡†æ¶ï¼Œè¯·ç¡®ä¿æ‰“åŒ…ä¸‹çš„ â€œDefines Moduleâ€ï¼ˆDEFINES_MODULEï¼‰æ„å»ºè®¾ç½®è®¾ç½®ä¸º â€œYesâ€ã€‚</li>
<li>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Objective-C æ¡¥æ¥å¤´ï¼Œè¯·ç¡®ä¿ Swift ç¼–è¯‘å™¨ - ä»£ç ç”Ÿæˆä¸‹çš„ Objective-C æ¡¥æ¥å¤´ï¼ˆSWIFT_OBJC_BRIDGING_HEADERï¼‰ç¼–è¯‘è®¾ç½®è®¾ç½®ä¸ºç›¸å¯¹äºä½ çš„é¡¹ç›®çš„æ¡¥æ¥å¤´æ–‡ä»¶çš„è·¯å¾„ï¼ˆä¾‹å¦‚ï¼Œâ€MyAppçš„/MyAppçš„æ¡¥æ¥-Header.hâ€ï¼‰ã€‚</li>
<li>åœ¨ä¸ºä½ çš„ Swift ä»£ç å‘½å Objective-C æ¡¥æ¥æ ‡é¢˜å’Œç”Ÿæˆçš„æ ‡é¢˜æ—¶ï¼ŒXcode ä½¿ç”¨ä½ çš„äº§å“æ¨¡å—åç§°ï¼ˆPRODUCT_MODULE_NAMEï¼‰ -ä¸æ˜¯ä½ çš„ç›®æ ‡åç§°ï¼ˆTARGET_NAMEï¼‰ã€‚æœ‰å…³äº§å“æ¨¡å—å‘½åçš„ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="#Naming_Your_Product_Module">å‘½åä½ çš„äº§å“æ¨¡å—</a>ã€‚</li>
<li>è¦åœ¨ Objective-C ä¸­å¯è®¿é—®å’Œä½¿ç”¨ï¼ŒSwift ç±»å¿…é¡»æ˜¯Objective-C ç±»çš„å­ç±»ï¼ˆdescendantï¼‰ï¼Œæˆ–è€…å¿…é¡»æ ‡è®°ä¸º <code>@objc</code>ã€‚</li>
<li>å½“ä½ å°† Swift ä»£ç å¯¼å…¥åˆ° Objective-C æ—¶ï¼Œè¯·è®°ä½ Objective-C å°†æ— æ³•ç¿»è¯‘ç‰¹å®šäº Swift çš„æŸäº›åŠŸèƒ½ã€‚æœ‰å…³åˆ—è¡¨ï¼Œè¯·å‚é˜…<a href="#Using_Swift_from_Objective-C">ä» Objective-C ä½¿ç”¨ Swift</a>ã€‚</li>
<li>å¦‚æœåœ¨ Swift ä»£ç ä¸­ä½¿ç”¨è‡ªå·±çš„ Objective-C ç±»å‹ï¼Œè¯·ç¡®ä¿åœ¨å°† Swift ç”Ÿæˆçš„å¤´æ–‡ä»¶å¯¼å…¥è¦ä½¿ç”¨ Swift ä»£ç çš„ Objective-C .m æ–‡ä»¶ä¸­ä¹‹å‰ï¼Œä¸ºè¿™äº›ç±»å‹å¯¼å…¥ Objective-C å¤´æ–‡ä»¶ã€‚</li>
<li>ä½¿ç”¨ <code>private</code> æˆ– <code>fileprivate</code> ä¿®é¥°ç¬¦æ ‡è®°çš„ Swift å£°æ˜ä¸ä¼šå‡ºç°åœ¨ç”Ÿæˆçš„å¤´æ–‡ä»¶ä¸­ã€‚é™¤éæ˜ç¡®ç”¨ <code>@IBAction</code>ï¼Œ<code>@IBOutlet</code> æˆ– <code>@objc</code> æ ‡è®°ç§æœ‰å£°æ˜ï¼Œå¦åˆ™å®ƒä»¬ä¸ä¼šæš´éœ²ç»™ Objective-Cã€‚</li>
<li>å¯¹äºåº”ç”¨ç¨‹åº Targetï¼Œå¦‚æœåº”ç”¨ç¨‹åº Target å…·æœ‰ Objective-C æ¡¥æ¥æ ‡å¤´ï¼Œåˆ™ä½¿ç”¨ <code>internal</code> ä¿®é¥°ç¬¦æ ‡è®°çš„å£°æ˜å°†å‡ºç°åœ¨ç”Ÿæˆçš„æ ‡å¤´ä¸­ã€‚</li>
<li>å¯¹äºæ¡†æ¶ Targetï¼Œåªæœ‰å…·æœ‰ <code>public</code> æˆ– <code>open</code> ä¿®é¥°ç¬¦çš„å£°æ˜å‡ºç°åœ¨ç”Ÿæˆçš„å¤´æ–‡ä»¶ä¸­ã€‚åªè¦å®ƒä»¬åœ¨ç»§æ‰¿è‡ª Objective-C ç±»çš„ç±»ä¸­å£°æ˜ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨æ¡†æ¶çš„ Objective-C éƒ¨åˆ†ç”± <code>internal</code> ä¿®é¥°ç¬¦æ ‡è®°çš„ Swift æ–¹æ³•å’Œå±æ€§ã€‚æœ‰å…³è®¿é—®çº§åˆ«ä¿®é¥°ç¬¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097" target="_blank" rel="external">Swift ç¼–ç¨‹è¯­è¨€ï¼ˆSwift 4.1ï¼‰</a>ä¸­çš„<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/AccessControl.html#//apple_ref/doc/uid/TP40014097-CH41" target="_blank" rel="external">è®¿é—®æ§åˆ¶</a>ã€‚</li>
</ul>
<h4 id="è¯‘è‡ªè‹¹æœå®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼šSwift-and-Objective-C-in-the-Same-Project"><a href="#è¯‘è‡ªè‹¹æœå®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼šSwift-and-Objective-C-in-the-Same-Project" class="headerlink" title="è¯‘è‡ªè‹¹æœå®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼šSwift and Objective-C in the Same Project"></a><strong><em>è¯‘è‡ªè‹¹æœå®˜æ–¹ç¼–ç¨‹æŒ‡å—ï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html#//apple_ref/doc/uid/TP40014216-CH10-ID136" target="_blank" rel="external">Swift and Objective-C in the Same Project</a></em></strong></h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20171002-00-blog.png?imageView/2/w/600/q/80&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Swift ä¸ Objective-C çš„å…¼å®¹æ€§ä½¿ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Swift" scheme="http://yoursite.com/categories/iOS/Swift/"/>
    
    
      <category term="Objective-C" scheme="http://yoursite.com/tags/Objective-C/"/>
    
      <category term="Swift" scheme="http://yoursite.com/tags/Swift/"/>
    
      <category term="æ··ç¼–" scheme="http://yoursite.com/tags/%E6%B7%B7%E7%BC%96/"/>
    
  </entry>
  
  <entry>
    <title>ä¸Šä¼ è‡ªå·±çš„ CocoaPods ä¾èµ–åº“</title>
    <link href="http://yoursite.com/2017/09/03/cocoaPods-notes/"/>
    <id>http://yoursite.com/2017/09/03/cocoaPods-notes/</id>
    <published>2017-09-03T01:19:57.000Z</published>
    <updated>2017-09-24T13:56:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-00-blog.png" alt="(å®˜æ–¹)ä¾èµ–åŒ…ä¸Šä¼ æµç¨‹"></p>
<p>æœ€è¿‘å†™çš„å·¥å…·ç±» <a href="https://github.com/Kejiasir/YYRSACrypto" target="_blank" rel="external">YYRSACrypto</a> åœ¨ä¸Šä¼ åˆ° CocoaPods ç®¡ç†çš„æ—¶å€™é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œåœ¨è¿™è®°å½•ä¸‹è§£å†³çš„è¿‡ç¨‹ã€‚<br>ç›¸ä¿¡å¯¹äº iOS å¼€å‘è€…æ¥è¯´ <a href="https://cocoapods.org/" target="_blank" rel="external">CocoaPods</a> å¹¶ä¸é™Œç”Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªç®¡ç† Objective-C å’Œ Swift é¡¹ç›®ç¬¬ä¸‰æ–¹æ¡†æ¶æˆ–ç»„ä»¶éå¸¸æ–¹ä¾¿çš„å·¥å…·ï¼Œä½¿ç”¨ CocoaPods ç®¡ç†å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆè½»æ¾çš„å¯¼å…¥ç¬¬ä¸‰æ–¹æ¡†æ¶çš„æºç åˆ°é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è‡ªåŠ¨ä¸ºé¡¹ç›®æ·»åŠ ä¸€äº›å¿…è¦çš„é¢å¤–é…ç½®ï¼Œè€Œå½“æ¡†æ¶æ›´æ–°ç‰ˆæœ¬æ—¶ä½¿ç”¨ <code>pod update</code> å‘½ä»¤ä¾¿å¯ä¸‹è½½æœ€æ–°çš„ä»£ç ï¼Œç®€ç›´ä¸è¦å¤ªå¥½ç”¨ã€‚æ‰€ä»¥ï¼Œæˆ‘çš„åŸåˆ™æ˜¯ï¼Œç¬¬ä¸‰æ–¹èƒ½ä½¿ç”¨ CocoaPods ç®¡ç†çš„ç»ä¸æ‰‹åŠ¨å¯¼å…¥ã€‚</p>
<p>å…³äº CocoaPods çš„å®‰è£…å°±ä¸è¯´äº†ï¼Œç½‘ä¸Šçš„èµ„æ–™å·²ç»å¾ˆå¤šï¼›è®²ä¸‹å¦‚ä½•ç¼–å†™è‡ªå·±é¡¹ç›®çš„ spec æ–‡ä»¶å§ï¼Œå½“ä½ å†™äº†ä¸€ä¸ªç»„ä»¶æˆ–è€…æ¡†æ¶æƒ³å¼€æºç»™åˆ«äººç”¨çš„æ—¶å€™ï¼Œç®€å•çš„ä¸Šä¼ åˆ° github ä»“åº“ç»™äººä¸‹è½½å°±å¯ä»¥äº†ï¼Œä½†å¦‚æœè¦åƒå…¶å®ƒï¼ˆæ¯”å¦‚ï¼šAFNetworkingï¼ŒSDWebImageï¼Œâ€¦ï¼‰æ¡†æ¶é‚£æ ·æä¾› CocoaPods çš„æ–¹å¼ç»™äººå®‰è£…è¯¥æ€ä¹ˆåšå‘¢ ï¼Ÿ æ¥ä¸‹æ¥å°±è¯´è¯´æ­¥éª¤ã€‚</p>
<h4 id="ä¸€ï¼šé¦–å…ˆåœ¨-GitHub-æ–°å»ºä¸€ä¸ª-Repository-å¹¶-Clone-åˆ°æœ¬åœ°ã€‚"><a href="#ä¸€ï¼šé¦–å…ˆåœ¨-GitHub-æ–°å»ºä¸€ä¸ª-Repository-å¹¶-Clone-åˆ°æœ¬åœ°ã€‚" class="headerlink" title="ä¸€ï¼šé¦–å…ˆåœ¨ GitHub æ–°å»ºä¸€ä¸ª Repository å¹¶ Clone åˆ°æœ¬åœ°ã€‚"></a>ä¸€ï¼šé¦–å…ˆåœ¨ GitHub æ–°å»ºä¸€ä¸ª Repository å¹¶ Clone åˆ°æœ¬åœ°ã€‚</h4><h4 id="äºŒï¼šåœ¨-Xcode-æ–°å»ºä¸€ä¸ªåŒåçš„-Project-åˆ°-Clone-çš„-Repository-æ–‡ä»¶å¤¹ä¸‹ã€‚"><a href="#äºŒï¼šåœ¨-Xcode-æ–°å»ºä¸€ä¸ªåŒåçš„-Project-åˆ°-Clone-çš„-Repository-æ–‡ä»¶å¤¹ä¸‹ã€‚" class="headerlink" title="äºŒï¼šåœ¨ Xcode æ–°å»ºä¸€ä¸ªåŒåçš„ Project åˆ° Clone çš„ Repository æ–‡ä»¶å¤¹ä¸‹ã€‚"></a>äºŒï¼šåœ¨ Xcode æ–°å»ºä¸€ä¸ªåŒåçš„ Project åˆ° Clone çš„ Repository æ–‡ä»¶å¤¹ä¸‹ã€‚</h4><h4 id="ä¸‰ï¼šå°†ä½ çš„æ¡†æ¶æºä»£ç å•ç‹¬åŒ…è£…åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–‡ä»¶å¤¹çš„åç§°å°±æ˜¯ä½ çš„æ¡†æ¶åç§°ã€‚"><a href="#ä¸‰ï¼šå°†ä½ çš„æ¡†æ¶æºä»£ç å•ç‹¬åŒ…è£…åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–‡ä»¶å¤¹çš„åç§°å°±æ˜¯ä½ çš„æ¡†æ¶åç§°ã€‚" class="headerlink" title="ä¸‰ï¼šå°†ä½ çš„æ¡†æ¶æºä»£ç å•ç‹¬åŒ…è£…åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–‡ä»¶å¤¹çš„åç§°å°±æ˜¯ä½ çš„æ¡†æ¶åç§°ã€‚"></a>ä¸‰ï¼šå°†ä½ çš„æ¡†æ¶æºä»£ç å•ç‹¬åŒ…è£…åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ–‡ä»¶å¤¹çš„åç§°å°±æ˜¯ä½ çš„æ¡†æ¶åç§°ã€‚</h4><p>cd åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨æ‰©å±•åä¸º <code>.podspec</code> çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># &lt;your_framework_name&gt; ä½ çš„æ¡†æ¶åç§°ï¼Œæ¯”å¦‚ YYRSACryptoã€‚</div><div class="line">$ pod spec create &lt;your_framework_name&gt;</div></pre></td></tr></table></figure>
<p>Tipsï¼š<code>.podspec</code> æ–‡ä»¶æœ€å¥½æ˜¯å’Œä½ çš„æ¡†æ¶æ–‡ä»¶å¤¹æ”¾åœ¨åŒçº§ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾æˆ‘çš„é¡¹ç›®ç¤ºä¾‹ï¼š</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-01-blog.png" alt=""></p>
<p>æ³¨æ„ï¼š<code>.podspec</code> æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€å®ƒè¿›è¡Œç›¸å…³çš„ä¿¡æ¯é…ç½®ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼–è¾‘å™¨æ‰“å¼€ï¼Œä½†ï¼åé¢éªŒè¯ spec æ–‡ä»¶çš„æ—¶å€™ä¼šå‘ç”Ÿä¸€äº›éå¸¸å¥‡æ€ªçš„é”™è¯¯å¯¼è‡´æ— æ³•éªŒè¯é€šè¿‡ã€‚<strong><em>æ‰€ä»¥ï¼Œå¼ºçƒˆå»ºè®®ï¼Œåœ¨ç¼–ç å®Œæˆåä¸€å¹¶ push åˆ° github ä¸Šå†è¿›è¡Œç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œå®Œäº‹å† pull ä¸‹æ¥ã€‚</em></strong></p>
<h4 id="å››ï¼šé…ç½®-podspec-æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«å¾ˆå¤šé…ç½®å­—æ®µå’Œè¯´æ˜ï¼Œå¯æŒ‰éœ€é…ç½®ï¼Œæ— ç”¨çš„å¯ä»¥åˆ é™¤ï¼Œä½†æœ‰äº›æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é¡¹ç›®é…ç½®ç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒå…¶å®ƒå¼€æºé¡¹ç›®çš„-podspec-æ–‡ä»¶æ¥å¡«å†™ã€‚"><a href="#å››ï¼šé…ç½®-podspec-æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«å¾ˆå¤šé…ç½®å­—æ®µå’Œè¯´æ˜ï¼Œå¯æŒ‰éœ€é…ç½®ï¼Œæ— ç”¨çš„å¯ä»¥åˆ é™¤ï¼Œä½†æœ‰äº›æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é¡¹ç›®é…ç½®ç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒå…¶å®ƒå¼€æºé¡¹ç›®çš„-podspec-æ–‡ä»¶æ¥å¡«å†™ã€‚" class="headerlink" title="å››ï¼šé…ç½® .podspec æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«å¾ˆå¤šé…ç½®å­—æ®µå’Œè¯´æ˜ï¼Œå¯æŒ‰éœ€é…ç½®ï¼Œæ— ç”¨çš„å¯ä»¥åˆ é™¤ï¼Œä½†æœ‰äº›æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é¡¹ç›®é…ç½®ç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒå…¶å®ƒå¼€æºé¡¹ç›®çš„ .podspec æ–‡ä»¶æ¥å¡«å†™ã€‚"></a>å››ï¼šé…ç½® <code>.podspec</code> æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«å¾ˆå¤šé…ç½®å­—æ®µå’Œè¯´æ˜ï¼Œå¯æŒ‰éœ€é…ç½®ï¼Œæ— ç”¨çš„å¯ä»¥åˆ é™¤ï¼Œä½†æœ‰äº›æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä¸‹é¢æ˜¯æˆ‘çš„é¡¹ç›®é…ç½®ç¤ºä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒå…¶å®ƒå¼€æºé¡¹ç›®çš„ <code>.podspec</code> æ–‡ä»¶æ¥å¡«å†™ã€‚</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Pod::Spec.new <span class="keyword">do</span> |s| </div><div class="line">  s.name         = <span class="string">"YYRSACrypto"</span> </div><div class="line">  s.version      = <span class="string">"0.0.1"</span> </div><div class="line">  s.summary      = <span class="string">"åŸºäº MIHCrypto å°è£…çš„ RSA åŠ å¯†è§£å¯†å·¥å…·ç±»."</span> </div><div class="line">  s.description  = &lt;&lt;-DESC </div><div class="line">                  åŸºäº MIHCrypto å°è£…çš„ RSA åŠ å¯†è§£å¯†å·¥å…·ç±», åŠ å¯†è§£å¯†, åªéœ€è¦ä¸€å¥ä»£ç å°±èƒ½å®ç°. </div><div class="line">                   DESC </div><div class="line">  s.homepage     = <span class="string">"https://github.com/Kejiasir/YYRSACrypto"</span> </div><div class="line">  s.license      = <span class="string">"MIT"</span> </div><div class="line">  s.author       = &#123; <span class="string">"Arvin"</span> =&gt; <span class="string">"yasir86@126.com"</span> &#125;  </div><div class="line">  s.platform     = :ios, <span class="string">"6.0"</span>  </div><div class="line">  s.source       = &#123; :git =&gt; <span class="string">"https://github.com/Kejiasir/YYRSACrypto.git"</span>, :tag =&gt; <span class="string">"#&#123;s.version&#125;"</span> &#125; </div><div class="line">  s.source_files = <span class="string">"YYRSACrypto"</span>, <span class="string">"YYRSACrypto/YYRSACrypto/*.&#123;h,m&#125;"</span>  </div><div class="line">  s.requires_arc = <span class="literal">true</span>  </div><div class="line">  s.dependency <span class="string">"MIHCrypto"</span>, <span class="string">"~&gt; 0.4.1"</span> </div><div class="line">  s.dependency <span class="string">"GTMBase64"</span>, <span class="string">"~&gt; 1.0.0"</span>  </div><div class="line">end</div></pre></td></tr></table></figure>
<p>ä¸€äº›å¿…è¦å­—æ®µçš„è¯´æ˜ï¼š</p>
<p><code>s.name</code>             åº“çš„åç§°ï¼›<br><code>s.summary</code>         åº“çš„ç®€è¦æè¿°ï¼›<br><code>s.version</code>         åº“æºä»£ç çš„ç‰ˆæœ¬ï¼›<br><code>s.homepage</code>         åº“çš„ä¸»é¡µï¼›<br><code>s.author</code>             åº“çš„ä½œè€…ï¼›<br><code>s.description</code>     åº“çš„å…¶å®ƒæè¿°ï¼›ï¼ˆéå¿…é¡»ï¼‰<br><code>s.license</code>         æ‰€é‡‡ç”¨çš„å¼€æºè®¸å¯åè®®ï¼›<br><code>s.platform</code>         åº“æ”¯æŒçš„ç³»ç»Ÿå¹³å°åŠæœ€ä½å…¼å®¹ç‰ˆæœ¬ï¼›<br><code>s.requires_arc</code> æ˜¯å¦ä½¿ç”¨ ARC, <code>true</code> è¡¨ç¤º YES, <code>flase</code> åˆ™è¡¨ç¤º NOï¼›<br><code>s.dependency</code>     å¦‚æœä½ çš„åº“éœ€è¦ä¾èµ–å…¶å®ƒçš„åº“ï¼Œå¡«å†™æ­¤å­—æ®µï¼Œä¸‹è½½çš„æ—¶å€™ä¼šä¸€å¹¶ä¸‹è½½è¿™ä¸ªå­—æ®µä¸­æ‰€å¡«å†™çš„åº“ï¼Œå¯ä»¥å¡«å†™å¤šä¸ªï¼›<br><code>s.source</code>             åº“æºä»£ç åœ°å€ï¼Œåé¢çš„ Tag æ˜¯æ¯æ›´æ–°ä¸€ä¸ª Release ç‰ˆæœ¬æ—¶çš„æ ‡ç­¾ï¼Œæ³¨æ„ï¼šæ¯ä¸ªç‰ˆæœ¬çš„ Tag éœ€è¦ä¸ <code>s.version</code> å£°æ˜çš„ä¸€è‡´ï¼›<br><code>s.source_files</code> æ˜¯åŒ…å«åº“æ‰€æœ‰æºä»£ç çš„ç›®å½•ï¼Œä»¥ä¸Šé¢çš„æ ¼å¼ä¸ºä¾‹ï¼Œå‰é¢çš„ <code>&quot;YYRSACrypto&quot;</code> å¯å†™å¯ä¸å†™ï¼Œåé¢çš„ <code>YYRSACrypto/YYRSACrypto/</code> æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œç›®å½•çš„å±‚çº§å…³ç³»ä¸€å®šè¦å’Œï¼ˆæœ¬åœ°åŠè¿œç¨‹ï¼‰ä»£ç åº“çš„ä¿æŒä¸€è‡´ï¼Œæœ€å <code>*.{h,m}</code> åˆ™æ˜¯ä¸€ä¸ªç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºåŒ¹é…è¿™ä¸ªç›®å½•ä¸‹æ‰€æœ‰ä»¥ <code>.h</code> å’Œ <code>.m</code> ä¸ºæ‰©å±•åçš„æ–‡ä»¶ã€‚</p>
<p><strong><em>æ³¨æ„ï¼š<code>s.source_files</code> å­—æ®µä¸€ç‚¹è¦å¡«å†™æ­£ç¡®è·¯å¾„ï¼Œå¦åˆ™éªŒè¯çš„æ—¶å€™ä¼šæŠ¥é”™æç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶</em></strong></p>
<hr>
<h4 id="PSï¼šå…ˆè¯´ä¸‹-git-æ‰“æ ‡ç­¾çš„å‘½ä»¤å§ï¼Œä¸€èˆ¬æäº¤ä¸€ä¸ª-Release-ç‰ˆæœ¬éƒ½ä¼šæ–°å»ºä¸€ä¸ª-Tagï¼Œæ‰€ä»¥ä¸Šé¢çš„-s-version-ç‰ˆæœ¬å·å³ä¸ºå½“å‰æœ€æ–°çš„-Tag-ç‰ˆæœ¬ã€‚"><a href="#PSï¼šå…ˆè¯´ä¸‹-git-æ‰“æ ‡ç­¾çš„å‘½ä»¤å§ï¼Œä¸€èˆ¬æäº¤ä¸€ä¸ª-Release-ç‰ˆæœ¬éƒ½ä¼šæ–°å»ºä¸€ä¸ª-Tagï¼Œæ‰€ä»¥ä¸Šé¢çš„-s-version-ç‰ˆæœ¬å·å³ä¸ºå½“å‰æœ€æ–°çš„-Tag-ç‰ˆæœ¬ã€‚" class="headerlink" title="PSï¼šå…ˆè¯´ä¸‹ git æ‰“æ ‡ç­¾çš„å‘½ä»¤å§ï¼Œä¸€èˆ¬æäº¤ä¸€ä¸ª Release ç‰ˆæœ¬éƒ½ä¼šæ–°å»ºä¸€ä¸ª Tagï¼Œæ‰€ä»¥ä¸Šé¢çš„ s.version ç‰ˆæœ¬å·å³ä¸ºå½“å‰æœ€æ–°çš„ Tag ç‰ˆæœ¬ã€‚"></a>PSï¼šå…ˆè¯´ä¸‹ git æ‰“æ ‡ç­¾çš„å‘½ä»¤å§ï¼Œä¸€èˆ¬æäº¤ä¸€ä¸ª Release ç‰ˆæœ¬éƒ½ä¼šæ–°å»ºä¸€ä¸ª Tagï¼Œæ‰€ä»¥ä¸Šé¢çš„ <code>s.version</code> ç‰ˆæœ¬å·å³ä¸ºå½“å‰æœ€æ–°çš„ Tag ç‰ˆæœ¬ã€‚</h4><p>å¸¸ç”¨çš„æ‰“æ ‡ç­¾æ–¹å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>ç¬¬ä¸€ï¼Œå«é™„æ³¨çš„æ ‡ç­¾</li>
<li>åˆ›å»ºä¸€ä¸ªå«é™„æ³¨ç±»å‹çš„æ ‡ç­¾éå¸¸ç®€å•ï¼Œç”¨ -a (å–annotatedçš„é¦–å­—æ¯) æŒ‡å®šæ ‡ç­¾åå­—å³å¯ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># -m åˆ™æŒ‡å®šäº†å¯¹åº”çš„æ ‡ç­¾è¯´æ˜ï¼Œgit ä¼šå°†æ­¤è¯´æ˜ä¸€åŒä¿å­˜åœ¨æ ‡ç­¾å¯¹è±¡ä¸­ï¼Œç±»ä¼¼ commit ä»£ç æ—¶é™„å¸¦çš„ -m æ—¥å¿—</div><div class="line">$ git tag -a 0.0.1 -m &apos;my version 0.0.1&apos;</div><div class="line"></div><div class="line"># ç”¨æ­¤å‘½ä»¤æŸ¥çœ‹ç›¸åº”æ ‡ç­¾çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶è¿åŒæ˜¾ç¤ºæ‰“æ ‡ç­¾æ—¶çš„æäº¤å¯¹è±¡</div><div class="line">$ git show</div></pre></td></tr></table></figure>
<ul>
<li>ç¬¬äºŒï¼Œè½»é‡çº§æ ‡ç­¾ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼</li>
<li>è½»é‡çº§æ ‡ç­¾ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªä¿å­˜ç€å¯¹åº”æäº¤å¯¹è±¡çš„æ ¡éªŒå’Œä¿¡æ¯çš„æ–‡ä»¶ï¼Œåé¢ä¸é™„å¸¦å…¶å®ƒä¿¡æ¯ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git tag 0.0.1</div></pre></td></tr></table></figure>
<p>æ‰“å®Œæ ‡ç­¾éœ€è¦å°†æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git push</code> å¹¶ä¸ä¼šæŠŠæ ‡ç­¾æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦é€šè¿‡æ˜¾å¼å‘½ä»¤æ‰èƒ½æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå…¶å‘½ä»¤æ ¼å¼å¦‚åŒæ¨é€åˆ†æ”¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git push origin 0.0.1</div></pre></td></tr></table></figure>
<hr>
<h4 id="äº”ï¼šé…ç½®-podspec-åï¼Œä¸‹ä¸€æ­¥éªŒè¯åº“"><a href="#äº”ï¼šé…ç½®-podspec-åï¼Œä¸‹ä¸€æ­¥éªŒè¯åº“" class="headerlink" title="äº”ï¼šé…ç½® .podspec åï¼Œä¸‹ä¸€æ­¥éªŒè¯åº“"></a>äº”ï¼šé…ç½® <code>.podspec</code> åï¼Œä¸‹ä¸€æ­¥éªŒè¯åº“</h4><p>ä½¿ç”¨å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod lib lint</div></pre></td></tr></table></figure></p>
<p>æˆ–è€…è¿™ä¸ªï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod spec lint</div></pre></td></tr></table></figure></p>
<p>åªæœ‰éªŒè¯é€šè¿‡æ‰èƒ½ push åˆ° CocoaPods ä¸Šã€‚</p>
<p>è¿™é‡Œè¯´ä¸‹éªŒè¯æ—¶é‡åˆ°çš„å‡ ä¸ªé”™è¯¯ï¼š</p>
<ul>
<li>ç¬¬ä¸€ï¼šå½“è¿™ä¸ªé—®é¢˜å®åœ¨æ‰¾ä¸åˆ°åŸå› æ—¶ï¼Œè¯·å…ˆä»”ç»†æ£€æŸ¥ <code>.podspec</code> æ–‡ä»¶é…ç½®ä¿¡æ¯æ˜¯å¦å¡«å†™æ­£ç¡®ï¼Œå¦‚æœç¡®è®¤æ²¡é—®é¢˜ä½†ä¾ç„¶æŠ¥é”™ï¼Œå»ºè®®æŠŠ <code>.podspec</code> æ–‡ä»¶åˆ æ‰ï¼Œé‡æ–° Create ã€‚</li>
</ul>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-02-blog.png" alt=""></p>
<ul>
<li>ç¬¬äºŒï¼šåº“çš„ä¾èµ–åº“ï¼ˆOpenSSL-Universalï¼‰ä¸­åŒ…å« <code>.a</code> çš„é™æ€åº“æ–‡ä»¶ï¼ŒCocoaPods è¡¨ç¤ºä¸å…è®¸ï¼Œéœ€è¦ä½¿ç”¨åŠ¨æ€åº“æˆ–è€…æ¡†æ¶ï¼Œå‚è€ƒ <a href="https://github.com/CocoaPods/CocoaPods/issues/3583" target="_blank" rel="external">è¿™æ¡ issue</a> çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-03-blog.png" alt=""></p>
<ul>
<li>ç¬¬ä¸‰ï¼šä¸‹é¢è¿™ä¸ªé”™è¯¯åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆä¸é€‚ç”¨ï¼Œæˆ‘çš„æ–¹æ¡ˆæ˜¯æŠŠ CocoaPods å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼›å½“å‰ CocoaPods æœ€æ–°ç‰ˆæœ¬ä¸º <code>1.3.1</code>ã€‚</li>
</ul>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-04-blog.png" alt=""></p>
<p>æŸ¥çœ‹ CocoaPods ç‰ˆæœ¬ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod --version</div></pre></td></tr></table></figure></p>
<p>å‡çº§ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gem install cocoapods</div></pre></td></tr></table></figure></p>
<h4 id="å…­ï¼šæäº¤åº“åˆ°-CocoaPods"><a href="#å…­ï¼šæäº¤åº“åˆ°-CocoaPods" class="headerlink" title="å…­ï¼šæäº¤åº“åˆ° CocoaPods"></a>å…­ï¼šæäº¤åº“åˆ° CocoaPods</h4><p>è¯´æ˜ï¼š<a href="http://blog.cocoapods.org/CocoaPods-Trunk/#transition" target="_blank" rel="external">Trunk</a> æœåŠ¡éœ€è¦ CocoaPods ç‰ˆæœ¬ <code>0.33</code> ä»¥ä¸Šæ‰èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥å»ºè®®å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ä»¥é¿å…æœªçŸ¥çš„é”™è¯¯ã€‚</p>
<p>ç¬¬ä¸€æ¬¡æäº¤ä¹‹å‰éœ€è¦å…ˆæ³¨å†Œ <code>Trunk</code>ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ä¸‹é¢çš„å‘½ä»¤æ˜¯æˆ‘æ³¨å†Œä½¿ç”¨çš„ï¼Œä½ éœ€è¦æŠŠé‚®ç®±å’Œåå­—ä»¥åŠæè¿°æ›¿æ¢æˆä½ çš„ï¼ŒåŠ ä¸Š--verboseå¯ä»¥è¾“å‡ºè¯¦ç»†çš„debugä¿¡æ¯ï¼Œæ–¹ä¾¿å‘ç”Ÿé”™è¯¯æ—¶æŸ¥çœ‹ã€‚</div><div class="line">$ pod trunk register  arvinSir.86@gmail.com &apos;arvin&apos; --description=&apos;macbook pro&apos; --verbose</div></pre></td></tr></table></figure></p>
<p>æ³¨å†Œå CocoaPods ä¼šå‘ä½ çš„é‚®ç®±å‘é€éªŒè¯é“¾æ¥ï¼ŒéªŒè¯æ³¨å†ŒæˆåŠŸåæ‰èƒ½ç»§ç»­ä»¥ä¸‹çš„æ“ä½œã€‚<br>æ³¨å†ŒæˆåŠŸåå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹è‡ªå·±çš„æ³¨å†Œä¿¡æ¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod trunk me</div></pre></td></tr></table></figure></p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-05-blog.png" alt=""></p>
<p>æœ€åï¼Œä¸Šä¼ åº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod trunk push YYRSACrypto.podspec --use-libraries</div></pre></td></tr></table></figure></p>
<p>OKï¼Œå†æ¬¡å‡ºç°é”™è¯¯ï¼Œä»”ç»†çœ‹ï¼Œ<code>pod trunk push</code> å‘½ä»¤é»˜é»˜çš„åˆåšäº†ä¸€æ¬¡éªŒè¯ï¼ŒæŸäº›æ–‡ä»¶è¢«è­¦å‘Šå¯¼è‡´éªŒè¯æ— æ³•é€šè¿‡ï¼Œä½†åé¢ç»§ç»­æç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>--allow-warnings</code> æ¥å¿½ç•¥è­¦å‘Šï¼›ä½¿ç”¨ <code>--use-libraries</code> è¡¨ç¤ºå¿½ç•¥ä¾èµ–åº“ä¸­åŒ…å«é™æ€åº“ï¼ˆ<code>.a</code> æ–‡ä»¶ï¼‰æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170903-06-blog.png" alt=""></p>
<p>æ‰€ä»¥ï¼Œå®Œæ•´çš„ <code>push</code> å‘½ä»¤å¦‚ä¸‹ï¼ˆå»ºè®®ä½¿ç”¨ï¼‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod trunk push YYRSACrypto.podspec --allow-warnings --use-libraries</div></pre></td></tr></table></figure></p>
<p>æ²¡æœ‰æ„å¤–ï¼Œæäº¤æˆåŠŸåç»ˆç«¯å‘½ä»¤è¡Œå°†è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š<br><img src="http://oonis1a4c.bkt.clouddn.com/20170903-09-blog.png" alt=""></p>
<p>ğŸ‘ æ­å–œï¼ç°åœ¨å°±è¯·ä½¿ç”¨ <code>pod search</code> å‘½ä»¤æ¥æŸ¥æ‰¾ä½ çš„åº“å§ï¼</p>
<p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œå…ˆåˆ«æ€¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°ä¸‹å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pod setup</div></pre></td></tr></table></figure></p>
<p><strong>ç»“å°¾ï¼š</strong>å¦‚æœåç»­éœ€è¦æ›´æ–°åº“ï¼Œè®°å¾—é¡»é‡æ–°æ‰“ä¸ª Tag å¹¶ <code>push</code> åˆ°è¿œç¨‹æœåŠ¡ç«¯ï¼Œå†æŠŠ <code>.podspec</code> æ–‡ä»¶ä¸­çš„ <code>s.version</code> å­—æ®µæ›´æ–°ä¸‹ï¼Œç„¶åä½¿ç”¨ä¸Šé¢çš„ <code>pod trunk push</code> å‘½ä»¤æäº¤å³å¯ï¼›åŒæ ·çš„å¦‚æœä½¿ç”¨ <code>pod search</code> å‘½ä»¤æŸ¥æ‰¾ä¸åˆ°æœ€æ–°æäº¤çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨ <code>pod setup</code> å‘½ä»¤æ›´æ–°ä¸‹å°±å¥½äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170903-00-blog.png&quot; alt=&quot;(å®˜æ–¹)ä¾èµ–åŒ…ä¸Šä¼ æµç¨‹&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘å†™çš„å·¥å…·ç±» &lt;a href=&quot;https://github.com/Kejiasir/Y
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="CocoaPods" scheme="http://yoursite.com/categories/Technology/CocoaPods/"/>
    
    
      <category term="CocoaPods" scheme="http://yoursite.com/tags/CocoaPods/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ openSSL ç”Ÿæˆ RSA ç§˜é’¥å¯¹</title>
    <link href="http://yoursite.com/2017/08/21/rsa-crypto-notes/"/>
    <id>http://yoursite.com/2017/08/21/rsa-crypto-notes/</id>
    <published>2017-08-21T07:49:25.000Z</published>
    <updated>2017-09-20T03:39:36.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170821-00-blog.png" alt=""></p>
<p>æœ€è¿‘å¥½å¿™å•Šï¼Œå…¬å¸å¼€äº†æ–°çš„é¡¹ç›®ï¼Œæ‰€ä»¥åšå®¢ä¹Ÿæ²¡å•¥æ—¶é—´æ›´æ–°å‘¢ï¼é‡åˆ°ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯ç”Ÿæˆ <strong><em>RSA</em></strong> ç§˜é’¥å¯¹ï¼Œç„¶åæŠŠå…¬é’¥å‘é€ç»™ <strong><em>Java</em></strong> æœåŠ¡å™¨ç«¯ï¼Œæœ¬æ¥æƒ³ç€æŒºç®€å•å‘€ï¼Œç»ˆç«¯å‡ è¡Œå‘½ä»¤å°±å¯ä»¥ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå¯¼è¿›é¡¹ç›®å°± OK äº†ï¼ä½†æ˜¯å·¥å¤´è¯´å¿…é¡»æ¯ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„å¯†é’¥å¯¹éƒ½ä¸ä¸€æ ·ï¼Œé‚£å°±æ„å‘³ç€éœ€è¦ç”±å®¢æˆ·ç«¯ä½¿ç”¨ä»£ç ç”Ÿæˆäº†ï¼Œç¡¬ç€å¤´çš®ç ”ç©¶äº†å‡ å¤©ï¼Œæœ€ç»ˆæŠŠé—®é¢˜è§£å†³äº†ï¼Œæ‰€ä»¥æŠ½æ—¶é—´æ¥è®°å½•ä¸‹ã€‚</p>
<p>å…³äº <a href="https://www.openssl.org/" target="_blank" rel="external">OpenSSL</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠ å¯†åº“ï¼Œä½¿ç”¨çº¯ C è¯­è¨€ç¼–å†™ï¼Œå¯ä»¥è·¨å¹³å°ä½¿ç”¨ï¼Œç½‘ä¸Šæ›´å¤šçš„èµ„æ–™å¤§éƒ½æ˜¯ä½¿ç”¨ç»ˆç«¯å‘½ä»¤æ“ä½œæ¥ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå¯¹äºä½¿ç”¨ä»£ç ç”Ÿæˆçš„æ¡ˆä¾‹åŸºæœ¬å°‘ä¹‹åˆå°‘ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯ä¹–ä¹–æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å§ã€‚</p>
<p><strong>Tipsï¼š</strong>å»ºè®®å…ˆåœ¨é¡¹ç›®ä¸­å¯¼å…¥ <a href="https://github.com/openssl/openssl" target="_blank" rel="external">openssl</a>ï¼Œæ”¯æŒ CocoaPods é›†æˆï¼Œè¿™æ ·æ–¹ä¾¿ç»“åˆæ–‡æ¡£ç›´æ¥åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾æ¥å£ã€‚</p>
<p>åœ¨ <code>#include &lt;openssl/rsa.h&gt;</code> å¤´æ–‡ä»¶ä¸­æ‰¾åˆ°ä»¥ä¸‹å‡½æ•°ç”Ÿæˆå¯†é’¥å¯¹ï¼š</p>
<h5 id="ä¸€-nbsp-è¿™æ˜¯è¢«æ ‡è®°ä¸ºå¼ƒç”¨çš„å‡½æ•°ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œç”Ÿæˆé”™è¯¯çš„å¯†é’¥å¯¹æˆ–è€…ä¸º-NULL-çš„å‡ ç‡å¾ˆå¤§"><a href="#ä¸€-nbsp-è¿™æ˜¯è¢«æ ‡è®°ä¸ºå¼ƒç”¨çš„å‡½æ•°ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œç”Ÿæˆé”™è¯¯çš„å¯†é’¥å¯¹æˆ–è€…ä¸º-NULL-çš„å‡ ç‡å¾ˆå¤§" class="headerlink" title="ä¸€.&nbsp; è¿™æ˜¯è¢«æ ‡è®°ä¸ºå¼ƒç”¨çš„å‡½æ•°ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œç”Ÿæˆé”™è¯¯çš„å¯†é’¥å¯¹æˆ–è€…ä¸º NULL çš„å‡ ç‡å¾ˆå¤§"></a>ä¸€.&nbsp; è¿™æ˜¯è¢«æ ‡è®°ä¸ºå¼ƒç”¨çš„å‡½æ•°ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œç”Ÿæˆé”™è¯¯çš„å¯†é’¥å¯¹æˆ–è€…ä¸º <strong><em>NULL</em></strong> çš„å‡ ç‡å¾ˆå¤§</h5><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* Deprecated version */</span></div><div class="line"><span class="meta"># ifndef OPENSSL_NO_DEPRECATED</span></div><div class="line">RSA *RSA_generate_key(<span class="keyword">int</span> bits, <span class="keyword">unsigned</span> <span class="keyword">long</span> e, <span class="keyword">void</span></div><div class="line">                       (*callback) (<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">void</span> *), <span class="keyword">void</span> *cb_arg);</div><div class="line"><span class="meta"># endif                         /* !defined(OPENSSL_NO_DEPRECATED) */</span></div></pre></td></tr></table></figure>
<h5 id="äºŒ-nbsp-æ–°çš„å‡½æ•°ï¼Œæ›¿æ¢-RSA-generate-keyï¼ˆï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹å€¼ï¼ŒæˆåŠŸè¿”å›-1ï¼Œ-é”™è¯¯è¿”å›-0"><a href="#äºŒ-nbsp-æ–°çš„å‡½æ•°ï¼Œæ›¿æ¢-RSA-generate-keyï¼ˆï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹å€¼ï¼ŒæˆåŠŸè¿”å›-1ï¼Œ-é”™è¯¯è¿”å›-0" class="headerlink" title="äºŒ.&nbsp; æ–°çš„å‡½æ•°ï¼Œæ›¿æ¢ RSA_generate_keyï¼ˆï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹å€¼ï¼ŒæˆåŠŸè¿”å› 1ï¼Œ é”™è¯¯è¿”å› 0"></a>äºŒ.&nbsp; æ–°çš„å‡½æ•°ï¼Œæ›¿æ¢ <code>RSA_generate_keyï¼ˆï¼‰</code>ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹å€¼ï¼ŒæˆåŠŸè¿”å› 1ï¼Œ é”™è¯¯è¿”å› 0</h5><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  New versionï¼ç”Ÿæˆ RSA å¯†é’¥å¯¹</div><div class="line">     </div><div class="line">  @param rsa  å­˜å‚¨ç”Ÿæˆçš„ç§˜é’¥å¯¹çš„ RSA ç»“æ„ä½“æŒ‡é’ˆ</div><div class="line">  @param bits æ¨¡æ•°å¤§å°ï¼Œé€šå¸¸ä¸º 128ï¼ˆ1024 bitï¼‰ä½</div><div class="line">  @param e    å…¬å…±æŒ‡æ•°ï¼Œé€šå¸¸ä¸º 3ï¼Œ17 æˆ– 65537</div><div class="line">  @param cb   å¡« NULL å³å¯</div><div class="line">     </div><div class="line">  @return ç»“æœï¼ˆæ•´å‹å€¼ï¼‰ï¼ŒæˆåŠŸè¿”å› 1ï¼Œé”™è¯¯è¿”å› 0</div><div class="line">*/</div><div class="line"><span class="keyword">int</span> RSA_generate_key_ex(RSA *rsa, <span class="keyword">int</span> bits, BIGNUM *e, BN_GENCB *cb);</div></pre></td></tr></table></figure>
<p>å…³äº â€˜ç”Ÿæˆå¯†é’¥å¯¹â€™ æ¥å£æ›´è¯¦ç»†çš„æè¿°ï¼Œè¯·æŸ¥çœ‹ <a href="https://www.openssl.org/docs/man1.1.0/crypto/RSA_generate_key.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p><strong><em>æ ¸å¿ƒä»£ç ï¼š</em></strong></p>
<p>éœ€å¯¼å…¥ <code>#import &lt;openssl/rsa.h&gt;</code> å’Œ <code>#import &lt;openssl/pem.h&gt;</code> è¿™ä¸¤ä¸ªå¤´æ–‡ä»¶ã€‚</p>
<p><strong><em>ä¸€ï¼šç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼Œæå–å‡ºå…¬é’¥å’Œç§é’¥é€šè¿‡ RSA äºŒçº§ç»“æ„ä½“æŒ‡é’ˆä¿å­˜èµ·æ¥</em></strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** ç”Ÿæˆ rsa key */</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">bool</span> rsa_generate_key(RSA **public_key, RSA **private_key) &#123;</div><div class="line">    BIGNUM *a = BN_new();</div><div class="line">    BN_set_word(a, <span class="number">65537</span>);</div><div class="line">    <span class="keyword">@try</span> &#123;</div><div class="line">        RSA *rsa = RSA_new();</div><div class="line">        <span class="comment">/// returns 1 on success or 0 on error.</span></div><div class="line">        <span class="keyword">int</span> result = RSA_generate_key_ex(rsa, <span class="number">1024</span>, a, <span class="literal">NULL</span>);</div><div class="line">        <span class="keyword">if</span> (result == <span class="number">1</span>) &#123;</div><div class="line">            <span class="comment">/// extract public key and private key</span></div><div class="line">            *public_key  = RSAPublicKey_dup(rsa);</div><div class="line">            *private_key = RSAPrivateKey_dup(rsa);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        RSA_free(rsa);</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">bool</span>)result;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">@finally</span> &#123;</div><div class="line">        <span class="comment">/// freed</span></div><div class="line">        BN_free(a);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em>äºŒï¼šå–å…¬é’¥å’Œç§é’¥åœ°å€è¯»å‡º PEM æ ¼å¼çš„å…¬é’¥å’Œç§é’¥å­—ç¬¦ä¸²</em></strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** è¯»å– pem key */</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> get_pem_key(cStrBlock block, RSA *rsa, <span class="keyword">bool</span> isPublicKey, <span class="keyword">bool</span> isPkcs8) &#123;</div><div class="line">    <span class="keyword">if</span> (!rsa) <span class="keyword">return</span>;</div><div class="line">    BIO *bp = BIO_new(BIO_s_mem());</div><div class="line">    <span class="keyword">int</span> keylen; <span class="keyword">char</span> *pem_key;</div><div class="line">    <span class="keyword">@try</span> &#123;</div><div class="line">        <span class="keyword">if</span> (!isPublicKey) &#123;</div><div class="line">            EVP_PKEY *key = EVP_PKEY_new();</div><div class="line">            EVP_PKEY_assign_RSA(key, rsa);</div><div class="line">            <span class="keyword">if</span> (!isPkcs8)   <span class="comment">/// PKCS#1</span></div><div class="line">                PEM_write_bio_RSAPrivateKey(bp, rsa, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">            <span class="keyword">else</span>    <span class="comment">/// PKCS#8</span></div><div class="line">                PEM_write_bio_PrivateKey(bp, key, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;    <span class="comment">/// PKCS#8</span></div><div class="line">            PEM_write_bio_RSA_PUBKEY(bp, rsa);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        keylen = BIO_pending(bp);</div><div class="line">        pem_key = calloc(keylen + <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        BIO_read(bp, pem_key, keylen);</div><div class="line">        </div><div class="line">        !block ?: block(pem_key);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">@finally</span> &#123;</div><div class="line">        BIO_free_all(bp);</div><div class="line">        RSA_free(rsa);</div><div class="line">        free(pem_key);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿæˆçš„ pem key æ ‡å‡†æ ¼å¼ä¸º PKCS#1ï¼Œä¸€èˆ¬ <strong><em>Java</em></strong> æœåŠ¡å™¨éœ€è¦ä½¿ç”¨çš„æ ¼å¼ä¸º PKCS#8;</li>
<li>åŒºåˆ«ï¼š<ul>
<li>PKCS#1ï¼šå®šä¹‰äº† RSA å…¬é’¥å‡½æ•°çš„åŸºæœ¬æ ¼å¼æ ‡å‡†ï¼Œç‰¹åˆ«æ˜¯æ•°å­—ç­¾åã€‚å®ƒå®šä¹‰äº†æ•°å­—ç­¾åå¦‚ä½•è®¡ç®—ï¼ŒåŒ…æ‹¬å¾…ç­¾åæ•°æ®å’Œç­¾åæœ¬èº«çš„æ ¼å¼ï¼›å®ƒä¹Ÿå®šä¹‰äº† PSA å…¬/ç§é’¥çš„è¯­æ³•ã€‚</li>
<li>PKCS#8ï¼šç§é’¥ä¿¡æ¯è¯­æ³•æ ‡å‡†ã€‚PKCS#8 å®šä¹‰äº†ç§é’¥ä¿¡æ¯è¯­æ³•å’ŒåŠ å¯†ç§é’¥è¯­æ³•ï¼Œå…¶ä¸­ç§é’¥åŠ å¯†ä½¿ç”¨äº†PKCS#5 æ ‡å‡†ã€‚</li>
</ul>
</li>
</ul>
<p><strong><em>æ³¨æ„ï¼š</em></strong><br><strong><em>ä»¥ä¸Šç»“æ„ä½“æŒ‡é’ˆå’Œå†…å­˜åˆ†é…æ“ä½œï¼Œåœ¨ä½œç”¨åŸŸç»“æŸåï¼Œå¿…é¡»è¦é‡Šæ”¾ï¼Œå¦åˆ™ä¼šå¼•èµ·å†…å­˜æ³„éœ²ã€‚</em></strong></p>
<p>é€šè¿‡ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°ï¼Œå°±æˆåŠŸç”Ÿæˆäº†æˆ‘ä»¬æ‰€éœ€è¦çš„å…¬é’¥å’Œç§é’¥ï¼ˆchar *ç±»å‹ï¼‰å­—ç¬¦ä¸²ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦è½¬æ¢ä¸º NSSting ç±»å‹ï¼ä¸€å®šè®°å¾—ä¸è¦ä½¿ç”¨ <code>RSA_generate_key()</code> è¿™ä¸ªå‡½æ•°ï¼Œä¸€å¼€å§‹ä½¿ç”¨è¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„å¯†é’¥å¯¹è¦ä¹ˆå°±æ˜¯é”™è¯¯çš„ï¼Œè¦ä¹ˆå°±æ˜¯ NULLã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•æ£€æŸ¥ç”Ÿæˆçš„å¯†é’¥å¯¹æ˜¯å¦æ­£ç¡®å¹¶ä¸”èƒ½ä½¿ç”¨ï¼Ÿå¯ä»¥ç”¨ <a href="http://travistidwell.com/jsencrypt/example.html" target="_blank" rel="external">è¿™ä¸ªç½‘ç«™æµ‹è¯•</a>ï¼Œå°†ç”Ÿæˆçš„ pem key æ‹·è´è¿‡å»ï¼Œç‚¹å‡»ä¸‹æ–¹çš„ <code>Test Me!!!</code> æŒ‰é’®ï¼Œå¦‚æœæ­£ç¡®å¼¹çª—ä¼šæ˜¾ç¤º <code>It works!!!</code>ï¼Œé”™è¯¯æ˜¾ç¤º <code>Something went wrong...</code>ã€‚</p>
<p>æ‹¿åˆ°å…¬é’¥ç§é’¥äº†ï¼Œé‚£æ€ä¹ˆåŠ å¯†è§£å¯†å‘¢ï¼ŸåŒæ ·çš„åœ¨ <code>rsa.h</code> å¤´æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸‹é¢å‡ ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* next 4 return -1 on error */</span></div><div class="line"><span class="comment">/// å…¬é’¥åŠ å¯†</span></div><div class="line"><span class="keyword">int</span> RSA_public_encrypt(<span class="keyword">int</span> flen, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *from,</div><div class="line">                       <span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa, <span class="keyword">int</span> padding);</div><div class="line"><span class="comment">/// ç§é’¥åŠ å¯†</span></div><div class="line"><span class="keyword">int</span> RSA_private_encrypt(<span class="keyword">int</span> flen, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *from,</div><div class="line">                        <span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa, <span class="keyword">int</span> padding);</div><div class="line"><span class="comment">/// å…¬é’¥è§£å¯†                        </span></div><div class="line"><span class="keyword">int</span> RSA_public_decrypt(<span class="keyword">int</span> flen, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *from,</div><div class="line">                       <span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa, <span class="keyword">int</span> padding);</div><div class="line"><span class="comment">/// ç§é’¥è§£å¯†</span></div><div class="line"><span class="keyword">int</span> RSA_private_decrypt(<span class="keyword">int</span> flen, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *from,</div><div class="line">                        <span class="keyword">unsigned</span> <span class="keyword">char</span> *to, RSA *rsa, <span class="keyword">int</span> padding);</div></pre></td></tr></table></figure>
<p>ç”±äº OpenSSL æ˜¯çº¯ C è¯­è¨€ç¼–å†™ï¼Œä»¥ä¸Šå››ä¸ªå‡½æ•°ä½¿ç”¨æœ‰ç‚¹éš¾åº¦ï¼ŒğŸ˜³ æ²¡æœ‰æ‰¾åˆ°æ­£ç¡®çš„æ–¹æ³•ï¼›ä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº† <a href="https://github.com/hohl/MIHCrypto" target="_blank" rel="external">MIHCrypto</a> è¿™ä¸ªéå¸¸ niubility çš„åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº OpenSSL éƒ¨åˆ†åŠŸèƒ½å°è£…çš„æ›´åŠ é¢å‘å¯¹è±¡çš„åŠ å¯†ç±»åº“ã€‚ç›®å‰æ”¯æŒä»¥ä¸‹åŠ å¯†æ–¹å¼ï¼š</p>
<ul>
<li><code>AES</code> (block cipher)</li>
<li><code>BIGNUM</code> (discrete mathematics)</li>
<li><code>DES</code> (block cipher)</li>
<li><code>MD5</code> (hash algorithm)</li>
<li><code>RSA</code> (public-key cryptography)</li>
<li><code>SHA, SHA256, SHA384, SHA512</code> (hash algorithm)</li>
</ul>
<p>æ‰€æœ‰çš„å¯†ç ç±»é€šè¿‡åè®®æ¥å®ç°ç§˜é’¥ç”Ÿæˆå’ŒåŠ å¯†è§£å¯†ï¼š </p>
<ul>
<li><code>MIHKeyFactory</code> - ç”¨äºç”Ÿæˆæ–°çš„å¯†é’¥ã€‚</li>
<li><code>MIHSymmetricKey</code> - è¡¨ç¤ºå¯¹ç§°å¯†é’¥ï¼ˆå¦‚AESæˆ–DESï¼‰ï¼Œå¯ç”¨äºåŠ å¯†å’Œè§£å¯†æ•°æ®ã€‚</li>
<li><code>MIHPublicKey</code> - è¡¨ç¤ºå…¬é’¥ï¼ˆå¦‚RSA PUBKEYï¼‰ï¼Œå¯ç”¨äºåŠ å¯†æ•°æ®å¹¶éªŒè¯ç­¾åã€‚</li>
<li><code>MIHPrivateKey</code> - è¡¨ç¤ºç§é’¥ï¼ˆå¦‚RSAç§é’¥ï¼‰ï¼Œå¯ç”¨äºè§£å¯†æ•°æ®å’Œç­¾åæ¶ˆæ¯ã€‚</li>
<li><code>MIHHashAlgorithm</code> - è¡¨ç¤ºå“ˆå¸ŒåŠŸèƒ½ï¼Œåªæœ‰ä¸€ç§æ–¹æ³•æ¥åˆ›å»ºä¼ é€’çš„æ•°æ®çš„å“ˆå¸Œå’Œã€‚</li>
</ul>
<p><strong><em>ç¤ºä¾‹ä»£ç ï¼š</em></strong></p>
<p>ç”Ÿæˆç§˜é’¥å¯¹ï¼Œä¿å­˜åˆ°ä¸€ä¸ªå¯†é’¥å¯¹å®¹å™¨ä¸­ï¼ŒåŒ…å«å…¬é’¥å’Œç§é’¥ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// generate rsa key </span></div><div class="line">MIHRSAKeyFactory *keyFactory = [[MIHRSAKeyFactory alloc] init];</div><div class="line"><span class="comment">/// set key size</span></div><div class="line">[keyFactory setPreferedKeySize:MIHRSAKey1024];</div><div class="line"><span class="comment">/// key pair Container</span></div><div class="line">MIHKeyPair *keyPair = [keyFactory generateKeyPair];</div></pre></td></tr></table></figure>
<p>åŠ å¯†è§£å¯†ä½¿ç”¨æ–¹æ³•ï¼Œå‡ è¡Œä»£ç å°±èƒ½å®ç°ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// private encrypt</span></div><div class="line"><span class="built_in">NSError</span> *encryptionError = <span class="literal">nil</span>;</div><div class="line"><span class="built_in">NSData</span> *data = [<span class="string">@"message"</span> dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line"><span class="built_in">NSData</span> *encryptData = [keyPair.private encrypt:data error:&amp;encryptionError];</div><div class="line"></div><div class="line"><span class="comment">/// public decrypt</span></div><div class="line"><span class="built_in">NSError</span> *decryptionError = <span class="literal">nil</span>;</div><div class="line"><span class="built_in">NSData</span> *data = encryptData; <span class="comment">/// encrypted binary data</span></div><div class="line"><span class="built_in">NSData</span> *decryptData = [keyPair.public decrypt:data error:&amp;decryptionError];</div></pre></td></tr></table></figure>
<p>æœ‰å…³æ›´å¤šçš„ä½¿ç”¨å’Œæ¥å£è¯´æ˜ï¼Œè¯·æŸ¥çœ‹ <a href="http://cocoadocs.org/docsets/MIHCrypto/0.4.1/" target="_blank" rel="external">æ¥å£æ–‡æ¡£</a>ã€‚</p>
<p>å—¯ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¯ä½¿ç”¨ MIHCrypto è¿™ä¸ªåº“è§£å†³äº†é—®é¢˜ã€‚åœ¨åŸºäºè¿™ä¸ªåº“ä¸Šç»“åˆè‡ªå·±çš„éœ€æ±‚å°è£…äº†ä¸€ä¸ªæ›´ç®€å•ä½¿ç”¨çš„å·¥å…·ç±»ï¼Œå±è”½æ™¦æ¶©çš„ C è¯­è¨€ï¼Œä¸éœ€è¦æ“ä½œ RSA ç»“æ„ä½“æŒ‡é’ˆï¼Œä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹å¼ï¼Œ<a href="https://github.com/Kejiasir/YYRSACrypto" target="_blank" rel="external">åŸºäº MIHCrypto å°è£…çš„ RSA åŠ å¯†è§£å¯†å·¥å…·ç±»</a>ï¼Œæ”¯æŒå¯¼å…¥æœåŠ¡å™¨è¿”å›çš„ç§˜é’¥æŒ‰éœ€æ±‚è¿›è¡ŒåŠ å¯†æˆ–è€…è§£å¯†ã€‚å¯ä»¥ä½¿ç”¨ CocoaPods æ–¹å¼é›†æˆåˆ°é¡¹ç›®ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170821-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘å¥½å¿™å•Šï¼Œå…¬å¸å¼€äº†æ–°çš„é¡¹ç›®ï¼Œæ‰€ä»¥åšå®¢ä¹Ÿæ²¡å•¥æ—¶é—´æ›´æ–°å‘¢ï¼é‡åˆ°ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯ç”Ÿæˆ &lt;strong&gt;&lt;em
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/categories/iOS/Objective-C/"/>
    
    
      <category term="ios" scheme="http://yoursite.com/tags/ios/"/>
    
  </entry>
  
  <entry>
    <title>Swift å­¦ä¹ ç¬”è®°ä¸€</title>
    <link href="http://yoursite.com/2017/07/13/swift-notes-01/"/>
    <id>http://yoursite.com/2017/07/13/swift-notes-01/</id>
    <published>2017-07-13T01:21:38.000Z</published>
    <updated>2017-09-20T03:40:38.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170713-00-blog.jpg" alt="Swift Logo"></p>
<p>ä½œä¸ºiOSå¼€å‘è¯­è¨€Objective-Cçš„æ›¿ä»£è€…ï¼ŒSwiftä¸€ç»æ¨å‡ºä¾¿å—åˆ°ç«çƒ­çš„å­¦ä¹ æµªæ½®ï¼Œæºäºæ›´ç®€æ´æ›´ä¼˜é›…çš„è¯­è¨€è®¾è®¡ï¼Œåœ¨è¯­è¨€æ’è¡Œæ¦œä¸Šä»å‰ä¸¤å¹´çš„åå‡ ä½å¿«é€Ÿä¸Šå‡åˆ°äº†ä»Šå¹´çš„å‰åä½ã€‚å¾ˆå¤šå…¬å¸ä¹Ÿå·²ç»å¼€å§‹ä½¿ç”¨Swiftè¯­è¨€æ¥å¼€å‘æ–°çš„é¡¹ç›®ï¼Œè€ŒAppleåœ¨æ­¤è¿‡æ¸¡æœŸé—´ä¹Ÿåšäº†ä¸€äº›äº‹ï¼Œä¸ºocå’Œswiftåšäº†æ¡¥æ¥æ–‡ä»¶ï¼Œä½¿ç›®å‰çš„Objective-Cé¡¹ç›®å¯ä»¥ä½¿ç”¨Swiftæ¥è¿›è¡Œæ··ç¼–è¿­ä»£ã€‚ </p>
<p>ä»Šå¹´å…­æœˆçš„WWDCå¤§ä¼šå‘å¸ƒäº†Swiftçš„4.0ç‰ˆæœ¬ï¼Œå¯¹äºæ ¸å¿ƒè¯­è¨€å’Œæ ‡å‡†åº“åšäº†é‡å¤§æ”¹è¿›ï¼Œå·²ç»è¶Šæ¥è¶Šç¨³å®šï¼Œè¶Šæ¥è¶Šè¶‹äºæˆç†Ÿï¼Œå–ä»£Objective-Cçœ‹æ¥æ˜¯æŒ‡æ—¥å¯å¾…ã€‚æ‰€ä»¥æ˜¯æ—¶å€™è¯¥åšå¥½å‡†å¤‡getèµ·æ¥äº†ï¼è¿æ¥Swiftæ—¶ä»£å§~ </p>
<p>æœ€è¿‘ä¹Ÿå°è¯•ç”¨swiftæ··ç¼–å…¬å¸çš„é¡¹ç›®ï¼Œé‡åˆ°ä¸å°‘å‘ï¼Œå°¤å…¶ä½¿ç”¨CocoaPodså¯¼å…¥swiftçš„ç¬¬ä¸‰æ–¹åº“é‡åˆ°çš„é—®é¢˜æ— æ³•è§£å†³ï¼Œå¦‚swiftç‰ˆæœ¬æœ€æ¸´æœ›çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶<a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire</a>å’Œè‡ªåŠ¨å¸ƒå±€æ¡†æ¶<a href="https://github.com/SnapKit/SnapKit" target="_blank" rel="external">SnapKit</a>ï¼Œç°åœ¨éƒ½æ²¡åŠæ³•ç”¨ï¼Œä¼°è®¡æ˜¯xcodeç‰ˆæœ¬é—®é¢˜ï¼Œæœ‰æ—¶é—´å†å†™ç²—æ¥~ï¼›</p>
<p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥å­¦ä¹ åŸºæœ¬è¯­æ³•ï¼Œæ‰“å¥½åŸºç¡€ã€‚å› ä¸ºç”µè„‘OSXç³»ç»Ÿæ²¡æœ‰å‡çº§ï¼Œå¹¶ä¸”xcode 9è¿˜æ˜¯betaç‰ˆï¼Œä¹Ÿå®‰è£…ä¸äº†ï¼Œæ‰€ä»¥ä»¥ä¸‹å­¦ä¹ çš„éƒ½æ˜¯åŸºäºxcode 8ç¯å¢ƒçš„swift 3.0è¯­æ³•ï¼Œå’Œswift 4.0è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œbut donâ€™t worryï¼Œåé¢3.0è¿‡æ¸¡åˆ°4.0éšœç¢è‚¯å®šä¸å¤§ã€‚</p>
<h4 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="#æ•°æ®ç±»å‹"></a>#æ•°æ®ç±»å‹</h4><p>åŸºæœ¬æ•°æ®ç±»å‹<br><code>Int</code> æ•´å‹å€¼ï¼›<br><code>Float</code> 32ä½æµ®ç‚¹æ•°å€¼ï¼›<br><code>Double</code> 64ä½æµ®ç‚¹æ•°å€¼ï¼›<br><code>Bool</code> å¸ƒå°”å‹å€¼ã€‚</p>
<p>æ–‡æœ¬<br><code>String</code> æ˜¯æ–‡æœ¬å­—ç¬¦æ•°æ®ã€‚</p>
<p>é›†åˆ<br><code>Array</code> æ•°ç»„ï¼šæœ‰åºæ•°æ®çš„é›†ï¼›<br><code>Set</code> é›†åˆï¼šæ— åºæ— é‡å¤æ•°æ®çš„é›†ï¼›<br><code>Dictionary</code> å­—å…¸ï¼šæ— åºçš„é”®å€¼å¯¹çš„é›†ã€‚</p>
<h4 id="å¸¸é‡å’Œå˜é‡"><a href="#å¸¸é‡å’Œå˜é‡" class="headerlink" title="#å¸¸é‡å’Œå˜é‡"></a>#å¸¸é‡å’Œå˜é‡</h4><p>ä½¿ç”¨ <code>let</code> æ¥å£°æ˜å¸¸é‡ï¼Œå¸¸é‡çš„å€¼ä¸€æ—¦è®¾å®šå°±ä¸èƒ½æ”¹å˜ã€‚</p>
<p>ä½¿ç”¨ <code>var</code> æ¥å£°æ˜å˜é‡ï¼Œå˜é‡çš„å€¼è®¾å®šåä»å¯ä»¥éšæ„æ›´æ”¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å®šä¹‰å¸¸é‡ï¼Œè®¾ç½®å€¼10</span></div><div class="line"><span class="keyword">let</span> i = <span class="number">10</span></div><div class="line">        </div><div class="line"><span class="comment">// å®šä¹‰å˜é‡ï¼Œè®¾ç½®åˆå§‹å€¼0</span></div><div class="line"><span class="keyword">var</span> j = <span class="number">0</span></div><div class="line">        </div><div class="line"><span class="comment">// ä¿®æ”¹å˜é‡å€¼ä¸º30</span></div><div class="line">j = <span class="number">30</span></div><div class="line">        </div><div class="line"><span class="built_in">print</span>(i) <span class="comment">// è¾“å‡ºï¼š10</span></div><div class="line">        </div><div class="line"><span class="built_in">print</span>(j) <span class="comment">// è¾“å‡ºï¼š30</span></div></pre></td></tr></table></figure>
<h4 id="ç±»å‹æ¨å¯¼"><a href="#ç±»å‹æ¨å¯¼" class="headerlink" title="#ç±»å‹æ¨å¯¼"></a>#ç±»å‹æ¨å¯¼</h4><p>Swift æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œè‡ªåŠ¨æ ¹æ®å³ä¾§çš„ä»£ç æ¨æ–­å‡ºè¡¨è¾¾å¼çš„ç±»å‹ï¼Œå½“ä½ è¦å¤„ç†ä¸åŒç±»å‹çš„å€¼æ—¶ï¼Œç±»å‹æ£€æŸ¥å¯ä»¥å¸®ä½ é¿å…é”™è¯¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è‡ªåŠ¨æ¨æ–­å‡ºIntç±»å‹</span></div><div class="line"><span class="keyword">let</span> x = <span class="number">10</span></div><div class="line"></div><div class="line"><span class="comment">// è‡ªåŠ¨æ¨æ–­å‡ºDoubleç±»å‹        </span></div><div class="line"><span class="keyword">let</span> p = <span class="number">3.14159</span></div><div class="line">        </div><div class="line"><span class="comment">// å½“æ¨æ–­æµ®ç‚¹æ•°çš„ç±»å‹æ—¶ï¼ŒSwift æ€»æ˜¯ä¼šé€‰æ‹©Â DoubleÂ è€Œä¸æ˜¯Float        </span></div><div class="line"><span class="comment">// å¦‚æœè¡¨è¾¾å¼ä¸­åŒæ—¶å‡ºç°äº†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œä¼šè¢«æ¨æ–­ä¸ºÂ DoubleÂ ç±»å‹</span></div><div class="line"><span class="comment">// è‡ªåŠ¨æ¨æ–­å‡ºDoubleç±»å‹</span></div><div class="line"><span class="keyword">let</span> r = <span class="number">2</span> + <span class="number">3.14</span></div></pre></td></tr></table></figure>
<h4 id="ç±»å‹æŒ‡å®šï¼ˆè½¬æ¢ï¼‰"><a href="#ç±»å‹æŒ‡å®šï¼ˆè½¬æ¢ï¼‰" class="headerlink" title="#ç±»å‹æŒ‡å®šï¼ˆè½¬æ¢ï¼‰"></a>#ç±»å‹æŒ‡å®šï¼ˆè½¬æ¢ï¼‰</h4><p>åœ¨Swiftä¸­ï¼Œä¸åŒç±»å‹çš„æ•°æ®ä¹‹é—´ï¼Œæ˜¯ä¸å…è®¸ç›´æ¥è¿ç®—çš„ï¼Œå®ƒä¸ä¼šåšéšå¼ç±»å‹è½¬æ¢ï¼›å¦‚æœéœ€è¦æŠŠä¸€ä¸ªå€¼è½¬æ¢æˆå…¶ä»–ç±»å‹ï¼Œé¡»æ˜¾å¼è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ï¼šlet/var å¸¸é‡å/å˜é‡å : ç±»å‹ = å€¼ï¼Œå¦åˆ™ä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹æ¨æ–­ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä¾‹ä¸€</span></div><div class="line"><span class="keyword">let</span> i = <span class="number">10</span> </div><div class="line"><span class="keyword">var</span> j: <span class="type">Double</span> = <span class="number">0.5</span> </div><div class="line">j = <span class="number">30</span> </div><div class="line"><span class="comment">// å°† j è½¬æ¢ä¸º Intç±»å‹</span></div><div class="line"><span class="built_in">print</span>(i + <span class="type">Int</span>(j)) <span class="comment">// è¾“å‡ºï¼š40</span></div><div class="line"></div><div class="line"><span class="comment">// ä¾‹äºŒï¼Œä½¿ç”¨â€˜ç±»å‹ï¼ˆï¼‰â€™åŒ…è£¹éœ€è½¬æ¢çš„å¸¸é‡æˆ–å˜é‡è½¬æ¢</span></div><div class="line"><span class="keyword">let</span> label = <span class="string">"The width is"</span></div><div class="line"><span class="keyword">let</span> width = <span class="number">94</span></div><div class="line"><span class="keyword">let</span> widthLabel = label + <span class="type">String</span>(width) </div><div class="line"></div><div class="line"><span class="comment">// ä¾‹ä¸‰ï¼Œæ›´ç®€å•çš„æŠŠå€¼è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼šæŠŠå€¼å†™åˆ°æ‹¬å·ä¸­ï¼Œå¹¶ä¸”åœ¨æ‹¬å·ä¹‹å‰å†™ä¸€ä¸ªåæ–œæ </span></div><div class="line"><span class="keyword">let</span> years = <span class="number">6</span>  </div><div class="line"><span class="keyword">let</span> string = <span class="string">"nicole \(years) years old this year."</span></div></pre></td></tr></table></figure>
<h4 id="å¾…ç»­å•Šã€‚ã€‚ã€‚"><a href="#å¾…ç»­å•Šã€‚ã€‚ã€‚" class="headerlink" title="å¾…ç»­å•Šã€‚ã€‚ã€‚"></a>å¾…ç»­å•Šã€‚ã€‚ã€‚</h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170713-00-blog.jpg&quot; alt=&quot;Swift Logo&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½œä¸ºiOSå¼€å‘è¯­è¨€Objective-Cçš„æ›¿ä»£è€…ï¼ŒSwiftä¸€ç»æ¨å‡ºä¾¿å—åˆ°ç«çƒ­çš„å­¦ä¹ æµªæ½®ï¼Œæºäº
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Swift" scheme="http://yoursite.com/categories/iOS/Swift/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="swift" scheme="http://yoursite.com/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>Xcodeçš„è­¦å‘ŠåŠå¤„ç†ï¼ŒæŒç»­æ›´æ–°</title>
    <link href="http://yoursite.com/2017/06/01/xcode-warning-muster/"/>
    <id>http://yoursite.com/2017/06/01/xcode-warning-muster/</id>
    <published>2017-06-01T07:31:06.000Z</published>
    <updated>2017-07-13T03:06:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170601-00-blog.png" alt="">  </p>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ–è€…åœ¨æ‰“åŒ…ipaçš„æ—¶å€™ï¼ŒXcodeçš„ç¼–è¯‘å™¨å¤šå°‘æ€»ä¼šç»™å‡ºä¸€äº›è­¦å‘Šï¼Œè™½ç„¶çœ‹ä¼¼æ²¡å•¥å½±å“ï¼Œä¸ä¼šé˜»æ­¢ç»§ç»­ç¼–è¯‘å’Œé“¾æ¥ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ç¨‹åºä¸èƒ½è¿è¡Œï¼Œä½†æ˜¯å¯¹äºå¼ºè¿«ç—‡æ¥è¯´ï¼Œè¿˜æ˜¯ä¸èƒ½å®¹å¿çš„ï¼Œå¯¹äºä¸€äº›èƒ½æ¶ˆç­çš„è­¦å‘Šä¸€å®šå°½ä¼šå¯èƒ½çš„æ¶ˆç­æ‰ï¼Œé¿å…å˜æˆä¸å¯é¢„çŸ¥çš„é”™è¯¯ ã€‚</p>
<p>ç¼–ç æ—¶ä¹Ÿåº”è¯¥å°½å¯èƒ½çš„é¿å…äº§ç”Ÿè­¦å‘Šï¼Œæ¯”å¦‚ä¸è¦åªå®šä¹‰ä¸å®ç°æ–¹æ³•æˆ–å˜é‡ï¼›ä¸ä½¿ç”¨æ ‡è®°ä¸ºåºŸå¼ƒçš„APIï¼›æˆ–è€…ä¸è¦éµå®ˆäº†ä»£ç†åè®®å´ä¸å®ç°ä»£ç†æ–¹æ³•ç­‰ï¼›ä½†æ˜¯é¡¹ç›®å¤šå°‘ä¼šé›†æˆä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œcopyåˆ°é¡¹ç›®çš„èƒ½ç›´æ¥ä¿®æ”¹ï¼Œå¦‚æœæ˜¯ä½¿ç”¨CocoaPodsç®¡ç†çš„å°±æ²¡åŠæ³•äº†ï¼Œåªèƒ½åç­‰ä½œè€…æ›´æ–° ã€‚ ãƒ½(ã€‚&gt;Ğ´&lt;)ï½</p>
<h5 id="ä¸€-nbsp-ç¬¬ä¸‰æ–¹-Framework-å¯¼è‡´çš„-Warning"><a href="#ä¸€-nbsp-ç¬¬ä¸‰æ–¹-Framework-å¯¼è‡´çš„-Warning" class="headerlink" title="ä¸€.&nbsp; ç¬¬ä¸‰æ–¹ Framework å¯¼è‡´çš„ Warning"></a>ä¸€.&nbsp; ç¬¬ä¸‰æ–¹ Framework å¯¼è‡´çš„ Warning</h5><p><img src="http://oonis1a4c.bkt.clouddn.com/20170601-01-blog.png" alt=""></p>
<p>è§£å†³æ–¹æ³•ï¼š<br>å‚è€ƒæ–‡ç« ï¼š<a href="http://nixwang.com/2016/05/09/kill-debug-symbol-warnings/" target="_blank" rel="external">æ¶ˆé™¤å¼•å…¥ç¬¬ä¸‰æ–¹ Framework å¯¼è‡´çš„ Warning</a> ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170601-02-blog.png" alt=""></p>
<h5 id="äºŒ-nbsp-å¾…ç»­"><a href="#äºŒ-nbsp-å¾…ç»­" class="headerlink" title="äºŒ.&nbsp; å¾…ç»­"></a>äºŒ.&nbsp; å¾…ç»­</h5>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170601-00-blog.png&quot; alt=&quot;&quot;&gt;  &lt;/p&gt;
&lt;p&gt;åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ–è€…åœ¨æ‰“åŒ…ipaçš„æ—¶å€™ï¼ŒXcodeçš„ç¼–è¯‘å™¨å¤šå°‘æ€»ä¼šç»™å‡ºä¸€äº›è­¦å‘Šï¼Œè™½ç„¶çœ‹ä¼¼æ²¡å•¥å½±å“ï¼Œä¸ä¼šé˜»æ­¢ç»§ç»­ç¼–
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/categories/iOS/Objective-C/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="Xcode" scheme="http://yoursite.com/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>è®°wkWebviewè·å–ç½‘é¡µå›¾ç‰‡</title>
    <link href="http://yoursite.com/2017/05/27/wkWebview-get-html-img/"/>
    <id>http://yoursite.com/2017/05/27/wkWebview-get-html-img/</id>
    <published>2017-05-27T07:21:12.000Z</published>
    <updated>2017-07-13T03:06:11.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170527-00-blog.png" alt=""></p>
<p>å‰æ®µæ—¶é—´æœ‰ä¸ªéœ€æ±‚ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰äº›bannerå’Œèµ„è®¯åˆ—è¡¨ï¼Œç‚¹å¼€æ˜¯ç½‘é¡µæµè§ˆå™¨ï¼Œå¤§éƒ¨åˆ†æ˜¯å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« é“¾æ¥ï¼Œè¿˜æœ‰ä¸€äº›è‡ªå·±çš„æ´»åŠ¨æŠ¥åç½‘é¡µï¼Œéœ€è¦å®ç°ç±»ä¼¼å¾®ä¿¡å…¬ä¼—å·ç½‘é¡µçš„å›¾ç‰‡ç‚¹å‡»å¯æŸ¥çœ‹åŠŸèƒ½ ã€‚å› ä¸ºé¡¹ç›®å·²ç»æœ€ä½æ”¯æŒåˆ° iOS 8ï¼Œæ‰€ä»¥å…¨æ›¿æ¢æˆ <a href="https://developer.apple.com/reference/webkit/wkwebview" target="_blank" rel="external"><strong>wkWebview</strong></a> ç»„ä»¶äº†ï¼Œè¿™é‡Œè®°å½•ä¸‹ä¸€äº›é‡åˆ°çš„å‘ ã€‚</p>
<h5 id="æ–¹æ¡ˆä¸€ï¼š"><a href="#æ–¹æ¡ˆä¸€ï¼š" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼š"></a>æ–¹æ¡ˆä¸€ï¼š</h5><p>å› ä¸ºæ¶‰åŠåˆ° <code>native</code> å’Œ <code>js</code> çš„äº¤äº’ï¼Œä¸€å¼€å§‹æ˜¯æƒ³è®©å‰ç«¯åŒäº‹é‚£è¾¹ç»™ç½‘é¡µä¸­çš„å›¾ç‰‡åŠ ç‚¹å‡»äº‹ä»¶ï¼ŒiOS è¿™è¾¹æ³¨å†Œä¸‹çº¦å®šçš„æ–¹æ³•ï¼Œä½†æ˜¯å› ä¸ºæœ‰äº›æ˜¯å¾®ä¿¡çš„å…¬ä¼—å·æ–‡ç« ï¼Œæ‰€ä»¥æ²¡åŠæ³•ï¼Œä¸ºäº†ç»Ÿä¸€è¿˜æ˜¯éœ€è¦åœ¨ iOS è¿™è¾¹æ³¨å…¥ <code>js</code> ä»£ç å»éå† DOM æ ‘ä¸­çš„ img æ ‡ç­¾ï¼Œç„¶åç»™æ¯ä¸ª img æ ‡ç­¾åŠ ä¸Šç‚¹å‡»äº‹ä»¶ ã€‚</p>
<p>å‚è€ƒä¸‹é¢ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä½¿ç”¨åˆ‡å‰²è·³è½¬ <code>url</code> æ–¹æ³•ï¼›å› ä¸ºä½¿ç”¨çš„æ˜¯ <code>wkWebview</code>ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ– <code>wkWebview</code> çš„æ—¶å€™å°±æ³¨å…¥ <code>js</code> ä»£ç ï¼Œéå† img æ ‡ç­¾ï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶æ‹¿åˆ°è¢«ç‚¹å‡»å›¾ç‰‡çš„ç´¢å¼• ã€‚å½“ç„¶æƒ³è¦æ‹¿åˆ°å¯¹åº”å›¾ç‰‡çš„ src ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘åªéœ€è¦è¢«ç‚¹å‡»çš„å›¾ç‰‡ç´¢å¼•å°±å¥½äº† ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *nativejsSource;</div><div class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">	<span class="comment">/// ä»bundleä¸­åŠ è½½jsèµ„æºæ–‡ä»¶ï¼Œè½¬æˆocå­—ç¬¦ä¸²</span></div><div class="line">	nativejsSource = [<span class="built_in">NSString</span> stringWithContentsOfFile:[[<span class="built_in">NSBundle</span> mainBundle] pathForResource:<span class="string">@"didImageIndex"</span> ofType:<span class="string">@"js"</span>] encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>]; </div><div class="line">&#125;);</div><div class="line"><span class="comment">/// æ³¨å…¥jsè„šæœ¬ä»£ç </span></div><div class="line">[userContentController addUserScript:[[<span class="built_in">WKUserScript</span> alloc] initWithSource:nativejsSource injectionTime:<span class="built_in">WKUserScriptInjectionTimeAtDocumentStart</span> forMainFrameOnly:<span class="literal">YES</span>]];</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// js æ–¹æ³•ï¼Œè·å–è¢«ç‚¹å‡»çš„å›¾ç‰‡ç´¢å¼•</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImageIndex</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> objs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; objs.length; i++) &#123;</div><div class="line">        objs[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">                           <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                           location.href = <span class="string">"jscallbackoc://didImageIndex_*"</span>+i;</div><div class="line">                           &#125;</div><div class="line">                           &#125;)(i)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> objs.length;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®ç°ä¸‹é¢çš„ <code>WKNavigationDelegate</code> ä»£ç†æ–¹æ³•ï¼Œæ‹¦æˆªè¯·æ±‚çš„ <code>url</code>ï¼Œç„¶ååˆ‡å‰²å¤„ç† ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *  åœ¨å‘é€è¯·æ±‚ä¹‹å‰ï¼Œå†³å®šæ˜¯å¦å…è®¸æˆ–å–æ¶ˆå¯¼èˆª</div><div class="line"> *  </div><div class="line"> *  @param webView          è°ƒç”¨å§”æ‰˜æ–¹æ³•çš„Webè§†å›¾</div><div class="line"> *  @param navigationAction æœ‰å…³è§¦å‘å¯¼èˆªè¯·æ±‚çš„åŠ¨ä½œçš„æè¿°æ€§ä¿¡æ¯</div><div class="line"> *  @param decisionHandler  å½“ä½ çš„åº”ç”¨ç¨‹åºå†³å®šæ˜¯å…è®¸è¿˜æ˜¯å–æ¶ˆå¯¼èˆªæ—¶ï¼Œè¦è°ƒç”¨çš„å—ã€‚ è¯¥å—æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯æšä¸¾ç±»å‹WKNavigationActionPolicyçš„å¸¸é‡ä¹‹ä¸€ã€‚</div><div class="line"> */</div><div class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView decidePolicyForNavigationAction:(<span class="built_in">WKNavigationAction</span> *)navigationAction decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKNavigationActionPolicy</span>))decisionHandler &#123;</div><div class="line">    <span class="keyword">if</span> ([[[navigationAction.request URL] absoluteString] hasPrefix:<span class="string">@"jscallbackoc://"</span>]) &#123;</div><div class="line">        [<span class="keyword">self</span> performJSMethodWithURL:[[navigationAction.request URL] absoluteString] protocolName:<span class="string">@"jscallbackoc://"</span> performViewController:<span class="keyword">self</span>];</div><div class="line">    &#125;</div><div class="line">    decisionHandler(<span class="built_in">WKNavigationActionPolicyAllow</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¤„ç†æ‹¦æˆªçš„ <code>url</code> å­—ç¬¦ä¸² ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// æ•è·åˆ°æ‹¦æˆªçš„urlï¼Œè¿›è¡Œåˆ‡å‰²å¤„ç†ï¼Œæœ€ç»ˆæ‹¿åˆ°è¢«ç‚¹å‡»å›¾ç‰‡çš„ index</span></div><div class="line">- (<span class="keyword">void</span>)performJSMethodWithURL:(<span class="built_in">NSString</span> *)url protocolName:(<span class="built_in">NSString</span> *)name performViewController:(<span class="built_in">UIViewController</span> *)viewController &#123;</div><div class="line">    <span class="built_in">NSString</span> *path = [url substringFromIndex:name.length];</div><div class="line">    <span class="built_in">NSArray</span> *subPaths = [path componentsSeparatedByString:<span class="string">@"*"</span>];</div><div class="line">    <span class="built_in">NSString</span> *methodName = [[subPaths firstObject] stringByReplacingOccurrencesOfString:<span class="string">@"_"</span> withString:<span class="string">@":"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *params = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">if</span> (subPaths.count == <span class="number">2</span>) &#123;</div><div class="line">        params = [[subPaths lastObject] componentsSeparatedByString:<span class="string">@"$"</span>];</div><div class="line">    &#125;</div><div class="line">    [viewController performSelector:<span class="built_in">NSSelectorFromString</span>(methodName) withObjects:params];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - private method</span></div><div class="line">- (<span class="keyword">id</span>)performSelector:(SEL)selector withObjects:(<span class="built_in">NSArray</span> *)objects &#123;</div><div class="line">    </div><div class="line">    <span class="comment">/// æ–¹æ³•ç­¾å(å¯¹æ–¹æ³•çš„æè¿°)</span></div><div class="line">    <span class="built_in">NSMethodSignature</span> *signature = [[<span class="keyword">self</span> <span class="keyword">class</span>] instanceMethodSignatureForSelector:selector];</div><div class="line">    <span class="keyword">if</span> (!signature) &#123;</div><div class="line">        [<span class="built_in">NSException</span> raise:<span class="string">@"ä¸¥é‡é”™è¯¯"</span> format:<span class="string">@"(%@)æ–¹æ³•æ‰¾ä¸åˆ°"</span>, <span class="built_in">NSStringFromSelector</span>(selector)];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/* NSInvocation : åˆ©ç”¨ä¸€ä¸ªNSInvocationå¯¹è±¡é€šè¿‡è°ƒç”¨æ–¹æ³•ç­¾åæ¥å®ç°å¯¹æ–¹æ³•çš„è°ƒç”¨ï¼ˆæ–¹æ³•è°ƒç”¨è€…ã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ã€æ–¹æ³•è¿”å›å€¼ï¼‰</span></div><div class="line">     å¦‚æœä»…ä»…å®Œæˆè¿™æ­¥ï¼Œå’Œæ™®é€šçš„å‡½æ•°è°ƒç”¨æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯å…³é”®åœ¨äºNSInvocationå¯ä»¥å¯¹ä¼ é€’è¿›æ¥çš„selectorè¿›è¡ŒåŒ…è£…ï¼Œå®ç°å¯ä»¥ä¼ é€’æ— é™å¤šä¸ªå‚æ•°</div><div class="line">     æ™®é€šçš„æ–¹æ³•è°ƒç”¨æ¯”å¦‚: [self performSelector:&lt;#(SEL)#&gt; withObject:&lt;#(id)#&gt; withObject:&lt;#(id)#&gt;] é¡¶å¤šåªèƒ½ä¼ é€’ä¸¤ä¸ªå‚æ•°ç»™selector */</div><div class="line">    </div><div class="line">    <span class="built_in">NSInvocation</span> *invocation = [<span class="built_in">NSInvocation</span> invocationWithMethodSignature:signature];</div><div class="line">    <span class="comment">/// è°ƒç”¨è€…æ˜¯è‡ªå·±</span></div><div class="line">    [invocation setTarget:<span class="keyword">self</span>];</div><div class="line">    <span class="comment">/// è°ƒç”¨çš„æ–¹æ³•æ˜¯selector</span></div><div class="line">    [invocation setSelector:selector];</div><div class="line">    </div><div class="line">    <span class="comment">/// è®¾ç½®å‚æ•°ï¼Œå¯ä»¥ä¼ é€’æ— é™ä¸ªå‚æ•°</span></div><div class="line">    <span class="comment">/// é™¤selfã€_cmdä»¥å¤–çš„å‚æ•°ä¸ªæ•°</span></div><div class="line">    <span class="built_in">NSInteger</span> paramsCount = signature.numberOfArguments - <span class="number">2</span>;</div><div class="line">    <span class="comment">/// é˜²æ­¢å‡½æ•°æœ‰å‚æ•°ä½†æ˜¯ä¸ä¼ é€’å‚æ•°æ—¶ï¼Œå¯¼è‡´å´©æºƒ</span></div><div class="line">    paramsCount = MIN(paramsCount, objects.count);</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; paramsCount; i++) &#123;</div><div class="line">        <span class="keyword">id</span> object = objects[i];</div><div class="line">        <span class="keyword">if</span> ([object isKindOfClass:[<span class="built_in">NSNull</span> <span class="keyword">class</span>]])</div><div class="line">            <span class="keyword">continue</span>; <span class="comment">/// å¦‚æœä¼ é€’çš„å‚æ•°ä¸ºnullï¼Œå°±ä¸å¤„ç†äº†</span></div><div class="line">        </div><div class="line">        <span class="comment">/// +2æ˜¯å› ä¸ºç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°é»˜è®¤æ˜¯selfå’Œ_cmd</span></div><div class="line">        [invocation setArgument:&amp;object atIndex:i + <span class="number">2</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/// è°ƒç”¨æ–¹æ³•</span></div><div class="line">    [invocation invoke];</div><div class="line">    <span class="comment">/// è·å–è¿”å›å€¼</span></div><div class="line">    <span class="keyword">id</span> returnValue = <span class="literal">nil</span>;</div><div class="line">    <span class="comment">/// æœ‰è¿”å›å€¼ç±»å‹ï¼Œæ‰å»è·å¾—è¿”å›å€¼</span></div><div class="line">    <span class="keyword">if</span> (signature.methodReturnLength) &#123;</div><div class="line">        [invocation getReturnValue:&amp;returnValue];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> returnValue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åå®ç°å›¾ç‰‡ç‚¹å‡»æ–¹æ³•ï¼Œè·å–åˆ°å›¾ç‰‡ç´¢å¼• ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)didImageIndex:(<span class="built_in">NSString</span> *)index &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%zd"</span>,[index integerValue]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šåªæ˜¯å®ç°äº†ç‚¹å‡»å›¾ç‰‡æ‹¿åˆ°å›¾ç‰‡ç´¢å¼•ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ‹¿åˆ°å›¾ç‰‡çš„ <code>url</code>ï¼Œè¦æƒ³å®ç°ç½‘é¡µå¤šå›¾æµè§ˆæ•ˆæœï¼Œè‚¯å®šä¸èƒ½ç‚¹ä¸€å¼ æ‹¿ä¸€å¼ ï¼Œé‚£å°±è¦æƒ³åŠæ³•ä¸€æ¬¡æ‹¿åˆ°ç½‘é¡µä¸­æ‰€æœ‰å›¾ç‰‡çš„ <code>url</code> å­˜åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå½“ç‚¹å‡»å›¾ç‰‡çš„æ—¶å€™ä»æ•°ç»„ä¸­å–åˆ°å¯¹åº”ç‚¹å‡»ç´¢å¼•çš„å›¾ç‰‡æ¥å±•ç¤ºå°±OKäº†ã€‚</p>
<p>è¿™é‡Œå‚è€ƒä¸‹é¢çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œç›´æ¥ä½¿ç”¨Googleå¼€æºçš„HTMLè§£ææ¡†æ¶ <a href="https://github.com/tracy-e/OCGumbo" target="_blank" rel="external">OCGumbo</a>ï¼ŒåŸºäºCè¯­è¨€çš„å°è£…ï¼Œé¢å‘å¯¹è±¡çš„OCè¯­æ³•ï¼Œä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œç±»ä¼¼çº¦æŸæ¡†æ¶ <a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a> çš„é“¾å¼è¯­å¥æŸ¥æ‰¾å±æ€§èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ–‡ç« ä»‹ç»å¾ˆè¯¦ç»†ï¼Œè¿™é‡Œå°±ä¸å†å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">[[[<span class="built_in">NSURLSession</span> sessionWithConfiguration:[<span class="built_in">NSURLSessionConfiguration</span> defaultSessionConfiguration]] dataTaskWithRequest:[<span class="built_in">NSMutableURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="keyword">self</span>.URLString]] completionHandler:^(<span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</div><div class="line">              <span class="built_in">NSHTTPURLResponse</span> *httpResponse = (<span class="built_in">NSHTTPURLResponse</span> *)response;</div><div class="line">              </div><div class="line">              <span class="keyword">if</span> (httpResponse.statusCode == <span class="number">200</span>) &#123;</div><div class="line">                  </div><div class="line">                  <span class="keyword">if</span> (<span class="keyword">self</span>.imageSrcArray.count) &#123;</div><div class="line">                      [<span class="keyword">self</span>.imageSrcArray removeAllObjects];</div><div class="line">                  &#125;</div><div class="line">                  <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</div><div class="line">                  <span class="comment">/// å°†ç½‘é¡µURLè½¬æ¢æˆHTMLå­—ç¬¦ä¸²</span></div><div class="line">                  <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="keyword">self</span>.URLString];</div><div class="line">                  <span class="built_in">NSString</span> *htmlStr = [<span class="built_in">NSString</span> stringWithContentsOfURL:url encoding:<span class="built_in">NSUTF8StringEncoding</span> error:&amp;error];</div><div class="line">                  OCGumboDocument *document = [[OCGumboDocument alloc] initWithHTMLString:htmlStr];</div><div class="line">                  </div><div class="line">                  <span class="keyword">if</span> (document.Query(<span class="string">@"body"</span>)) &#123;</div><div class="line">                      <span class="keyword">if</span> (document.Query(<span class="string">@"body"</span>).find(<span class="string">@"img"</span>)) &#123;</div><div class="line">                          <span class="comment">/// find(@"img") æœ›åçŸ¥æ„ï¼Œæ‰¾åˆ°'img'æ ‡ç­¾ï¼Œè¿™æ˜¯ä¸€ä¸ª OCGumboElement å¯¹è±¡æ•°ç»„</span></div><div class="line">                          <span class="keyword">for</span> (OCGumboElement *element <span class="keyword">in</span> document.Query(<span class="string">@"body"</span>).find(<span class="string">@"img"</span>)) &#123;</div><div class="line">                              <span class="keyword">if</span> (element.attr(<span class="string">@"src"</span>)) &#123;</div><div class="line">                              	  <span class="comment">/// æ‰¾åˆ°'src'èŠ‚ç‚¹æ·»åŠ åˆ°æ•°ç»„</span></div><div class="line">                                  [<span class="keyword">self</span>.imageSrcArray addObject:element.attr(<span class="string">@"src"</span>)];</div><div class="line">                              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.attr(<span class="string">@"data-src"</span>)) &#123;</div><div class="line">                              	  <span class="comment">/// å¾®ä¿¡çš„æ˜¯å˜æ€çš„'data-src'èŠ‚ç‚¹</span></div><div class="line">                                  [<span class="keyword">self</span>.imageSrcArray addObject:element.attr(<span class="string">@"data-src"</span>)];</div><div class="line">                              &#125;</div><div class="line">                          &#125;</div><div class="line">                      &#125;</div><div class="line">                  &#125;</div><div class="line">              &#125;</div><div class="line">          &#125;] resume];</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä½¿ç”¨ <code>NSURLSession</code> æ·»åŠ äº†ä¸€ä¸ªè¯·æ±‚åˆ¤æ–­ï¼Œæ˜¯å› ä¸ºå¦‚æœç½‘é¡µè¯·æ±‚é”™è¯¯ï¼Œæ¯”å¦‚404ï¼Œ500ç­‰çŠ¶æ€æ—¶ï¼Œé¿å…å›  <code>OCGumbo</code> éå†DOMæ ‘æ—¶æ‰¾ä¸åˆ°èŠ‚ç‚¹è€Œå¯¼è‡´Crash ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œé¡¹ç›®ä¸Šäº†ä¸€ä¸ªæŠ¥åæ´»åŠ¨ï¼Œåå°é‚£è¾¹debugæ—¶å‘ç°iOSè¿™è¾¹ç‚¹å‡»æŠ¥åè¿ç»­å‘äº†ä¸‰æ¬¡è¯·æ±‚ï¼Œè€Œå®‰å“é‚£è¾¹ä¸ä¼šï¼Œé‚£ä¹ˆé—®é¢˜çœ‹æ¥æ˜¯å‡ºåœ¨iOSè¿™è¾¹çš„ä»£ç  ã€‚ç»è¿‡å’Œåå°é‚£è¾¹çš„è°ƒè¯•å‘ç°æ‰€æœ‰çš„ç½‘é¡µè¯·æ±‚éƒ½ä¼šè¿›ä¸‰æ¬¡æ–­ç‚¹ï¼Œäºæ˜¯å†™äº†ä¸ªç®€å•çš„Demoæµ‹è¯•åªåŠ è½½ç½‘é¡µï¼Œå‘ç°å¹¶ä¸ä¼šå‘åå°å‘é€ä¸‰æ¬¡è¯·æ±‚[æ‚è„¸]ã€‚è¿™æ ·ä¸€æ¥å¤§æ¦‚çŸ¥é“äº†é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Œä¸€å®šæ˜¯å’Œè·å–ç½‘é¡µå›¾ç‰‡æœ‰å…³ï¼Œä½¿ç”¨ç®€å•ç²—æš´çš„æ³¨é‡Šå¤§æ³•ï¼ŒæŠŠä¸Šé¢æœ‰å…³ä»£ç é€æ­¥æ³¨é‡Šæ‰ï¼Œå‘ç°æ˜¯ <code>OCGumbo</code> å‡ºäº†é—®é¢˜ï¼ˆè¯¯ä¼šäº†ï¼Œå…¶å®å¹¶ä¸æ˜¯[å§”å±ˆ]ï¼‰ã€‚ç›´åˆ°æœ€åæ‰¾å‡ºçœŸç›¸ï¼š</p>
<p>ç¬¬ä¸€æ¬¡ï¼š<code>wkWebview</code> æ­£å¸¸åŠ è½½ç½‘é¡µè¯·æ±‚ï¼›<br>ç¬¬äºŒæ¬¡ï¼šä½¿ç”¨ <code>NSURLSession</code> å‘äº†ä¸€æ¬¡è¯·æ±‚ï¼Œç”¨äºåˆ¤æ–­ç½‘é¡µåŠ è½½çŠ¶æ€ï¼›<br>ç¬¬ä¸‰æ¬¡ï¼šåœ¨å°†è¯·æ±‚ <code>url</code> è½¬æˆHTMLå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼šå‘åå°å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼šï¼ˆè¡¨ç¤ºç™¾æ€ä¸å¾—å…¶è§£ï¼Œä½†æ˜¯ç¡®ç¡®å®å®æ˜¯å› ä¸ºå®ƒè€Œå¤šå‘äº†ç¬¬ä¸‰æ¬¡è¯·æ±‚ï¼‰</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *htmlStr = [<span class="built_in">NSString</span> stringWithContentsOfURL:url encoding:<span class="built_in">NSUTF8StringEncoding</span> error:&amp;error];</div></pre></td></tr></table></figure>
<p>åŸºäºä¸Šè¿°é—®é¢˜ï¼Œåœ¨ä¸ä½¿ç”¨ <code>NSURLSession</code> åŠ åˆ¤æ–­å’Œé€šè¿‡è½¬æ¢ <code>url</code> ä¸ºHTMLå­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œæ”¾å¼ƒäº†ä½¿ç”¨ <code>OCGumbo</code>ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨æ­£åˆ™åŒ¹é… ã€‚</p>
<h5 id="æ–¹æ¡ˆäºŒï¼š"><a href="#æ–¹æ¡ˆäºŒï¼š" class="headerlink" title="æ–¹æ¡ˆäºŒï¼š"></a>æ–¹æ¡ˆäºŒï¼š</h5><p>ä½¿ç”¨ js é€‰æ‹©å™¨ <code>getElementsByTagName()</code> æ¥è·å–ç½‘é¡µçš„HTMLå­—ç¬¦ä¸²ï¼Œå†åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é… <code>img</code> æ ‡ç­¾ï¼Œä¸Šé¢è·å–å›¾ç‰‡ç´¢å¼•çš„æ–¹æ³•è¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œä¾ç„¶æ˜¯é€šè¿‡æ³¨å…¥jsè„šæœ¬ä»£ç ï¼Œå‚è€ƒä¸‹é¢çš„åä¸‰ç¯‡æ–‡ç«  ã€‚</p>
<p>åœ¨åˆå§‹åŒ– <code>wkWebview</code> çš„æ—¶å€™ï¼Œæ³¨å…¥ä¸‹é¢çš„ <code>js</code> ä»£ç  ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *nativejsSource;</div><div class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123; </div><div class="line">     <span class="comment">/// ä»bundleä¸­åŠ è½½jsèµ„æºæ–‡ä»¶ï¼Œè½¬æˆocå­—ç¬¦ä¸²</span></div><div class="line">    nativejsSource = [<span class="built_in">NSString</span> stringWithContentsOfFile:[[<span class="built_in">NSBundle</span> mainBundle] pathForResource:<span class="string">@"ImgAddClickEvent"</span> ofType:<span class="string">@"js"</span>] encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</div><div class="line">&#125;); </div><div class="line"><span class="comment">/// æ³¨å…¥jsè„šæœ¬ä»£ç </span></div><div class="line">[userContentController addUserScript:[[<span class="built_in">WKUserScript</span> alloc] initWithSource:nativejsSource injectionTime:<span class="built_in">WKUserScriptInjectionTimeAtDocumentEnd</span> forMainFrameOnly:<span class="literal">YES</span>]];</div><div class="line"><span class="comment">/// æ·»åŠ è„šæœ¬æ¶ˆæ¯å¤„ç†</span></div><div class="line">[userContentController addScriptMessageHandler:[[YQWeakScriptMessageDelegate alloc] initWithDelegate:<span class="keyword">self</span>] name:<span class="string">@"imageDidClick"</span>];</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// è·å–æ‰€æœ‰imgæ ‡ç­¾</span></div><div class="line"><span class="keyword">var</span> imgs = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"img"</span>);</div><div class="line"></div><div class="line"><span class="comment">/// è·å–æ‰€æœ‰çš„imgUrl</span></div><div class="line"><span class="keyword">var</span> imgUrls = <span class="keyword">new</span> <span class="built_in">Array</span>();</div><div class="line"></div><div class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> y = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> width = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> height = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> img = imgs[i];</div><div class="line">    <span class="comment">/// å¦‚æœå›¾ç‰‡é“¾æ¥å­˜åœ¨</span></div><div class="line">    <span class="keyword">if</span> (img.src || img.getAttribute(<span class="string">'data-src'</span>)) &#123;</div><div class="line">        <span class="comment">/// æ·»åŠ åˆ°å›¾ç‰‡é“¾æ¥æ•°ç»„ä¸­</span></div><div class="line">        imgUrls.push(img.src || img.getAttribute(<span class="string">'data-src'</span>));</div><div class="line">        <span class="comment">/// å¦‚æœå›¾ç‰‡æ²¡æœ‰é»˜è®¤çš„onclickäº‹ä»¶ï¼Œä¸”çˆ¶å…ƒç´ ä¸æ˜¯aæ ‡ç­¾ï¼Œåˆ™æ·»åŠ onclickäº‹ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ—¶ï¼ŒæŠŠå›¾ç‰‡é“¾æ¥å›ä¼ ç»™Native</span></div><div class="line">        <span class="keyword">if</span> (!img.onclick &amp;&amp; img.parentElement.tagName !== <span class="string">"A"</span>) &#123;</div><div class="line">            <span class="comment">/// ç»™å›¾ç‰‡æ·»åŠ ä¸‹æ ‡çš„å±æ€§</span></div><div class="line">            img.index = i;      <span class="comment">/// è®°å½•ä¸‹æ ‡</span></div><div class="line">            <span class="comment">/// æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶ä¸”å›ä¼ é€‰ä¸­çš„å›¾ç‰‡é“¾æ¥ã€ä¸‹æ ‡ã€å±å¹•ä¸Šçš„ä½ç½®ã€å…¨éƒ¨çš„å›¾ç‰‡æ•°ç»„ç­‰</span></div><div class="line">            img.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                x = <span class="keyword">this</span>.getBoundingClientRect().left;</div><div class="line">                y = <span class="keyword">this</span>.getBoundingClientRect().top;</div><div class="line">                x = x + <span class="built_in">document</span>.documentElement.scrollLeft;</div><div class="line">                y = y + <span class="built_in">document</span>.documentElement.scrollTop;</div><div class="line">                width = <span class="keyword">this</span>.width;</div><div class="line">                height = <span class="keyword">this</span>.height;</div><div class="line">                <span class="keyword">var</span> imgInfo = &#123;</div><div class="line">                <span class="attr">imgUrl</span>: <span class="keyword">this</span>.src || <span class="keyword">this</span>.getAttribute(<span class="string">'data-src'</span>),</div><div class="line">                <span class="attr">x</span>: x,</div><div class="line">                <span class="attr">y</span>: y,</div><div class="line">                <span class="attr">width</span>: width,</div><div class="line">                <span class="attr">height</span>: height,</div><div class="line">                <span class="attr">index</span>: <span class="keyword">this</span>.index,</div><div class="line">                <span class="attr">imgUrls</span>: imgUrls</div><div class="line">                &#125;;</div><div class="line">                <span class="comment">/// UIWebViewä½¿ç”¨</span></div><div class="line">                h5ImageDidClick(imgInfo);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">h5ImageDidClick</span> (<span class="params">info</span>) </span>&#123;</div><div class="line">    <span class="comment">/// WKWebViewä½¿ç”¨</span></div><div class="line">    <span class="built_in">window</span>.webkit.messageHandlers.imageDidClick.postMessage(info);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®ç° <code>WKScriptMessageHandler</code> ä»£ç†æ–¹æ³•ï¼Œå½“ç‚¹å‡»å›¾ç‰‡çš„æ—¶å€™ä¼šè·å–åˆ°è¢«ç‚¹å‡»çš„å›¾ç‰‡çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ srcï¼Œsizeï¼Œindexç­‰ï¼Œè¿˜æœ‰ç½‘é¡µçš„å›¾ç‰‡æ•°ç»„ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - WKScriptMessageHandler</span></div><div class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message &#123;</div><div class="line">    <span class="keyword">if</span> ([message.name isEqualToString:<span class="string">@"imageDidClick"</span>]) &#123;</div><div class="line">        <span class="built_in">NSDictionary</span> *dict = message.body;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dict);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†ï¼Œä¸Šé¢è¿™ç§åšæ³•æ˜æ˜¾æ˜¯ä¸å¤ªåˆç†çš„ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨æ¯æ¬¡ç‚¹å‡»éƒ½å»è·å–æ‰€æœ‰çš„å›¾ç‰‡srcï¼Œè¿™æ ·åšå®åœ¨å¤ªæµªè´¹æ€§èƒ½ ã€‚æ‰€ä»¥æ­£ç¡®åšæ³•åº”è¯¥æ˜¯åœ¨å½“ç½‘é¡µåŠ è½½å®Œæˆæ—¶å»è·å– ã€‚</p>
<p>æˆ‘ä»¬å®ç° <code>WKNavigationDelegate</code> ä»£ç†æ–¹æ³•ï¼Œå½“ç½‘é¡µåŠ è½½å®Œæˆæ—¶ï¼Œä½¿ç”¨ js æ–¹æ³•é€‰æ‹©å™¨è·å–ç½‘é¡µHTMLå­—ç¬¦ä¸²ï¼Œåœ¨ <code>getImgWithHtmlStr:callback:</code> è‡ªå®šä¹‰æ–¹æ³•ä¸­ä½¿ç”¨æ­£åˆ™åŒ¹é…ç½‘é¡µå›¾ç‰‡ <code>img</code> æ ‡ç­¾ï¼Œå®Œæˆåå›è°ƒï¼ˆæˆ‘è¿™é‡Œå›è°ƒåªæ˜¯è¾“å‡º logï¼‰ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFinishNavigation:(<span class="built_in">WKNavigation</span> *)navigation &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"webView did finish"</span>);</div><div class="line">    <span class="built_in">NSString</span> *jsToGetHTMLSource = <span class="string">@"document.getElementsByTagName('body')[0].innerHTML"</span>;</div><div class="line">    [webView evaluateJavaScript:jsToGetHTMLSource completionHandler:^(<span class="keyword">id</span> _Nullable HTMLsource, <span class="built_in">NSError</span> * _Nullable error) &#123;</div><div class="line">        [<span class="keyword">self</span> getImgWithHtmlStr:(<span class="built_in">NSString</span> *)HTMLsource callback:^(<span class="keyword">id</span> result) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,result);</div><div class="line">        &#125;];</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­£åˆ™åŒ¹é… <code>img</code> æ ‡ç­¾ï¼Œæ–¹æ³•å®ç°ï¼šå› ä¸ºæ˜¯è€—æ—¶æ“ä½œï¼Œä¸‹é¢ä½¿ç”¨äº† <code>GCD</code> çš„å¼‚æ­¥é˜Ÿåˆ—ä»»åŠ¡ç»„ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - get all image url</span></div><div class="line">- (<span class="keyword">void</span>)getImgWithHtmlStr:(<span class="built_in">NSString</span> *)htmlStr callback:(<span class="keyword">void</span> (^)(<span class="keyword">id</span>))callback &#123;</div><div class="line">    <span class="keyword">if</span> (!htmlStr || !htmlStr.length) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">self</span> group_async_queue:^&#123;</div><div class="line">        <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</div><div class="line">        <span class="comment">/// @"&lt;img[^&gt;]+?data-src=[\"']?([^&gt;'\"]+)[\"']?"</span></div><div class="line">        <span class="built_in">NSString</span> *pattern = <span class="string">@"src=[\"']?([^&gt;'\"]+)(jpg|png|gif|jpeg)[\"']?"</span>;</div><div class="line">        <span class="comment">/// NSString *htmlStr = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&amp;error];</span></div><div class="line">        <span class="built_in">NSRegularExpression</span> *regular = [<span class="built_in">NSRegularExpression</span> regularExpressionWithPattern:pattern options:<span class="built_in">NSRegularExpressionCaseInsensitive</span> error:&amp;error];</div><div class="line">        </div><div class="line">        <span class="keyword">if</span> (error) <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">self</span>.imageSrcArray.count) &#123;</div><div class="line">            [<span class="keyword">self</span>.imageSrcArray removeAllObjects];</div><div class="line">        &#125;</div><div class="line">        [regular enumerateMatchesInString:htmlStr options:<span class="built_in">NSMatchingReportCompletion</span> range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, htmlStr.length) usingBlock:^(<span class="built_in">NSTextCheckingResult</span> * _Nullable result, <span class="built_in">NSMatchingFlags</span> flags, <span class="built_in">BOOL</span> * _Nonnull stop) &#123; </div><div class="line">            <span class="built_in">NSString</span> *imgStr = [htmlStr substringWithRange:result.range]; </div><div class="line">            <span class="keyword">if</span> (imgStr.length) &#123; </div><div class="line">                imgStr = [imgStr substringWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">5</span>, imgStr.length - <span class="number">6</span>)]; </div><div class="line">                [<span class="keyword">self</span>.imageSrcArray addObject:imgStr];</div><div class="line">            &#125;</div><div class="line">        &#125;];</div><div class="line">    &#125; complete:^&#123;</div><div class="line">        <span class="keyword">if</span> (callback) callback(<span class="string">@"get all image url success!"</span>);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>GCD</code> å¼‚æ­¥é˜Ÿåˆ—ç»„æ–¹æ³•å°è£…ï¼Œé¿å…è€—æ—¶æ“ä½œå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)group_async_queue:(<span class="keyword">void</span> (^)())queue complete:(<span class="keyword">void</span> (^)())block &#123;</div><div class="line">    <span class="comment">/// åˆ›å»ºé˜Ÿåˆ—ç»„</span></div><div class="line">    dispatch_group_t group = dispatch_group_create();</div><div class="line">    <span class="comment">/// è¿›å…¥é˜Ÿåˆ—ç»„</span></div><div class="line">    dispatch_group_enter(group);</div><div class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_global_queue(<span class="number">0</span>, <span class="number">0</span>), ^&#123;</div><div class="line">        <span class="comment">/// å¼‚æ­¥æ‰§è¡Œä»»åŠ¡</span></div><div class="line">        <span class="keyword">if</span> (queue) queue();</div><div class="line">        <span class="comment">/// ç¦»å¼€é˜Ÿåˆ—ç»„</span></div><div class="line">        dispatch_group_leave(group);</div><div class="line">    &#125;); </div><div class="line">    <span class="comment">/// é˜Ÿåˆ—ç»„æ‰§è¡Œå®Œæ¯•, é€šçŸ¥ä¸»çº¿ç¨‹</span></div><div class="line">    dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</div><div class="line">        <span class="keyword">if</span> (block) block();</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œæœ€ç»ˆä½¿ç”¨ æ–¹æ¡ˆäºŒ è§£å†³äº†é‡å¤è¯·æ±‚åå°æœåŠ¡å™¨çš„é—®é¢˜ ã€‚</p>
<p><strong> å‚è€ƒæ–‡ç« ï¼š</strong><br><a href="http://www.jianshu.com/p/a388ec39e37a" target="_blank" rel="external">UIWebViewä¿å­˜å›¾ç‰‡</a><br><a href="http://www.jianshu.com/p/029a5ef4e86a" target="_blank" rel="external">HTMLè§£æä¹‹Gumbom(iOS)</a><br><a href="http://www.jianshu.com/p/ac45d99cf912" target="_blank" rel="external">iOSä¸­UIWebViewä¸WKWebViewã€JavaScriptä¸OCäº¤äº’ã€Cookieç®¡ç†çœ‹æˆ‘å°±å¤Ÿï¼ˆä¸Šï¼‰</a><br><a href="http://www.jianshu.com/p/870dba42ec15" target="_blank" rel="external">iOSä¸­UIWebViewä¸WKWebViewã€JavaScriptä¸OCäº¤äº’ã€Cookieç®¡ç†çœ‹æˆ‘å°±å¤Ÿï¼ˆä¸­ï¼‰</a><br><a href="http://www.jianshu.com/p/52668d5b2e68" target="_blank" rel="external">iOSä¸­UIWebViewä¸WKWebViewã€JavaScriptä¸OCäº¤äº’ã€Cookieç®¡ç†çœ‹æˆ‘å°±å¤Ÿï¼ˆä¸‹ï¼‰</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170527-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‰æ®µæ—¶é—´æœ‰ä¸ªéœ€æ±‚ï¼Œå› ä¸ºé¡¹ç›®ä¸­æœ‰äº›bannerå’Œèµ„è®¯åˆ—è¡¨ï¼Œç‚¹å¼€æ˜¯ç½‘é¡µæµè§ˆå™¨ï¼Œå¤§éƒ¨åˆ†æ˜¯å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« é“¾æ¥ï¼Œè¿˜æœ‰ä¸€äº›è‡ª
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/categories/iOS/Objective-C/"/>
    
    
      <category term="wkWebview" scheme="http://yoursite.com/tags/wkWebview/"/>
    
      <category term="HTML" scheme="http://yoursite.com/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>Hexo ä¸»é¢˜ä¹‹ Hueman</title>
    <link href="http://yoursite.com/2017/05/19/hexo-themes-hueman/"/>
    <id>http://yoursite.com/2017/05/19/hexo-themes-hueman/</id>
    <published>2017-05-19T03:06:54.000Z</published>
    <updated>2017-09-23T01:33:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170519-00-blog.jpeg" alt=""></p>
<p>æ‰“è‡ªæ­å»ºå¥½åšå®¢å¼€å§‹ï¼Œé»˜è®¤çš„<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">Nextä¸»é¢˜</a>å®åœ¨ä¸è¶³ä»¥æ»¡è¶³æˆ‘çš„å®¡ç¾è§‚(à²¥_à²¥)å‘€ï¼Œâ€¦å¿…é¡»ï¼ˆæœæ–­ï¼‰æŠ˜è…¾ï¼å“—å•¦å•¦ï¼Œç›´å¥”<a href="https://hexo.io/themes/" target="_blank" rel="external">Hexoä¸»é¢˜åº“</a>ï¼Œæ— å¥ˆé€‰æ‹©å›°éš¾ç—‡ï¼ŒåƒæŒ‘ä¸‡é€‰æœ€ç»ˆè§‰å¾—<a href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="external">Hunmanä¸»é¢˜</a>æ¯”è¾ƒç¬¦åˆæˆ‘çš„Style~~ å¥½äº†ï¼Œæœ¬æ–‡å°±æ¥ç»†è®²æ›´æ¢Huemanä¸»é¢˜çš„æ„‰ï¼ˆå¿ƒï¼‰å¿«ï¼ˆå¡ï¼‰è¿‡ç¨‹ï¼Œä¸šä½™æ—¶é—´æ–­æ–­ç»­ç»­çš„å¼„äº†å¥½ä¹…å‘¢ ã€‚</p>
<p>ä¸Šèœï¼šå…ˆæ¥ä¸€ä»½<a href="https://github.com/ppoffice/hexo-theme-hueman/wiki" target="_blank" rel="external"><strong><em>Huemanä¸»é¢˜æ–‡æ¡£</em></strong></a>ï¼Œå®¢å®˜è¯·æ…¢çœ‹ï¼Œæœ¬æ–‡æ‰€å†™å¤§éƒ¨åˆ†åœ¨æ–‡æ¡£ä¹Ÿèƒ½æ‰¾åˆ° ã€‚</p>
<hr>
<h5 id="ä¸€-nbsp-ä¸‹è½½ï¼ˆCloneï¼‰ä¸»é¢˜åˆ°æœ¬åœ°"><a href="#ä¸€-nbsp-ä¸‹è½½ï¼ˆCloneï¼‰ä¸»é¢˜åˆ°æœ¬åœ°" class="headerlink" title="ä¸€. &nbsp;ä¸‹è½½ï¼ˆCloneï¼‰ä¸»é¢˜åˆ°æœ¬åœ°"></a>ä¸€. &nbsp;ä¸‹è½½ï¼ˆ<strong>Clone</strong>ï¼‰ä¸»é¢˜åˆ°æœ¬åœ°</h5><p>ä½¿ç”¨ä»¥ä¸‹ä»»ä¸€å‘½ä»¤Cloneåˆ°æœ¬åœ° <strong>../themes</strong> ç›®å½•ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/// Clone with SSH</div><div class="line">$ git clone git@github.com:ppoffice/hexo-theme-hueman.git</div><div class="line"></div><div class="line">/// Clone with HTTPS</div><div class="line">$ git clone https://github.com/ppoffice/hexo-theme-hueman.git</div></pre></td></tr></table></figure></p>
<p>Clone ä¸‹æ¥çš„ä¸»é¢˜ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ _config.yml	# ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ä¿®æ”¹æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€é‡å¯æœåŠ¡å™¨ï¼›</div><div class="line">â”œâ”€â”€ languages	# è¯­è¨€æ–‡ä»¶å¤¹ï¼Œè‹¥è¦è®¾ç½®ä¸»é¢˜è¯­è¨€ï¼Œä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼›</div><div class="line">â”œâ”€â”€ layout	# å¸ƒå±€æ–‡ä»¶å¤¹ã€‚ç”¨äºå­˜æ”¾ä¸»é¢˜çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå†³å®šäº†ç½‘ç«™å†…å®¹çš„å‘ˆç°æ–¹å¼ï¼›</div><div class="line">â”œâ”€â”€ scripts	# è„šæœ¬æ–‡ä»¶å¤¹ã€‚åœ¨å¯åŠ¨æ—¶ï¼ŒHexo ä¼šè½½å…¥æ­¤æ–‡ä»¶å¤¹å†…çš„ JavaScript æ–‡ä»¶ï¼›</div><div class="line">â””â”€â”€ source	# èµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤äº†æ¨¡æ¿ä»¥å¤–çš„ Assetï¼Œä¾‹å¦‚ CSSã€JavaScript æ–‡ä»¶ç­‰ï¼Œéƒ½åº”è¯¥æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</div></pre></td></tr></table></figure>
<p><strong> æ³¨æ„ï¼šCloneä¸‹æ¥çš„é…ç½®æ–‡ä»¶<code>_config.yml</code>å¤šäº†<code>.example</code>åç¼€ï¼Œæ‰‹åŠ¨å»æ‰å³å¯ï¼Œå¦åˆ™æ›¿æ¢ä¸»é¢˜åä¸ç”Ÿæ•ˆå“¦ï¼ä¹‹å‰å°±æ˜¯æ²¡ç•™æ„åˆ°è¿™ä¸ªè¿˜ä»¥ä¸ºå§¿åŠ¿ä¸å¯¹å¯¼è‡´æ›¿æ¢åæ²¡æ•ˆæœ ã€‚</strong></p>
<p><strong> é‡è¦è¯´æ˜ï¼šåœ¨ <code>Hexo</code> ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ <code>_config.yml</code> ã€‚ å…¶ä¸­ï¼Œä¸€ä»½ä½äº<code>ç«™ç‚¹æ ¹ç›®å½•</code>ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äº<code>ä¸»é¢˜ç›®å½•</code>ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ï¼Œæ‰€ä»¥åƒä¸‡ä¸è¦æ··æ·† ã€‚ ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸º <code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code>ï¼Œ åè€…ç§°ä¸º <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ã€‚</strong> </p>
<p>æ›¿æ¢Hexoé»˜è®¤ä¸»é¢˜ï¼Œåªéœ€è¦ä¿®æ”¹ <code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> ä¸­çš„ <strong> <code>theme</code> </strong> å­—æ®µå€¼å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Extensions		# æ‹“å±•æ’ä»¶</div><div class="line">## Plugins: https://hexo.io/plugins/</div><div class="line">## Themes: https://hexo.io/themes/</div><div class="line">theme: hueman		# å½“å‰ä¸»é¢˜åç§°ã€‚å€¼ä¸ºfalseæ—¶ç¦ç”¨ä¸»é¢˜</div></pre></td></tr></table></figure></p>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œè¿™æ ·å°±å¥½äº†ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨ <code>hexo s</code> å‘½ä»¤å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨çœ‹çœ‹æ•ˆæœå•¦ ã€‚</p>
<hr>
<h5 id="äºŒ-nbsp-ä¿®æ”¹ä¸»é¢˜æ ·å¼"><a href="#äºŒ-nbsp-ä¿®æ”¹ä¸»é¢˜æ ·å¼" class="headerlink" title="äºŒ. &nbsp;ä¿®æ”¹ä¸»é¢˜æ ·å¼"></a>äºŒ. &nbsp;ä¿®æ”¹ä¸»é¢˜æ ·å¼</h5><p>2.1 &nbsp;æ›¿æ¢ä¸»é¢˜ <code>Header</code> &amp;&amp; <code>Footer</code> èƒŒæ™¯</p>
<p>Header è·¯å¾„ <code>../themes/hueman/source/css/_partial/header.styl</code> æ–‡ä»¶ ã€‚<br>Footer è·¯å¾„ <code>../themes/hueman/source/css/_partial/footer.styl</code> æ–‡ä»¶ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/// ç›´æ¥å»æ‰è¿™ä¸€è¡Œï¼Œä¸è¦æ³¨é‡Šï¼Œå¦åˆ™æŠ¥é”™ï¼Œå‘</div><div class="line">- background: color-header-background</div><div class="line"></div><div class="line">/// æ·»åŠ è¿™ä¸€è¡Œï¼Œurlï¼šæ‹¬å·å†…å¡«å…¥å›¾ç‰‡URLåœ°å€</div><div class="line">+ background-image: url(&quot;your background image url&quot;)</div></pre></td></tr></table></figure>
<p>2.2 &nbsp;æ›¿æ¢ <code>Logo</code> å›¾ç‰‡</p>
<p>Logo å›¾ç‰‡è·¯å¾„ <code>../themes/hueman/source/css/images/logo-header.png</code><br>ç›´æ¥æ›¿æ¢ä¸€å¼ åŒåï¼ˆ<code>logo-header.png</code>ï¼‰çš„å›¾ç‰‡å³å¯ ã€‚</p>
<p>å¦‚æœæƒ³è¦è®¾ç½® <code>Logo</code> å›¾ç‰‡çš„Sizeï¼Œæ‰“å¼€ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¿®æ”¹ <code>customize:</code> å­—æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">customize:</div><div class="line">    logo:</div><div class="line">        width: 165</div><div class="line">        height: 60</div><div class="line">        url: images/logo-header.png</div></pre></td></tr></table></figure></p>
<hr>
<h5 id="ä¸‰-nbsp-æ·»åŠ ä¸»é¢˜é…ç½®"><a href="#ä¸‰-nbsp-æ·»åŠ ä¸»é¢˜é…ç½®" class="headerlink" title="ä¸‰. &nbsp;æ·»åŠ ä¸»é¢˜é…ç½®"></a>ä¸‰. &nbsp;æ·»åŠ ä¸»é¢˜é…ç½®</h5><p>3.1 &nbsp;æ·»åŠ ç¤¾äº¤é“¾æ¥ï¼Œç›´æ¥æŠŠé“¾æ¥åœ°å€å¡«ä¸Šå»å°±å¥½äº†ï¼Œä¸éœ€è¦çš„ç›´æ¥æ³¨é‡Šæ‰å§ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">social_links: # for more icons, please see http://fontawesome.io/icons/#brand</div><div class="line">      twitter: /</div><div class="line">      facebook: /</div><div class="line">      google-plus: /</div><div class="line">      github: /</div><div class="line">      weibo: /</div></pre></td></tr></table></figure>
<p>3.2 &nbsp;æ·»åŠ RSSè®¢é˜…ï¼Œé¦–å…ˆéœ€è¦å®‰è£…RSSæ’ä»¶ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/// æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… RSS æ’ä»¶</div><div class="line">$ npm install hexo-generator-feed --save</div></pre></td></tr></table></figure>
<p>3.2.1 &nbsp;&nbsp;åœ¨ <code>ç«™ç‚¹é…ç½®æ–‡ä»¶</code> ä¸­æ·»åŠ RSSæ”¯æŒ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># RSSè®¢é˜…æ”¯æŒ</div><div class="line">plugin:</div><div class="line">- hexo-generator-feed</div><div class="line"></div><div class="line"># Feed Atom</div><div class="line">feed:</div><div class="line">type: atom</div><div class="line">path: atom.xml</div><div class="line">limit: 20</div></pre></td></tr></table></figure></p>
<p>3.2.2 &nbsp;&nbsp;åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­å¼€å¯RSSè®¢é˜…ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rss: /atom.xml</div></pre></td></tr></table></figure></p>
<p>é™„ä¸Šä¸€ç¯‡<a href="https://mritd.me/2016/03/08/Hexo%E6%B7%BB%E5%8A%A0Rss%E8%AE%A2%E9%98%85/#ä¸€å®‰è£…rssæ’ä»¶" target="_blank" rel="external">ã€ŠHexo æ·»åŠ  Rss è®¢é˜…ã€‹</a>çš„æ–‡ç« ï¼Œéœ€è¦çš„ç«¥é‹å¯ä»¥å‚è€ƒ ã€‚</p>
<p>3.3 &nbsp;æ·»åŠ åšå®¢è¯„è®ºï¼ŒHueman æ”¯æŒ <code>æœ‰è¨€</code>ï¼Œ<code>å¤šè¯´</code>ï¼Œ<code>disqus</code> è¯„è®ºæœåŠ¡ã€‚ </p>
<p>1.&nbsp;&nbsp;<code>æœ‰è¨€</code> ä¸çŸ¥é“æ˜¯æ€æ ·ï¼Œè²Œä¼¼æ²¡å¤ªå¤šäººç”¨ï¼›<br>2.&nbsp;&nbsp;<code>å¤šè¯´</code> å®˜æ–¹æœ€è¿‘å‘å¸ƒæ¶ˆæ¯ï¼Œè¯„è®ºç³»ç»Ÿå°†äº2017å¹´6æœˆ1å·æ­£å¼å…³é—­ï¼›<br>3.&nbsp;&nbsp;â€<code>disqus</code> åœ¨Quantcastçš„ç¾å›½ç½‘ç»œæ’åä¸­ä»¥æ¯æœˆ1.44äº¿ç‹¬ç«‹ç”¨æˆ·è®¿é—®æ’è¡Œç¬¬ä¸€â€œï¼Œè¿™æ˜¯ç»´åŸºç™¾ç§‘çš„æè¿°ï¼Œå¥½è…»å®³ ã€‚å¯æƒœåœ¨å¤§å¤©æœéœ€è¦ç¿»å¢™æ‰èƒ½ç”¨ï¼Œå¥½ç´¯å•Šï¼ŒğŸ™„ å‘µå‘µå“’ ã€‚ã€‚</p>
<p>ç°åœ¨ <code>å¤šè¯´</code> æŒ‚äº†ï¼Œè²Œä¼¼å¯ä»¥é€‰æ‹©çš„æ›¿æ¢æ–¹æ¡ˆåªæœ‰ <code>disqus</code> æ¯”è¾ƒé è°±ï¼Œå…¶å®ƒå›½å†…çš„ä¸çŸ¥é“å•¥æ—¶å€™ä¼šæ­¥ <code>å¤šè¯´</code> åå°˜ï¼Œso~ ä½¿ç”¨ <code>disqus</code>ä¸€åŠ³æ°¸é€¸å§ï¼Œè€Œä¸” <code>disqus</code> çš„Styleæ˜¯æˆ‘å–œæ¬¢çš„ ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170519-01-blog.png" alt="Screenshots"></p>
<p>åˆ°<strong> <a href="https://disqus.com/" target="_blank" rel="external">Disqus</a> </strong>å®˜ç½‘æ³¨å†Œå¸å·ï¼Œç™»å½•åï¼Œç‚¹å‡»é¦–é¡µçš„ <code>GET STARTED</code> æŒ‰é’®ï¼Œé€‰æ‹© <code>I want to install Disqus on my site</code> é€‰é¡¹ï¼ŒæŒ‰ç…§æ­¥éª¤é…ç½®ï¼Œæ·»åŠ ç«™ç‚¹å³å¯ï¼›æœ€åå°†ä½ çš„<code>shortname</code>å¡«åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥å•¦ ã€‚é™„ä¸Šä¸€ç¯‡<a href="http://www.jianshu.com/p/c4f65ebe23ad" target="_blank" rel="external">ã€Šä¸º Hexo åšå®¢åŠ å…¥ Disqus è¯„è®ºã€‹</a>çš„æ–‡ç« ï¼Œå†™çš„æ¯”è¾ƒè¯¦ç»†ï¼Œéœ€è¦çš„ç«¥é‹å¯ä»¥å‚è€ƒ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">comment:</div><div class="line">    disqus: 	# è¿™é‡Œå¡«åœ¨Disqusä¸Šæ·»åŠ çš„ç«™ç‚¹åå­—å°±OK</div><div class="line">    duoshuo: 	# enter duoshuo shortname here</div><div class="line">    youyan: 	# enter youyan uid here</div><div class="line">    facebook:   # enter true to enable</div><div class="line">    isso: 	# enter the domain name of your own comment isso server eg. comments.example.com</div></pre></td></tr></table></figure>
<p>3.4 &nbsp;æ·»åŠ ç½‘ç«™ç»Ÿè®¡åˆ†æï¼Œå¯ä»¥ä½¿ç”¨è°·æ­Œåˆ†ææˆ–è€…ç™¾åº¦åˆ†æ ã€‚</p>
<p>3.4.1    &nbsp;&nbsp;æ³¨å†Œ<a href="https://www.google.com/intl/zh-CN/analytics/" target="_blank" rel="external">è°·æ­Œåˆ†æ</a>æœåŠ¡ï¼›<br>ç™»å½•åï¼Œåœ¨ ç®¡ç†-&gt;è·Ÿè¸ªä¿¡æ¯-&gt;è·Ÿè¸ªä»£ç  ä¸­å¯ä»¥è·å–è·Ÿè¸ª IDï¼›<br>åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­çš„ <code>google_analytics:</code> æ·»åŠ ä½ çš„è·Ÿè¸ª ID å³å¯ ã€‚</p>
<p>3.4.2 &nbsp;&nbsp;æ³¨å†Œ<a href="https://tongji.baidu.com/web/welcome/login" target="_blank" rel="external">ç™¾åº¦åˆ†æ</a>æœåŠ¡ï¼›<br>ç™»å½•åï¼Œåœ¨ ç®¡ç†-&gt;ä»£ç ç®¡ç†-&gt;ä»£ç è·å–ï¼Œåœ¨ js ä»£ç æ®µä¸­è·å– <code>32ä½</code> çš„å“ˆå¸Œå€¼ï¼›<br>åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­çš„ <code>baidu_analytics:</code> æ·»åŠ è·å–çš„ <code>32ä½</code> ç™¾åº¦åˆ†æå“ˆå¸Œå€¼å³å¯ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">plugins:</div><div class="line">    lightgallery: true 		# options: true, false</div><div class="line">    justifiedgallery: true 	# options: true, false</div><div class="line">    google_analytics: 		# è¾“å…¥æ‚¨çš„Google Analyticsï¼ˆåˆ†æï¼‰çš„è·Ÿè¸ªID</div><div class="line">    baidu_analytics: 		# è¾“å…¥ç™¾åº¦åˆ†æå“ˆå¸Œé”®</div><div class="line">    mathjax: false 		# options: true, false</div></pre></td></tr></table></figure>
<p>3.5 &nbsp;è®¾ç½®åˆ†äº«ï¼Œåˆ†äº«æ–¹å¼æœ‰å››ç§ï¼Œé»˜è®¤ <code>default</code>ï¼›<br>å»ºè®®ä½¿ç”¨ <code>jiathis</code> æˆ–è€… <code>bdshare</code> , <code>addtoany</code> è²Œä¼¼è¦ç¿»å¢™æ‰èƒ½åˆ†äº«å‡ºå» ã€‚<br>é—®é¢˜ï¼š<code>jiathis</code> å’Œ <code>bdshare</code> <code>deploy</code> åä¸çŸ¥é“ä¸ºå•¥ä¸æ˜¾ç¤ºè¢«åˆ†äº«çš„æœåŠ¡å•†çš„å›¾æ ‡ï¼Œå‘ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Share</div><div class="line">share: default # options: jiathis, bdshare, addtoany, default</div></pre></td></tr></table></figure>
<p>3.6 &nbsp;åŠ å…¥ç½‘ç«™è®¡æ•°ï¼Œæ¨èä½¿ç”¨<a href="http://ibruce.info/2015/04/04/busuanzi/" target="_blank" rel="external">ä¸è’œå­ç½‘ç«™è®¡æ•°</a>ï¼Œ<code>ä¸€è¡Œè„šæœ¬+ä¸€è¡Œæ ‡ç­¾</code> æå®šï¼Œç®€å•åˆ°çˆ†ï¼›</p>
<p>3.6.1 &nbsp;å®‰è£…è„šæœ¬ï¼ˆRequiredï¼‰<br>æ‰“å¼€è·¯å¾„ <code>../themes/hueman/layout/common/footer.ejs</code> æ–‡ä»¶ï¼Œæ’å…¥ä»¥ä¸‹è„šæœ¬å³å¯ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script async src=&quot;//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>3.6.2 &nbsp;å®‰è£…æ ‡ç­¾ï¼ˆOptionalï¼‰<br>&nbsp;&nbsp;&nbsp;<strong>a. &nbsp;æ˜¾ç¤ºç«™ç‚¹æ€»è®¿é—®é‡ï¼š</strong><br>&nbsp;&nbsp;&nbsp;è¦æ˜¾ç¤ºç«™ç‚¹æ€»è®¿é—®é‡ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä½ éœ€è¦æ˜¾ç¤ºçš„ä½ç½® ã€‚æœ‰ä¸¤ç§ç®—æ³•å¯é€‰ï¼š</p>
<p>&nbsp;&nbsp;&nbsp;ç®—æ³•aï¼špvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;</div><div class="line">    æœ¬ç«™æ€»è®¿é—®é‡&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;æ¬¡</div><div class="line">&lt;/span&gt;</div></pre></td></tr></table></figure>
<p>&nbsp;&nbsp;&nbsp;ç®—æ³•bï¼šuvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•° ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;</div><div class="line">  æœ¬ç«™è®¿å®¢æ•°&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;äººæ¬¡</div><div class="line">&lt;/span&gt;</div></pre></td></tr></table></figure>
<p>&nbsp;&nbsp;&nbsp;<strong>b. &nbsp;æ˜¾ç¤ºå•é¡µé¢è®¿é—®é‡ï¼š</strong><br>&nbsp;&nbsp;&nbsp;è¦æ˜¾ç¤ºæ¯ç¯‡æ–‡ç« çš„è®¿é—®é‡ï¼Œå¤åˆ¶ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä½ éœ€è¦æ˜¾ç¤ºçš„ä½ç½® ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;ç®—æ³•ï¼špvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·ç‚¹å‡»1ç¯‡æ–‡ç« ï¼Œæœ¬ç¯‡æ–‡ç« è®°å½•1æ¬¡é˜…è¯»é‡ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;span id=&quot;busuanzi_container_page_pv&quot;&gt;</div><div class="line">  æœ¬æ–‡æ€»é˜…è¯»é‡&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;æ¬¡</div><div class="line">&lt;/span&gt;</div></pre></td></tr></table></figure>
<p>æ ‡ç­¾ä»£ç åŒæ ·æ˜¯æ’å…¥åˆ° <code>../footer.ejs</code> æ–‡ä»¶ä¸­ï¼›å¦‚æœæ˜¯åªè®¡æ•°ï¼Œä¸æ˜¾ç¤ºï¼Œåˆ™åªå®‰è£…è„šæœ¬ä»£ç ï¼Œä¸éœ€å®‰è£…æ ‡ç­¾ä»£ç  ã€‚ä»£ç ä¸­æ–‡å­—æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåªè¦ä¿ç•™idæ­£ç¡®å³å¯ ã€‚</p>
<p>3.7 &nbsp;<strong><code>// TODO:</code></strong> ç«™å†…æœç´¢ï¼ŒæŒ‰ç…§<a href="https://github.com/ppoffice/hexo-theme-hueman/wiki/Search" target="_blank" rel="external">ä¸»é¢˜æ–‡æ¡£</a>å®‰è£… <code>hexo-generator-json-content</code> æ’ä»¶ï¼Œæ˜æ˜å®‰è£…æˆåŠŸäº†ï¼Œä½†æ˜¯ä¸€è·‘æµ‹è¯•å°±æŠ¥é”™ï¼Œç›®å‰è¿˜æ²¡è§£å†³ï¼Œåé¢è§£å†³äº†å†æ›´æ–° ã€‚</p>
<hr>
<h5 id="å››-nbsp-å…¶å®ƒé…ç½®"><a href="#å››-nbsp-å…¶å®ƒé…ç½®" class="headerlink" title="å››. &nbsp;å…¶å®ƒé…ç½®"></a>å››. &nbsp;å…¶å®ƒé…ç½®</h5><p>4.1 &nbsp;Abouté¡µé¢ï¼Œåˆšæ­å»ºå®Œç‚¹å‡»Aboutæ˜¯ <code>not found</code> å§ï¼é‚£æ˜¯éœ€è¦è‡ªå·± <code>new</code> ä¸€ä¸ªæ‰æœ‰å‘¢ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/// æ–°å»ºä¸€ä¸ª about é¡µé¢æ–‡ä»¶</div><div class="line">$ hexo new page &quot;about&quot;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå‘½ä»¤ä¼šåœ¨ <code>../xxxx.github.io/source/</code> æ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆä¸€ä¸ª <code>about</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢ä¼šåˆ›å»ºä¸€ä¸ª<code>index.md</code> çš„æ–‡ä»¶ ã€‚åŒæ ·çš„ä½¿ç”¨ <code>Markdown</code> è¯­æ³•ç¼–è¾‘ï¼Œå®Œæˆå <code>deploy</code> ã€‚</p>
<p>åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­çš„ <code>About:</code> å­—æ®µæ·»åŠ è·¯å¾„ ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">menu:</div><div class="line">    Home: /</div><div class="line">    # Delete this row if you don&apos;t want categories in your header nav bar</div><div class="line">    Categories:</div><div class="line">    About: /about/index.html</div></pre></td></tr></table></figure></p>
<p>4.2 &nbsp;æ·»åŠ ç½‘ç«™å‹æƒ…é“¾æ¥ ã€‚</p>
<p>åœ¨ <code>ä¸»é¢˜é…ç½®æ–‡ä»¶</code> ä¸­çš„ <code>links:</code> å­—æ®µä¸‹æ·»åŠ  ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">links:</div><div class="line">       Hexo: http://hexo.io</div><div class="line">       Github: https://xxxx.xx</div><div class="line">       ...</div></pre></td></tr></table></figure></p>
<p>4.3 &nbsp;<code>404 Not-Found</code> é¡µé¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·åŠ å…¥<a href="http://www.qq.com/404/" target="_blank" rel="external">è…¾è®¯å…¬ç›Š<strong>404</strong></a>å§ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/// æ–°å»ºä¸€ä¸ª 404 é¡µé¢æ–‡ä»¶</div><div class="line">$ hexo new page &quot;404&quot;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå‘½ä»¤ä¼šåœ¨ <code>../xxxx.github.io/source/</code> æ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆä¸€ä¸ª <code>404.html</code> æ–‡ä»¶ï¼Œæ‹·è´ä»¥ä¸‹<code>HTML</code> ä»£ç å¡«è¿›å»å°±å¯ä»¥äº†ï¼Œè®°å¾—æ”¹ä¸‹ <code>homePageUrl</code> ä¸ºä½ çš„ç«™ç‚¹<code>URL</code>åœ°å€ ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8;&quot;/&gt;</div><div class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;</div><div class="line">  &lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt;</div><div class="line">  &lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot;/&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt; </div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;http://www.qq.com/404/search_children.js&quot; charset=&quot;utf-8&quot; homePageUrl=&quot;your site url&quot; homePageName=&quot;å›åˆ°æˆ‘çš„ä¸»é¡µ&quot;&gt;&lt;/script&gt; </div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<hr>
<h5 id="äº”-nbsp-å…³äºæ–‡ç« åˆ†ç±»"><a href="#äº”-nbsp-å…³äºæ–‡ç« åˆ†ç±»" class="headerlink" title="äº”. &nbsp;å…³äºæ–‡ç« åˆ†ç±»"></a>äº”. &nbsp;å…³äºæ–‡ç« åˆ†ç±»</h5><p>5.1 &nbsp;ä¸€ä¸ªå°æŠ€å·§ï¼Œåœ¨ç«™ç‚¹ç›®å½• <code>xxxx.github.io/scaffolds/post.md</code> æ–‡ä»¶ä¸­æ·»åŠ ä¸€é¡¹<code>categories</code>ï¼Œè¿™æ ·æ¯æ¬¡æ–°å»ºåšå®¢æ–‡ç«  <code>new</code> å‡ºæ¥çš„ <code>.md</code> æ–‡ä»¶å°±éƒ½å¸¦ <code>categories</code> äº†ï¼Œä¸ç”¨æ‰‹åŠ¨å†å†™ä¸€éå›–ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: &#123;&#123; title &#125;&#125;</div><div class="line">date: &#123;&#123; date &#125;&#125;</div><div class="line">categories:	/// æ·»åŠ è¿™ä¸€é¡¹</div><div class="line">tags:</div><div class="line">---</div></pre></td></tr></table></figure>
<p>5.2 &nbsp;è®¾ç½®åˆ†ç±»çš„çˆ¶å­çº§å…³ç³»ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªéœ€è¦åˆ›å»ºå°‘æ•°å‡ ä¸ªå¤§åˆ†ç±»ï¼Œé‡Œé¢å†ç»†åˆ†ä¸ºNä¸ªå°åˆ†ç±»å°±å¥½äº†ï¼Œå¯¹äº <code>Hueman</code> è¿™æ ·çš„ä¸»é¢˜æ¥è¯´å¯ä»¥æ›´æ–¹ä¾¿çš„ç®¡ç†æ–‡ç« ï¼Œå°±åƒä¸‹å›¾è¿™æ ·ï¼š</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170519-02-blog.png" alt="Screenshots"></p>
<p>é‚£æ˜¯æ€ä¹ˆåšå‘¢ ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œä½¿ç”¨ <code>Front-matter</code> ã€‚<br><code>Front-matter</code> æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code> åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">---</div><div class="line">title: Hexo ä¸»é¢˜ä¹‹ Hueman</div><div class="line">date: 2017-05-19 11:06:54 </div><div class="line">categories:	</div><div class="line">	- Technology</div><div class="line">	- Themes </div><div class="line">tags:		</div><div class="line">	- Hexo</div><div class="line">	- Themes</div><div class="line">---</div></pre></td></tr></table></figure>
<p>åªæœ‰æ–‡ç« æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œä½ å¯ä»¥åœ¨ <code>Front-matter</code> ä¸­è®¾ç½® ã€‚<br>åœ¨ä¸Šé¢çš„ <code>categories:</code> å‚æ•°ä¸­ï¼Œä¾æ¬¡ä¸‹æ¥å°±ä¼šä½¿åˆ†ç±» <code>Technology</code> æˆä¸º <code>Themes</code> çš„çˆ¶åˆ†ç±»ï¼Œçˆ¶åˆ†ç±»æ€»æ˜¯æ’åœ¨ç¬¬ä¸€ä½ï¼Œä»¥ä¸‹å‡ä¸ºå­åˆ†ç±» ã€‚<br>è€Œ <code>tags:</code> å‚æ•°åˆ™æ˜¯ä¸ºè¿™ç¯‡æ–‡ç« æ‰“çš„æ ‡ç­¾ï¼ŒåŒæ ·æ˜¯å¯ä»¥æ·»åŠ å¤šä¸ªï¼Œæ²¡æœ‰çˆ¶å­çº§æ ‡ç­¾ä¹‹è¯´ ã€‚</p>
<p><strong><em> å†™åˆ°è¿™é‡ŒåŸºæœ¬ä¸ŠæŠŠ Hueman æŠ˜è…¾å¾—å·®ä¸å¤šäº†ï¼Œä»¥åè¿˜æœ‰å…¶å®ƒçš„ç»†èŠ‚æƒ³èµ·æ¥å†æ›´æ–°å›–ï¼</em></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170519-00-blog.jpeg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ‰“è‡ªæ­å»ºå¥½åšå®¢å¼€å§‹ï¼Œé»˜è®¤çš„&lt;a href=&quot;https://github.com/iissnan/hexo-th
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="Themes" scheme="http://yoursite.com/categories/Technology/Themes/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
      <category term="Themes" scheme="http://yoursite.com/tags/Themes/"/>
    
  </entry>
  
  <entry>
    <title>é›†æˆå‹ç›Ÿæ¨é€çš„é—®é¢˜</title>
    <link href="http://yoursite.com/2017/05/01/on-umeng-push/"/>
    <id>http://yoursite.com/2017/05/01/on-umeng-push/</id>
    <published>2017-05-01T01:16:15.000Z</published>
    <updated>2017-09-23T01:45:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170501-00-blog.png" alt=""></p>
<p>æœ€è¿‘é¡¹ç›®éœ€è¦åšæ¶ˆæ¯æ¨é€ï¼Œäºæ˜¯å†³å®šä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨é€æœåŠ¡ï¼ˆä¸ºäº†æ–¹ä¾¿åå°ç»Ÿä¸€iOSå’ŒAndroidçš„æ¶ˆæ¯ç®¡ç†ï¼‰ï¼›ç›®å‰åšæ¶ˆæ¯æ¨é€çš„æœåŠ¡å•†æœ‰å¾ˆå¤šï¼Œç»¼åˆè€ƒè™‘å†³å®šé›†æˆå‹ç›Ÿ+çš„ï¼Œä¸»è¦æ˜¯ä¸æƒ³åœ¨é¡¹ç›®ä¸­é›†æˆå¤ªå¤šç±»ä¼¼çš„ç¬¬ä¸‰æ–¹SDKï¼Œè€Œä¸”åœ¨è¿™ä¹‹å‰å·²ç»ä½¿ç”¨äº†å‹ç›Ÿçš„ç»Ÿè®¡å’Œåˆ†äº«åŠŸèƒ½ï¼Œå£ç¢‘ä¹Ÿè¿˜ç®—ä¸é”™ï¼Œæ‰€ä»¥å°±ç»Ÿä¸€äº†ï¼Œä¹Ÿæ–¹ä¾¿ç®¡ç† ã€‚</p>
<p>ä¸Šå‹ç›Ÿå®˜ç½‘ä¸‹è½½æœ€æ–°çš„<code>SDK</code>ï¼Œè¿™é‡Œåæ§½ä¸€ä¸‹ï¼Œç«Ÿç„¶ä¸æ”¯æŒ<code>CocoaPods</code>é›†æˆï¼Œéœ€è¦æ‰‹åŠ¨å¯¼å…¥<code>SDK</code>åŒ…åˆ°é¡¹ç›®ï¼Œæ— ç–‘åˆç»™æˆ‘ä»¬çš„<code>ipa</code>åŒ…å¢åŠ ä½“ç§¯ ã€‚æ¥ä¸‹æ¥å°±æ˜¯æŒ‰ç…§å‹ç›Ÿ<a href="http://dev.umeng.com/push/ios/integration" target="_blank" rel="external">iOS SDKæ–‡æ¡£</a>æ­¥éª¤æ¥é›†æˆï¼Œæ–‡æ¡£è¿˜ç®—æ¯”è¾ƒå…¨ï¼Œç›¸ä¿¡å¤§å®¶å¹¶æ²¡ä»€ä¹ˆéš¾åº¦ ã€‚</p>
<h4 id="ä¸€-åˆå§‹åŒ–å¹¶æ³¨å†Œå‹ç›Ÿæ¨é€ï¼š"><a href="#ä¸€-åˆå§‹åŒ–å¹¶æ³¨å†Œå‹ç›Ÿæ¨é€ï¼š" class="headerlink" title="ä¸€. åˆå§‹åŒ–å¹¶æ³¨å†Œå‹ç›Ÿæ¨é€ï¼š"></a>ä¸€. åˆå§‹åŒ–å¹¶æ³¨å†Œå‹ç›Ÿæ¨é€ï¼š</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">/// ç»‘å®šAppçš„appKeyå’Œå¯åŠ¨å‚æ•°ï¼Œå¯åŠ¨æ¶ˆæ¯å‚æ•°ç”¨äºå¤„ç†ç”¨æˆ·é€šè¿‡æ¶ˆæ¯æ‰“å¼€åº”ç”¨ç›¸å…³ä¿¡æ¯</span></div><div class="line">    [UMessage startWithAppkey:kAppKey launchOptions:launchOptions httpsEnable:<span class="literal">YES</span>];</div><div class="line"><span class="meta">#ifdef DEBUG</span></div><div class="line">    [UMessage openDebugMode:<span class="literal">YES</span>];</div><div class="line">    [UMessage setLogEnabled:<span class="literal">YES</span>];</div><div class="line"><span class="meta">#else</span></div><div class="line">    [UMessage openDebugMode:<span class="literal">NO</span>];</div><div class="line">    [UMessage setLogEnabled:<span class="literal">NO</span>];</div><div class="line"><span class="meta">#endif</span></div><div class="line">    </div><div class="line">    <span class="comment">/// æ³¨å†Œè¿œç¨‹æ¨é€</span></div><div class="line">    [UMessage registerForRemoteNotifications];</div></pre></td></tr></table></figure>
<p>iOS 10ä¹‹åè‹¹æœç»Ÿä¸€äº†æ¨é€APIï¼Œä½¿ç”¨<code>UNUserNotificationCenter</code>è¿™ä¸ªç±»è¯·æ±‚ç”¨æˆ·çš„æˆæƒ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([[[<span class="built_in">UIDevice</span> currentDevice] systemVersion] floatValue] &gt;= <span class="number">10.</span>f) &#123; </div><div class="line">        UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];</div><div class="line">        [center setDelegate:[YQUMessage share]];</div><div class="line">        [center requestAuthorizationWithOptions:(UNAuthorizationOptionBadge | UNAuthorizationOptionSound | UNAuthorizationOptionAlert)</div><div class="line">                              completionHandler:^(<span class="built_in">BOOL</span> granted, <span class="built_in">NSError</span> * _Nullable error) &#123;</div><div class="line">                                  <span class="keyword">if</span> (!error &amp;&amp; granted) &#123;</div><div class="line">                                      <span class="built_in">NSLog</span>(<span class="string">@"æ³¨å†ŒæˆåŠŸ"</span>);</div><div class="line">                                  &#125; <span class="keyword">else</span> &#123;</div><div class="line">                                      <span class="built_in">NSLog</span>(<span class="string">@"æ³¨å†Œå¤±è´¥"</span>);</div><div class="line">                                  &#125;</div><div class="line">                              &#125;];</div><div class="line">        <span class="comment">/// é€šè¿‡ getNotificationSettingsWithCompletionHandler è·å–ç”¨æˆ·æƒé™è®¾ç½®, yes or no</span></div><div class="line">        [center getNotificationSettingsWithCompletionHandler:^(UNNotificationSettings * _Nonnull settings) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"settings = %@"</span>,settings);</div><div class="line">        &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="äºŒ-æ¨é€è¯ä¹¦é…ç½®"><a href="#äºŒ-æ¨é€è¯ä¹¦é…ç½®" class="headerlink" title="äºŒ. æ¨é€è¯ä¹¦é…ç½®"></a>äºŒ. æ¨é€è¯ä¹¦é…ç½®</h4><p>2.1    åœ¨å¼€å‘è€…ä¸­å¿ƒçš„<code>identifiers</code>ä¸­æ‰“å¼€<code>Push Notifications</code> ã€‚<br><img src="http://oonis1a4c.bkt.clouddn.com/20170501-01-blog.png" alt=""></p>
<p>2.2    åœ¨å¼€å‘è€…ä¸­å¿ƒçš„<code>certificates</code>ä¸­é…ç½®æ¨é€è¯ä¹¦ï¼Œè¯ä¹¦åˆ¶ä½œå¾ˆç®€å•è¿™é‡Œå°±ä¸å¤šè¯´äº† ã€‚<br><img src="http://oonis1a4c.bkt.clouddn.com/20170501-02-blog.png" alt=""></p>
<p>2.3    <code>xocde 8</code>ç¯å¢ƒå¤šäº†è¿™ä¸ªé€‰é¡¹å¼€å…³ï¼Œæƒ³è¦æ¥æ”¶æ¨é€å¿…é¡»æ‰“å¼€ ã€‚<br><img src="http://oonis1a4c.bkt.clouddn.com/20170501-03-blog.png" alt=""></p>
<h4 id="ä¸‰-æ¥æ”¶æ¨é€æ¶ˆæ¯å†…å®¹"><a href="#ä¸‰-æ¥æ”¶æ¨é€æ¶ˆæ¯å†…å®¹" class="headerlink" title="ä¸‰. æ¥æ”¶æ¨é€æ¶ˆæ¯å†…å®¹"></a>ä¸‰. æ¥æ”¶æ¨é€æ¶ˆæ¯å†…å®¹</h4><h5 id="iOS-10ä¹‹å‰æ¥æ”¶æ¨é€æ¶ˆæ¯çš„æ–¹æ³•"><a href="#iOS-10ä¹‹å‰æ¥æ”¶æ¨é€æ¶ˆæ¯çš„æ–¹æ³•" class="headerlink" title=" iOS 10ä¹‹å‰æ¥æ”¶æ¨é€æ¶ˆæ¯çš„æ–¹æ³• "></a><strong><em> iOS 10ä¹‹å‰æ¥æ”¶æ¨é€æ¶ˆæ¯çš„æ–¹æ³• </em></strong></h5><p>3.1    iOS 10 ä¹‹å‰ï¼Œå½“APPåœ¨å‰å°æˆ–è€…åå°æ”¶åˆ°æ¨é€æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œ<code>userInfo</code>å°±æ˜¯æ¨é€çš„æ¶ˆæ¯ä½“ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="keyword">nonnull</span> <span class="built_in">NSDictionary</span> *)userInfo &#123;</div><div class="line">    <span class="comment">/// å°è£…çš„å‹ç›Ÿæ¨é€ç±»ï¼Œå½“åº”ç”¨å¤„äºå‰å°æ´»è·ƒçŠ¶æ€æ—¶æ”¶åˆ°æ¨é€æ˜¾ç¤ºè‡ªå®šä¹‰çš„Alert ã€‚</span></div><div class="line">    [YQUMessage showCustomAlertWithUserInfo:userInfo];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.2    ï¼ˆå¯é€‰ï¼‰æ‰“å¼€<code>background modes</code>å¼€å…³ï¼Œå‹¾é€‰<code>remote notifications</code>ï¼Œå¯ä»¥å®ç°é™é»˜æ¨é€ ã€‚<br><img src="http://oonis1a4c.bkt.clouddn.com/20170501-04-blog.png" alt=""> </p>
<p>3.3    é™é»˜æ¨é€ä¼šè°ƒç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨<code>completionHandler</code>è¿™ä¸ªblockå›è°ƒä¸­åˆ·æ–°æ•°æ®ï¼Œä¸Šé¢çš„æ–¹æ³•åˆ™ä¸ä¼šè¢«è°ƒç”¨äº†ï¼Œ<code>userInfo</code>å°±æ˜¯æ¨é€çš„æ¶ˆæ¯ä½“ ã€‚<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo fetchCompletionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">UIBackgroundFetchResult</span>))completionHandler &#123;</div><div class="line">    <span class="comment">/// å°è£…çš„å‹ç›Ÿæ¨é€ç±»ï¼Œå½“åº”ç”¨å¤„äºå‰å°æ´»è·ƒçŠ¶æ€æ—¶æ”¶åˆ°æ¨é€æ˜¾ç¤ºè‡ªå®šä¹‰çš„Alert ã€‚</span></div><div class="line">    [YQUMessage showCustomAlertWithUserInfo:userInfo];</div><div class="line">    completionHandler(userInfo ? <span class="built_in">UIBackgroundFetchResultNewData</span> : <span class="built_in">UIBackgroundFetchResultNoData</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="iOS-10ä¹‹åæ¥æ”¶æ¨é€æ¶ˆæ¯æ–°çš„æ–¹æ³•"><a href="#iOS-10ä¹‹åæ¥æ”¶æ¨é€æ¶ˆæ¯æ–°çš„æ–¹æ³•" class="headerlink" title=" iOS 10ä¹‹åæ¥æ”¶æ¨é€æ¶ˆæ¯æ–°çš„æ–¹æ³• "></a><strong><em> iOS 10ä¹‹åæ¥æ”¶æ¨é€æ¶ˆæ¯æ–°çš„æ–¹æ³• </em></strong></h5><p>iOS 10ä¹‹åç»Ÿä¸€ä½¿ç”¨<code>UNUserNotificationCenter</code>è¿™ä¸ªé€šçŸ¥ç±»ï¼Œåªè¦éµå®ˆ<code>UNUserNotificationCenterDelegate</code>å§”æ‰˜åè®®ï¼Œå®ç°ä¸¤ä¸ªå§”æ‰˜æ–¹æ³•ï¼ˆåˆ†åˆ«æ˜¯å½“åº”ç”¨åœ¨å‰å°å’Œåå°çš„å¤„ç†ï¼‰å°±èƒ½å¤„ç†æ¥æ”¶åˆ°çš„æ¨é€æ¶ˆæ¯ï¼Œåœ¨iOS 10ä¹‹å‰ä¸ç®¡å‰å°åå°éƒ½æ˜¯åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­å¤„ç†çš„ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// iOS10æ–°å¢: å¤„ç†å‰å°æ”¶åˆ°é€šçŸ¥çš„ä»£ç†æ–¹æ³•</span></div><div class="line">- (<span class="keyword">void</span>)userNotificationCenter:(UNUserNotificationCenter *)center willPresentNotification:(UNNotification *)notification withCompletionHandler:(<span class="keyword">void</span> (^)(UNNotificationPresentationOptions))completionHandler &#123;</div><div class="line">    <span class="built_in">NSDictionary</span> *userInfo = notification.request.content.userInfo;</div><div class="line">    <span class="keyword">if</span>([notification.request.trigger isKindOfClass:[UNPushNotificationTrigger <span class="keyword">class</span>]]) &#123;</div><div class="line">        <span class="comment">/// æ˜¾ç¤ºè‡ªå®šä¹‰å¼¹çª—</span></div><div class="line">        [YQUMessage showCustomAlertWithUserInfo:userInfo];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">/// åº”ç”¨å¤„äºå‰å°æ—¶çš„æœ¬åœ°æ¨é€æ¥å—</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">/// åº”ç”¨å¤„äºå‰å°æ—¶, è‡ªå®šä¹‰äº†å¼¹æ¡†, ä¸éœ€è¦ç³»ç»Ÿçš„é¡¶éƒ¨å¼¹çª—, UNNotificationPresentationOptionAlert</span></div><div class="line">    completionHandler(UNNotificationPresentationOptionSound | UNNotificationPresentationOptionBadge);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// iOS10æ–°å¢: å¤„ç†åå°ç‚¹å‡»é€šçŸ¥çš„ä»£ç†æ–¹æ³•</span></div><div class="line">- (<span class="keyword">void</span>)userNotificationCenter:(UNUserNotificationCenter *)center didReceiveNotificationResponse:(UNNotificationResponse *)response withCompletionHandler:(<span class="keyword">void</span> (^)())completionHandler &#123;</div><div class="line">    <span class="built_in">NSDictionary</span> *userInfo = response.notification.request.content.userInfo;</div><div class="line">    <span class="keyword">if</span>([response.notification.request.trigger isKindOfClass:[UNPushNotificationTrigger <span class="keyword">class</span>]]) &#123;</div><div class="line">        <span class="comment">/// æ˜¾ç¤ºè‡ªå®šä¹‰å¼¹çª—</span></div><div class="line">        [YQUMessage showCustomAlertWithUserInfo:userInfo];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">/// åº”ç”¨å¤„äºåå°æ—¶çš„æœ¬åœ°æ¨é€æ¥å—</span></div><div class="line">    &#125;</div><div class="line">    completionHandler();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åï¼Œå…¶å®å·²ç»å¯ä»¥å®ç°åŸºæœ¬çš„æ¶ˆæ¯æ¨é€äº† ã€‚åœ¨å‹ç›Ÿåå°åˆ†åˆ«ä¸Šä¼ å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„<code>p12</code>è¯ä¹¦æ–‡ä»¶ï¼Œåˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼ï¼Œæ·»åŠ æµ‹è¯•è®¾å¤‡çš„<code>Device Token</code>ï¼Œæ·»åŠ æµ‹è¯•æ¶ˆæ¯å°±å¯ä»¥è¿›è¡Œæ¨é€æµ‹è¯•ï¼Œå½“ç„¶åªæœ‰æ·»åŠ åˆ°æµ‹è¯•åˆ—è¡¨çš„æ‰‹æœºèƒ½æ”¶åˆ° ã€‚</p>
<p>å¦‚ä½•æ‹¿åˆ°<code>deviceToken</code>ï¼Ÿé€šè¿‡ä¸‹é¢è¿™ä¸ªæ–¹æ³•é‡Œé¢å¯ä»¥è·å–ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹è¿‡æ»¤å­—ç¬¦ä¸²çš„æ–¹å¼æ‰èƒ½æ‰“å°å‡ºæ­£ç¡®çš„Tokenå€¼ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"deviceToken = %@"</span>,[[[deviceToken description] stringByTrimmingCharactersInSet:</div><div class="line">                                [<span class="built_in">NSCharacterSet</span> characterSetWithCharactersInString:<span class="string">@"&lt;&gt;"</span>]]</div><div class="line">                               stringByReplacingOccurrencesOfString:<span class="string">@" "</span> withString:<span class="string">@""</span>]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>åˆ°è¿™é‡Œå‰é¢çš„éƒ½å·²ç»æ²¡æœ‰é—®é¢˜äº†ï¼Œè®©æˆ‘ä»¬æ¥åŠ ä¸¤ä¸ªå¤„ç†é€šçŸ¥çš„æŒ‰é’®è¯•è¯• ã€‚å…ˆæ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºåŠ¨ä½œæŒ‰é’®ï¼Œ<code>iOS 8</code> å’Œ <code>iOS 10</code> çš„æ–¹æ³•ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„å•Š ã€‚ </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#pragma mark - iOS 8</span></div><div class="line">	<span class="comment">/// æŸ¥çœ‹æŒ‰é’®</span></div><div class="line">        <span class="built_in">UIMutableUserNotificationAction</span> *open = [[<span class="built_in">UIMutableUserNotificationAction</span> alloc] init];</div><div class="line">        [open setActivationMode:<span class="built_in">UIUserNotificationActivationModeForeground</span>];</div><div class="line">        [open setIdentifier:kOpenActionIdentifier];</div><div class="line">        [open setTitle:locStr(<span class="string">@"notify.open"</span>)];</div><div class="line">        [open setAuthenticationRequired:<span class="literal">YES</span>];</div><div class="line">        [open setDestructive:<span class="literal">NO</span>];</div><div class="line">        </div><div class="line">        <span class="comment">/// å¿½ç•¥æŒ‰é’®</span></div><div class="line">        <span class="built_in">UIMutableUserNotificationAction</span> *ignore = [[<span class="built_in">UIMutableUserNotificationAction</span> alloc] init];</div><div class="line">        [ignore setActivationMode:<span class="built_in">UIUserNotificationActivationModeBackground</span>];</div><div class="line">        [ignore setIdentifier:kIgnoreActionIdentifier];</div><div class="line">        [ignore setTitle:locStr(<span class="string">@"notify.ignore"</span>)];</div><div class="line">        [ignore setAuthenticationRequired:<span class="literal">NO</span>];</div><div class="line">        [ignore setDestructive:<span class="literal">YES</span>];</div><div class="line">        </div><div class="line">        <span class="comment">/// åˆ›å»ºåŠ¨ä½œ(æŒ‰é’®)çš„ç±»åˆ«é›†åˆ</span></div><div class="line">        <span class="built_in">UIMutableUserNotificationCategory</span> *categorys = [[<span class="built_in">UIMutableUserNotificationCategory</span> alloc] init];</div><div class="line">        [categorys setActions:@[open, ignore] forContext:(<span class="built_in">UIUserNotificationActionContextDefault</span>)];</div><div class="line">        [categorys setIdentifier:kNotifityCategoryIdentifier]; </div><div class="line"></div><div class="line"><span class="meta">#pragma mark - iOS 10 </span></div><div class="line"> 	UNNotificationAction *open;</div><div class="line">        open = [UNNotificationAction actionWithIdentifier:kOpenActionIdentifier</div><div class="line">                                                    title:locStr(<span class="string">@"notify.open"</span>)     <span class="comment">/// æŸ¥çœ‹</span></div><div class="line">                                                  options:UNNotificationActionOptionForeground];</div><div class="line">        UNNotificationAction *ignore;</div><div class="line">        ignore = [UNNotificationAction actionWithIdentifier:kIgnoreActionIdentifier</div><div class="line">                                                      title:locStr(<span class="string">@"notify.ignore"</span>) <span class="comment">/// å¿½ç•¥</span></div><div class="line">                                                    options:UNNotificationActionOptionForeground];</div><div class="line">        UNNotificationCategory *categorys;</div><div class="line">        categorys = [UNNotificationCategory categoryWithIdentifier:kNotifityCategoryIdentifier</div><div class="line">                                                           actions:@[open, ignore]   <span class="comment">/// åˆ›å»ºåŠ¨ä½œ(æŒ‰é’®)çš„ç±»åˆ«é›†åˆ</span></div><div class="line">                                                 intentIdentifiers:@[kOpenActionIdentifier,kIgnoreActionIdentifier]</div><div class="line">                                                           options:UNNotificationCategoryOptionCustomDismissAction];</div><div class="line">        [center setNotificationCategories:[<span class="built_in">NSSet</span> setWithObjects:categorys, <span class="literal">nil</span>]];</div></pre></td></tr></table></figure>
<p>å½“åº”ç”¨åœ¨åå°æ”¶åˆ°æ¨é€æ¶ˆæ¯æ—¶ï¼Œä¸‹æ‹‰çš„é€šçŸ¥æ åˆ—è¡¨æ˜¯è¿™æ ·çš„ï¼Œå‘å·¦åˆ’å‡ºç°æŒ‰é’®ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170501-05-blog.jpg?imageView/2/w/600/h/450" alt=""></p>
<p>ç‚¹å‡» <code>X</code> å’Œ <code>å¿½ç•¥</code> æŒ‰é’®æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šå°†æ¶ˆæ¯ä»é€šçŸ¥åˆ—è¡¨ä¸­ç§»é™¤ï¼Œå½“ç‚¹å‡»<code>æŸ¥çœ‹</code>æŒ‰é’®çš„æ—¶å€™ä¼šå”¤èµ·APPè¿›å…¥å‰å°ï¼Œå¹¶è°ƒç”¨æ¥æ”¶é€šçŸ¥çš„æ–¹æ³• ã€‚<br>butï¼Œé—®é¢˜æ¥äº†ï¼Œå½“ç‚¹å‡»<code>æŸ¥çœ‹</code>æŒ‰é’®å”¤èµ·APPæ—¶å¹¶æ²¡æœ‰è°ƒç”¨æ¥æ”¶æ¨é€æ¶ˆæ¯çš„æ–¹æ³•ï¼Œå¯¼è‡´è·å–ä¸åˆ°æ¨é€çš„æ¶ˆæ¯å†…å®¹ï¼Œæ— æ³•åšåé¢çš„é€»è¾‘æ“ä½œ ã€‚<br>è¿™é‡Œå¿…é¡»åæ§½ä¸‹å‹ç›Ÿçš„æŠ€æœ¯æ”¯æŒï¼Œåœ¨è®ºå›å‘å¸–å‡ å¤©æ²¡äººç†ï¼Œåæ¥å‘é‚®ä»¶æ‰æœ‰äººå›åº”ï¼Œä½†æ˜¯ä¾ç„¶æ‰¾ä¸åˆ°é—®é¢˜æ‰€åœ¨ï¼ˆä¼°è®¡æ˜¯å°è£…çš„SDKä»£ç æœ‰é—®é¢˜ï¼‰ï¼Œå‹ç›Ÿå®˜æ–¹ä¹Ÿæ²¡æœ‰åç»­çš„å›åº”ï¼›æœ€åå‚è€ƒäº†å¤§éƒ¨åˆ†APPçš„æ¨é€ï¼Œå‘ç°éƒ½æ²¡æœ‰åŠ è¿™ä¸ªï¼Œå¹¶ä¸”è€ƒè™‘åˆ°å…¬å¸åº”ç”¨å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œæ‰€ä»¥æœ€ç»ˆä¹Ÿè¿˜æ˜¯æ²¡æœ‰åŠ ä¸Šè¿™ä¸ªæŒ‰é’® ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// åŠ äº†åŠ¨ä½œæŒ‰é’®åä¸ä¼šè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œå³ä½¿æ²¡æœ‰å¼€é™é»˜æ¨é€</span></div><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="keyword">nonnull</span> <span class="built_in">NSDictionary</span> *)userInfo &#123; </div><div class="line">&#125; </div><div class="line"><span class="comment">/// é™é»˜æ¨é€è°ƒç”¨</span></div><div class="line">- (<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="built_in">NSDictionary</span> *)userInfo fetchCompletionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">UIBackgroundFetchResult</span>))completionHandler &#123; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>ä¸‹é¢æœ€åä¸€æ®µä»£ç æ˜¯æˆ‘å°è£…çš„ç±»æ–¹æ³•ï¼Œä¸ç®¡æ˜¯iOS 10ä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Œåœ¨å‰å°è¿˜æ˜¯åå°ï¼Œéƒ½ç»Ÿä¸€åœ¨è¿™é‡Œé¢å¤„ç†æ”¶åˆ°çš„æ¨é€æ¶ˆæ¯ï¼Œå…¶ä¸­<code>type</code>å’Œ<code>url</code>å­—æ®µä¸ºå’Œåå°çº¦å®šå¥½çš„è‡ªå®šä¹‰å­—æ®µï¼Œç”¨äºæ˜¯å¦éœ€è¦è·³è½¬å±•ç¤ºwebview ã€‚å½“ç„¶ï¼Œä»¥åå¯èƒ½éœ€è¦è·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢ï¼Œåªè¦å’Œåå°çº¦å®šå¥½è¦è·³è½¬çš„é¡µé¢å®šä¹‰å¥½æ¨é€å­—æ®µï¼Œä¹Ÿæ˜¯å¯ä»¥åœ¨è¿™é‡Œå¤„ç†çš„ ã€‚ </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)showCustomAlertWithUserInfo:(<span class="built_in">NSDictionary</span> *)userInfo &#123;</div><div class="line">    </div><div class="line">    __<span class="keyword">weak</span> <span class="keyword">typeof</span>([YQUMessage share]) weakSelf = [YQUMessage share];</div><div class="line">    <span class="keyword">if</span> ([<span class="built_in">UIApplication</span> sharedApplication].applicationState == <span class="built_in">UIApplicationStateActive</span>) &#123;</div><div class="line">        [[YQUMessage share] mainAsyncQueue:^&#123;</div><div class="line">            <span class="comment">/// å…³é—­å‹ç›Ÿå¼¹çª—</span></div><div class="line">            [UMessage setAutoAlert:<span class="literal">NO</span>];</div><div class="line">            <span class="comment">/// è‡ªå®šä¹‰å¼¹çª—</span></div><div class="line">            [[YQCostomAlertView alertWithImage:<span class="literal">nil</span></div><div class="line">                                         title:userInfo[<span class="string">@"aps"</span>][<span class="string">@"alert"</span>][<span class="string">@"title"</span>]</div><div class="line">                                       message:userInfo[<span class="string">@"aps"</span>][<span class="string">@"alert"</span>][<span class="string">@"body"</span>]</div><div class="line">                                cancelBtnTitle:titleForUrlStr(userInfo, <span class="literal">YES</span>)</div><div class="line">                                 otherBtnTitle:titleForUrlStr(userInfo, <span class="literal">NO</span>)</div><div class="line">                               clickIndexBlock:^(<span class="built_in">NSInteger</span> clickIndex) &#123;</div><div class="line">                                   </div><div class="line">                                   <span class="keyword">if</span> (!userInfo[<span class="string">@"url"</span>] &amp;&amp; !clickIndex) &#123;</div><div class="line">                                       <span class="comment">/// è¡¥å‘æ¶ˆæ¯ç‚¹å‡»äº‹ä»¶ï¼Œä»¥ä¾¿åœ¨å‹ç›Ÿåå°ç»Ÿè®¡ç‚¹å‡»æ•°</span></div><div class="line">                                       [UMessage sendClickReportForRemoteNotification:userInfo];</div><div class="line">                                   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (clickIndex) &#123;</div><div class="line">                                       YQWebViewController *webVC = [[YQWebViewController alloc] init];</div><div class="line">                                       [webVC loadWebURLSring:[userInfo valueForKey:<span class="string">@"url"</span>]];</div><div class="line">                                       [[weakSelf getCurrentVC].navigationController pushViewController:webVC animated:<span class="literal">YES</span>];</div><div class="line">                                       [UMessage sendClickReportForRemoteNotification:userInfo];</div><div class="line">                                   &#125;</div><div class="line">                                   </div><div class="line">                               &#125; animationStyle:AnimationStyleDefault] showAlertView];</div><div class="line">        &#125;];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (userInfo[<span class="string">@"url"</span>] &amp;&amp; [userInfo[<span class="string">@"url"</span>] length]) &#123;</div><div class="line">            YQWebViewController *webVC = [[YQWebViewController alloc] init];</div><div class="line">            [webVC loadWebURLSring:[userInfo valueForKey:<span class="string">@"url"</span>]];</div><div class="line">            [[weakSelf getCurrentVC].navigationController pushViewController:webVC animated:<span class="literal">YES</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="comment">/// åº”ç”¨å¤„äºè¿è¡Œæ—¶ï¼ˆå‰å°ã€åå°ï¼‰çš„æ¶ˆæ¯å¤„ç†</span></div><div class="line">        [UMessage didReceiveRemoteNotification:userInfo];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#pragma mark -</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="built_in">NSString</span> *titleForUrlStr(<span class="built_in">NSDictionary</span> *userInfo, <span class="built_in">BOOL</span> isCancel) &#123;</div><div class="line">    <span class="built_in">BOOL</span> flag = (userInfo[<span class="string">@"url"</span>] &amp;&amp; [userInfo[<span class="string">@"url"</span>] length]);</div><div class="line">    <span class="keyword">return</span> isCancel ? (</div><div class="line">                       locStr(flag ? <span class="string">@"notify.ignore"</span> : <span class="literal">nil</span>)</div><div class="line">                       ):(</div><div class="line">                          locStr(flag ? <span class="string">@"notify.open"</span> : <span class="string">@"notify.gotIt"</span>)</div><div class="line">                          );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170501-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘é¡¹ç›®éœ€è¦åšæ¶ˆæ¯æ¨é€ï¼Œäºæ˜¯å†³å®šä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨é€æœåŠ¡ï¼ˆä¸ºäº†æ–¹ä¾¿åå°ç»Ÿä¸€iOSå’ŒAndroidçš„æ¶ˆæ¯ç®¡ç†ï¼‰ï¼›ç›®å‰åšæ¶ˆæ¯
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
      <category term="Objective-C" scheme="http://yoursite.com/categories/iOS/Objective-C/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="æ¨é€" scheme="http://yoursite.com/tags/%E6%8E%A8%E9%80%81/"/>
    
  </entry>
  
  <entry>
    <title>æé«˜Terminalæ•ˆç‡çš„Shellï¼Œoh-my-zsh</title>
    <link href="http://yoursite.com/2017/04/28/oh-my-zsh/"/>
    <id>http://yoursite.com/2017/04/28/oh-my-zsh/</id>
    <published>2017-04-28T13:42:01.000Z</published>
    <updated>2018-04-14T08:27:01.512Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170428-00-blog.png" alt=""></p>
<p>ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ä½œä¸ºç¨‹åº ğŸ¦ä»¬æ¯å¤©æ‰“äº¤é“çš„å·¥å…·ä¹‹ä¸€ï¼Œç†Ÿç»ƒä½¿ç”¨èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜å·¥ä½œæ•ˆç‡ï¼Œè™½ç„¶æ¯å¤©æ•²çš„åŸºæœ¬éƒ½æ˜¯ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯å¦‚æœéœ€è¦ä¸€ä¸ªä¸ªå­—ç¬¦çš„æ•²ï¼Œæƒ³æƒ³ä¹Ÿå®åœ¨è®©äººæœ‰äº›æŠ“ç‹‚ï¼Œæœ‰æ²¡æœ‰èƒ½åƒ IDE æ•²ä»£ç é‚£æ ·çš„è‡ªåŠ¨è¡¥å…¨ï¼Œè‡ªåŠ¨çº é”™çš„å·¥å…·ï¼ˆæ’ä»¶ï¼‰å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ of courseï¼Œæœ‰è¯· <a href="https://github.com/zsh-users/zsh" target="_blank" rel="external">zsh</a>ï¼ğŸ˜…emmmmã€‚ã€‚ã€‚è™½ç„¶è¿™è´§å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯éƒ½è¯´æ¯”è¾ƒå¤æ‚ï¼Œé…ç½®èµ·æ¥å¤ªéº»çƒ¦ï¼Œé²œæœ‰äººä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œä¸å¥½æ„æ€ï¼Œå’±ä»¬ä»Šå¤©çš„ä¸»è§’æ˜¯ <a href="https://github.com/robbyrussell/oh-my-zsh?source=c" target="_blank" rel="external">oh-my-zsh</a>ã€‚</p>
<p>Github ä¸Šçš„ç®€ä»‹æ˜¯ â€A delightful community-driven framework for managing your zsh configurationã€‚â€ï¼ˆä¸€ä¸ªä»¤äººæ„‰å¿«çš„ç¤¾åŒºé©±åŠ¨æ¡†æ¶ï¼Œç”¨äºç®¡ç†æ‚¨çš„zshé…ç½®ã€‚ï¼‰ï¼Œæ¦‚æ‹¬è¯´å°±æ˜¯å¯ä»¥å¸®åŠ©ä½ ç®€å•é…ç½®è½»æ¾ä½¿ç”¨ <code>zsh</code>ï¼Œè¿˜èƒ½è®©ä½ åœ¨æ— èŠæ—¶ç©è€ 140 ç§ä¸»é¢˜ï¼Œ200+ æ’ä»¶çš„è£…é€¼ç©æ„ã€‚</p>
<blockquote>
<p>Once installed, your terminal shell will become the talk of the town or your money back! With each keystroke in your command prompt, youâ€™ll take advantage of the hundreds of powerful plugins and beautiful themes. Strangers will come up to you in cafÃ©s and ask you, â€œthat is amazing! are you some sort of genius?â€</p>
<p>Finally, youâ€™ll begin to get the sort of attention that you have always felt you deserved. â€¦or maybe youâ€™ll use the time that youâ€™re saving to start flossing more often. ğŸ˜¬</p>
</blockquote>
<p>ğŸ™„ğŸ™„ğŸ˜‚ä½œè€…ä½ è¿™æ ·ä¸å¤ªå¥½å§ã€‚ã€‚ã€‚ åºŸè¯å¤ªå¤šäº†ï¼Œè¯´æ­£äº‹å§ã€‚</p>
<p>é¦–å…ˆï¼Œè‚¯å®šæ˜¯éœ€è¦å®‰è£… <code>zsh</code> çš„ï¼Œåœ¨ç»ˆç«¯ä½¿ç”¨ <code>cat /etc/shells</code> å‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿéƒ½å®‰è£…äº†å“ªäº› shellï¼Œå¦‚ä¸‹å›¾ï¼Œå¾ˆé«˜å…´ Mac ç³»ç»Ÿé»˜è®¤å°±å·²ç»å®‰è£…äº† <code>zsh</code>ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170428-01-blog.png" alt=""></p>
<p>å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install zsh</div></pre></td></tr></table></figure></p>
<p>é‚£æ€ä¹ˆæŸ¥çœ‹ç³»ç»Ÿå½“å‰ä½¿ç”¨çš„æ˜¯å“ªç§ shell å‘¢ï¼Ÿ<br>å¯ä»¥ä½¿ç”¨ <code>echo $SHELL</code> å‘½ä»¤æ¥æŸ¥çœ‹ï¼Œåœ¨ Mac ç³»ç»Ÿä¸­ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>bash</code>ã€‚</p>
<h3 id="å®‰è£…-oh-my-zshï¼šé€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨-curl-æˆ–-wget-æ¥å®‰è£…ã€‚"><a href="#å®‰è£…-oh-my-zshï¼šé€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨-curl-æˆ–-wget-æ¥å®‰è£…ã€‚" class="headerlink" title="å®‰è£… oh-my-zshï¼šé€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨ curl æˆ– wget æ¥å®‰è£…ã€‚"></a>å®‰è£… oh-my-zshï¼šé€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨ curl æˆ– wget æ¥å®‰è£…ã€‚</h3><p><strong>curl å‘½ä»¤ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</div></pre></td></tr></table></figure></p>
<p><strong>wget å‘½ä»¤ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</div></pre></td></tr></table></figure></p>
<p><strong><em>æ³¨æ„ï¼š</em></strong>å®‰è£…çš„ oh-my-zsh æ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œéœ€è¦å¼€å¯éšè—æ–‡ä»¶å¯è§æ‰èƒ½çœ‹åˆ°ï¼Œå¦å¤–æœ‰ä¸€ä¸ª <code>~/.zshrc</code> çš„éšè—æ–‡ä»¶ï¼Œå®‰è£… oh-my-zsh æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œ <code>zsh</code> çš„ç›¸å…³ç¯å¢ƒå˜é‡ç­‰è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ <code>vim</code> ç¼–è¾‘å™¨æ¥æŸ¥çœ‹æˆ–è€…è¿›è¡Œå…¶å®ƒçš„è‡ªå®šä¹‰è®¾ç½®ï¼ˆæ¯”å¦‚ï¼Œä¿®æ”¹é»˜è®¤çš„ä¸»é¢˜ï¼Œæ·»åŠ å–œæ¬¢çš„æ’ä»¶ç­‰ï¼‰ã€‚</p>
<h3 id="åˆ‡æ¢ç³»ç»Ÿé»˜è®¤çš„-shell-ä¸º-zsh"><a href="#åˆ‡æ¢ç³»ç»Ÿé»˜è®¤çš„-shell-ä¸º-zsh" class="headerlink" title="åˆ‡æ¢ç³»ç»Ÿé»˜è®¤çš„ shell ä¸º zsh"></a>åˆ‡æ¢ç³»ç»Ÿé»˜è®¤çš„ shell ä¸º zsh</h3><p>å®‰è£…å®Œ oh-my-zsh åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥åˆ‡æ¢ shellã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chsh -s /bin/zsh</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä¸æ¸…æ¥š <code>zsh</code> åœ¨ç³»ç»Ÿä¸­çš„è·¯å¾„åœ¨å“ªé‡Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ which -a zsh</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰é¢„è£… <code>zsh</code>ï¼Œæ˜¯è‡ªå·±æ‰‹åŠ¨å®‰è£…çš„ï¼Œé‚£ä¹ˆåˆ‡æ¢ <code>zsh</code> å¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š<br><code>chsh: WARNING: shell &#39;/bin/zsh&#39; does not exist.</code></p>
<p>è¿™æ˜¯å› ä¸ºç³»ç»Ÿåœ¨ <code>/etc/shells</code> åˆ—è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ° <code>zsh</code> è¿™ä¸ª shellï¼Œåªè¦æŠŠå®ƒåŠ åˆ°è¿™ä¸ªåˆ—è¡¨é‡Œé¢å°±å¥½äº†ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“å¼€ <code>vim</code> ç¼–è¾‘å™¨ï¼Œå°† <code>/bin/zsh</code> æ·»åŠ åˆ°æœ«å°¾ï¼Œ<code>:wq</code> ä¿å­˜é€€å‡ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim /etc/shells</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šéƒ½æ²¡æœ‰é—®é¢˜åï¼Œç°åœ¨å…³é—­ç»ˆç«¯é‡æ–°æ‰“å¼€åº”è¯¥å°±çœ‹åˆ°ä¸ä¸€æ ·çš„ç•Œé¢æ ·å¼äº†ã€‚</p>
<h3 id="ä¿®æ”¹ï¼ˆè‡ªå®šä¹‰ï¼‰oh-my-zsh-é…ç½®"><a href="#ä¿®æ”¹ï¼ˆè‡ªå®šä¹‰ï¼‰oh-my-zsh-é…ç½®" class="headerlink" title="ä¿®æ”¹ï¼ˆè‡ªå®šä¹‰ï¼‰oh-my-zsh é…ç½®"></a>ä¿®æ”¹ï¼ˆè‡ªå®šä¹‰ï¼‰oh-my-zsh é…ç½®</h3><p>oh-my-zsh çš„æ‰€æœ‰é…ç½®éƒ½å¯ä»¥åœ¨ <code>~/.zshrc</code> è¿™ä¸ªæ–‡ä»¶ä¸­ä¿®æ”¹æˆ–æ·»åŠ ï¼Œé‡Œé¢çš„æ³¨é‡Šä¹Ÿå¾ˆè¯¦ç»†ï¼Œæœ‰å¾ˆå¤šè®¾ç½®éƒ½æ˜¯è¢«æ³¨é‡Šæ‰çš„ï¼Œå¦‚æœéœ€è¦çš„è¯æ‰“å¼€æ³¨é‡Šå³å¯ã€‚</p>
<p><strong>ä¸»é¢˜</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Set name of the theme to load. Optionally, if you set this to &quot;random&quot;</div><div class="line"># it&apos;ll load a random theme each time that oh-my-zsh is loaded.</div><div class="line"># See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes</div><div class="line">ZSH_THEME=&quot;robbyrussell&quot;</div></pre></td></tr></table></figure></p>
<p>é»˜è®¤çš„ä¸»é¢˜æ˜¯ <code>robbyrussell</code>ï¼Œè¦æ›¿æ¢å…¶å®ƒä¸»é¢˜åªè¦æ›´æ”¹è¿™ä¸ªå­—æ®µå³å¯ï¼Œæ‰€æœ‰çš„ä¸»é¢˜éƒ½åœ¨ <code>~/.oh-my-zsh/themes/</code> è¿™ä¸ªç›®å½•ä¸‹ï¼Œä½ å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„<a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes" target="_blank" rel="external">ä¸»é¢˜æˆªå›¾</a>æ¥é€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ã€‚</p>
<p><strong>åˆ«å</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># Set personal aliases, overriding those provided by oh-my-zsh libs,</div><div class="line"># plugins, and themes. Aliases can be placed here, though oh-my-zsh</div><div class="line"># users are encouraged to define aliases within the ZSH_CUSTOM folder.</div><div class="line"># For a full list of active aliases, run `alias`.</div><div class="line">#</div><div class="line"># Example aliases</div><div class="line"># alias zshconfig=&quot;mate ~/.zshrc&quot;</div><div class="line"># alias ohmyzsh=&quot;mate ~/.oh-my-zsh&quot;</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®è‡ªå·±å¸¸ç”¨çš„å‘½ä»¤åˆ«åï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œè®¾ç½®çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># æ‰“å¼€ Sublime Text</div><div class="line">alias st=&apos;open -a &quot;Sublime Text&quot;&apos;</div><div class="line"># æ‰“å¼€ Xcode</div><div class="line">alias xc=&apos;open -a &quot;Xcode&quot;&apos;</div><div class="line"># æ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ï¼Œæ¯”å¦‚ä»¥ä¸‹æ˜¯æˆ‘çš„ xcode é¡¹ç›®è·¯å¾„</div><div class="line">alias xcyslf=&apos;open ~/Desktop/å…¬å¸æ–‡ä»¶/é¡¹ç›®ä»£ç /yslf-ios-new/yslf.xcworkspace&apos;</div></pre></td></tr></table></figure></p>
<p><a id="plugins"></a><strong>æ’ä»¶</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)</div><div class="line"># Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/</div><div class="line"># Example format: plugins=(rails git textmate ruby lighthouse)</div><div class="line"># Add wisely, as too many plugins slow down shell startup.</div><div class="line">plugins=(</div><div class="line">  git</div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>oh-my-zsh é»˜è®¤å®‰è£…äº† <code>git</code> æ’ä»¶ï¼Œæ‰€æœ‰çš„æ’ä»¶éƒ½åœ¨ <code>~/.oh-my-zsh/plugins/</code> è¿™ä¸ªç›®å½•ä¸‹ï¼Œå¦‚æœè¦æ·»åŠ å…¶å®ƒçš„æ’ä»¶ï¼Œå°†æ’ä»¶åç§°ä½¿ç”¨ç©ºæ ¼éš”å¼€æ”¾åˆ°æ‹¬å·ä¸­å³å¯ï¼›å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ’ä»¶æœ€å¥½è¿˜æ˜¯åˆ«æ·»åŠ å¤ªå¤šï¼Œä»¥å…ä¼šå½±å“å¼€å¯ç»ˆç«¯çš„é€Ÿåº¦ã€‚<br>å¦å¤–ï¼Œè¿™é‡Œä¸å¾—ä¸è¯´ä¸‹ <code>git</code> è¿™ä¸ªæ’ä»¶ï¼Œæ¯•ç«Ÿæ¯å¤©éƒ½åœ¨æ•²çš„åŸºæœ¬å°±éƒ½æ˜¯ <code>git</code> å‘½ä»¤ï¼Œè¿™ä¸ªæ’ä»¶ç®€åŒ–äº†å¾ˆå¤šå‘½ä»¤æ“ä½œï¼Œå…¶å®å°±æ˜¯è®¾ç½®äº†å¾ˆå¤šçš„åˆ«åï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">alias g=&apos;git&apos;</div><div class="line"></div><div class="line">alias ga=&apos;git add&apos;</div><div class="line">alias gaa=&apos;git add --all&apos;</div><div class="line"></div><div class="line">alias gb=&apos;git branch&apos;</div><div class="line">alias gba=&apos;git branch -a&apos;</div><div class="line">alias gbd=&apos;git branch -d&apos;</div><div class="line"></div><div class="line">alias gc=&apos;git commit -v&apos;</div><div class="line">alias gcam=&apos;git commit -a -m&apos;</div><div class="line">alias gcsm=&apos;git commit -s -m&apos;</div><div class="line">alias gcb=&apos;git checkout -b&apos;</div><div class="line">alias gcf=&apos;git config --list&apos;</div><div class="line">alias gcl=&apos;git clone --recursive&apos;</div><div class="line">alias gcm=&apos;git checkout master&apos;</div><div class="line">alias gcd=&apos;git checkout develop&apos;</div><div class="line">alias gcmsg=&apos;git commit -m&apos;</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šè®¾ç½®ï¼Œå¦‚ <code>alias ga=&#39;git add&#39;</code>ï¼Œè¾“å…¥ <code>ga</code> å°±ç­‰äºè¾“å…¥ä¸€æ¡å®Œæ•´çš„ <code>git add</code> å‘½ä»¤ã€‚<br>æ›´å¤šçš„åˆ«åå’ŒåŠŸèƒ½å¯ä»¥æ‰“å¼€ <code>~/.oh-my-zsh/plugins/git/git.plugin.zsh</code> è¿™ä¸ªæ–‡ä»¶æ¥æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹æ›´è¯¦ç»†çš„<a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugin:git" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p><strong>é…ç½®ï¼ˆè‡ªå®šä¹‰ï¼‰å…¶å®ƒæ’ä»¶</strong></p>
<p>æ–‡ç« å¼€å¤´è®²åˆ°çš„å‘½ä»¤æˆ–è€…ç›®å½•è‡ªåŠ¨è¡¥å…¨ï¼Œå…¶å®æ˜¯ä¸€ä¸ªè¶…é…·çš„ <code>zsh</code> æ’ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å®‰è£…äº† oh-my-zsh è¿™ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶å°± so easy äº†ã€‚å…ˆæ¥çœ‹çœ‹ä½¿ç”¨æ•ˆæœå›¾å§ï¼</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170428-02-blog.png" alt=""></p>
<p>é¦–å…ˆï¼Œéœ€è¦æŠŠè¿™ä¸ªæ’ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œæˆ‘å·²ç»ç»™ç«¥é‹ä»¬å‡†å¤‡å¥½äº†ï¼Œ<a href="http://mimosa-pudica.net/src/incr-0.2.zsh" target="_blank" rel="external">ç‚¹æˆ‘ä¸‹è½½å§</a>ï¼å¦‚æœä¸‹è½½ä¸äº†ï¼Œé‚£å°±ç›´æ¥æ‹·è´ä¸‹é¢çš„ä»£ç ï¼å…ˆè¦è¯´æ˜çš„æ˜¯è‡ªå®šä¹‰æ’ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œåœ¨ä¸Šé¢<a href="#plugins"><strong>æ’ä»¶</strong></a>é‚£é‡Œä½œè€…å·²ç»è¯´äº†å»ºè®®æ”¾åœ¨ <code>~/.oh-my-zsh/custom/plugins/</code> è¿™ä¸ªç›®å½•ä¸‹ï¼ˆ Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/ ï¼‰ã€‚<br>ç„¶åï¼Œåœ¨ <code>/plugins/</code> ç›®å½•ä¸‹å»ºä¸€ä¸ªåä¸º <code>incr</code> çš„æ–‡ä»¶å¤¹ï¼ˆå½“ç„¶åå­—ä½ å–œæ¬¢ï¼‰ï¼Œå°†ä¸‹è½½çš„ <code>incr-0.2.zsh</code> æ–‡ä»¶æ”¾åœ¨è¿™é‡Œï¼ˆåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åˆ›å»º <code>incr-0.2.zsh</code> æ–‡ä»¶ï¼Œå°†æ‹·è´çš„ä»£ç æ”¾è¿›å»å°± OK å•¦ï¼ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div></pre></td><td class="code"><pre><div class="line"># Incremental completion for zsh</div><div class="line"># by y.fujii &lt;y-fujii at mimosa-pudica.net&gt;, public domain</div><div class="line"></div><div class="line">autoload -U compinit</div><div class="line">zle -N self-insert self-insert-incr</div><div class="line">zle -N vi-cmd-mode-incr</div><div class="line">zle -N vi-backward-delete-char-incr</div><div class="line">zle -N backward-delete-char-incr</div><div class="line">zle -N expand-or-complete-prefix-incr</div><div class="line">compinit</div><div class="line"></div><div class="line">bindkey -M viins &apos;^[&apos; vi-cmd-mode-incr</div><div class="line">bindkey -M viins &apos;^h&apos; vi-backward-delete-char-incr</div><div class="line">bindkey -M viins &apos;^?&apos; vi-backward-delete-char-incr</div><div class="line">bindkey -M viins &apos;^i&apos; expand-or-complete-prefix-incr</div><div class="line">bindkey -M emacs &apos;^h&apos; backward-delete-char-incr</div><div class="line">bindkey -M emacs &apos;^?&apos; backward-delete-char-incr</div><div class="line">bindkey -M emacs &apos;^i&apos; expand-or-complete-prefix-incr</div><div class="line"></div><div class="line">unsetopt automenu</div><div class="line">compdef -d scp</div><div class="line">compdef -d tar</div><div class="line">compdef -d make</div><div class="line">compdef -d java</div><div class="line">compdef -d svn</div><div class="line">compdef -d cvs</div><div class="line"></div><div class="line"># TODO:</div><div class="line">#     cp dir/</div><div class="line"></div><div class="line">now_predict=0</div><div class="line"></div><div class="line">function limit-completion</div><div class="line">&#123;</div><div class="line">	if ((compstate[nmatches] &lt;= 1)); then</div><div class="line">		zle -M &quot;&quot;</div><div class="line">	elif ((compstate[list_lines] &gt; 6)); then</div><div class="line">		compstate[list]=&quot;&quot;</div><div class="line">		zle -M &quot;too many matches.&quot;</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function correct-prediction</div><div class="line">&#123;</div><div class="line">	if ((now_predict == 1)); then</div><div class="line">		if [[ &quot;$BUFFER&quot; != &quot;$buffer_prd&quot; ]] || ((CURSOR != cursor_org)); then</div><div class="line">			now_predict=0</div><div class="line">		fi</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function remove-prediction</div><div class="line">&#123;</div><div class="line">	if ((now_predict == 1)); then</div><div class="line">		BUFFER=&quot;$buffer_org&quot;</div><div class="line">		now_predict=0</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function show-prediction</div><div class="line">&#123;</div><div class="line">	# assert(now_predict == 0)</div><div class="line">	if</div><div class="line">		((PENDING == 0)) &amp;&amp;</div><div class="line">		((CURSOR &gt; 1)) &amp;&amp;</div><div class="line">		[[ &quot;$PREBUFFER&quot; == &quot;&quot; ]] &amp;&amp;</div><div class="line">		[[ &quot;$BUFFER[CURSOR]&quot; != &quot; &quot; ]]</div><div class="line">	then</div><div class="line">		cursor_org=&quot;$CURSOR&quot;</div><div class="line">		buffer_org=&quot;$BUFFER&quot;</div><div class="line">		comppostfuncs=(limit-completion)</div><div class="line">		zle complete-word</div><div class="line">		cursor_prd=&quot;$CURSOR&quot;</div><div class="line">		buffer_prd=&quot;$BUFFER&quot;</div><div class="line">		if [[ &quot;$buffer_org[1,cursor_org]&quot; == &quot;$buffer_prd[1,cursor_org]&quot; ]]; then</div><div class="line">			CURSOR=&quot;$cursor_org&quot;</div><div class="line">			if [[ &quot;$buffer_org&quot; != &quot;$buffer_prd&quot; ]] || ((cursor_org != cursor_prd)); then</div><div class="line">				now_predict=1</div><div class="line">			fi</div><div class="line">		else</div><div class="line">			BUFFER=&quot;$buffer_org&quot;</div><div class="line">			CURSOR=&quot;$cursor_org&quot;</div><div class="line">		fi</div><div class="line">		echo -n &quot;\e[32m&quot;</div><div class="line">	else</div><div class="line">		zle -M &quot;&quot;</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function preexec</div><div class="line">&#123;</div><div class="line">	echo -n &quot;\e[39m&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function vi-cmd-mode-incr</div><div class="line">&#123;</div><div class="line">	correct-prediction</div><div class="line">	remove-prediction</div><div class="line">	zle vi-cmd-mode</div><div class="line">&#125;</div><div class="line"></div><div class="line">function self-insert-incr</div><div class="line">&#123;</div><div class="line">	correct-prediction</div><div class="line">	remove-prediction</div><div class="line">	if zle .self-insert; then</div><div class="line">		show-prediction</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function vi-backward-delete-char-incr</div><div class="line">&#123;</div><div class="line">	correct-prediction</div><div class="line">	remove-prediction</div><div class="line">	if zle vi-backward-delete-char; then</div><div class="line">		show-prediction</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function backward-delete-char-incr</div><div class="line">&#123;</div><div class="line">	correct-prediction</div><div class="line">	remove-prediction</div><div class="line">	if zle backward-delete-char; then</div><div class="line">		show-prediction</div><div class="line">	fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">function expand-or-complete-prefix-incr</div><div class="line">&#123;</div><div class="line">	correct-prediction</div><div class="line">	if ((now_predict == 1)); then</div><div class="line">		CURSOR=&quot;$cursor_prd&quot;</div><div class="line">		now_predict=0</div><div class="line">		comppostfuncs=(limit-completion)</div><div class="line">		zle list-choices</div><div class="line">	else</div><div class="line">		remove-prediction</div><div class="line">		zle expand-or-complete-prefix</div><div class="line">	fi</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œéœ€è¦ä¿®æ”¹ <code>~/.zshrc</code> é…ç½®æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~/.oh-my-zsh/custom/plugins/incr/incr-0.2.zsh</div></pre></td></tr></table></figure></p>
<p>å½“ä»¥ä¸Šæ­¥éª¤å®Œæˆåï¼Œä½ å¯èƒ½é‡æ–°æ‰“å¼€ç»ˆç«¯æƒ³çœ‹ä¸‹è¿™ä¸ªç¥å¥‡çš„æ•ˆæœï¼Œä½†æ˜¯å‘ç°å¹¶ï¼æ²¡ï¼æœ‰ï¼äºæ˜¯å¿ä¸ä½ what the fâ€¦ ğŸ˜‚ğŸ˜‚ğŸ˜‚ å¥½äº†ï¼Œç»§ç»­è¾“å…¥ä»¥ä¸‹å‘½ä»¤å§ï¼Œå› ä¸ºä¿®æ”¹åçš„ <code>~/.zshrc</code> æ–‡ä»¶éœ€è¦æ‰§è¡Œä¸€ä¸‹ <code>source</code> å‘½ä»¤æ‰ä¼šç”Ÿæ•ˆï¼Œä»¥åçš„æ¯ä¸€æ¬¡ä¿®æ”¹æƒ³è¦é©¬ä¸Šç”Ÿæ•ˆéƒ½éœ€è¦æ‰§è¡Œ <code>source</code> å‘½ä»¤ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ source ~/.zshrc</div></pre></td></tr></table></figure></p>
<p><strong>å¿«é€Ÿè·³è½¬æ’ä»¶</strong></p>
<p>å†å®‰åˆ©ä¸€ä¸ªå¿«é€Ÿè·³è½¬çš„æ’ä»¶ï¼ŒğŸ˜‚åå­—å« <strong><a href="https://github.com/rupa/z" target="_blank" rel="external">z</a></strong>ï¼Œè¿™ä¸ªæ’ä»¶é…åˆå‰é¢è®¾ç½®çš„è‡ªåŠ¨è¡¥å…¨æ’ä»¶ï¼Œé‚£ä½ çš„å‘½ä»¤è¡Œæ“ä½œèµ·æ¥å°±çœŸæ˜¯ <strong>666</strong> äº†ã€‚</p>
<p>å®‰è£…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install z</div></pre></td></tr></table></figure></p>
<p>å®‰è£…å®Œåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®‰è£…çš„æ–‡ä»¶åˆ—è¡¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew list -f z</div></pre></td></tr></table></figure></p>
<p>æ­£å¸¸æƒ…å†µä¸‹ä¼šè¾“å‡ºä»¥ä¸‹å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/usr/local/Cellar/z/1.9/etc/profile.d/z.sh</div><div class="line">/usr/local/Cellar/z/1.9/share/man/man1/z.1</div></pre></td></tr></table></figure></p>
<p>æœ€åï¼Œè¿˜æ˜¯ä¿®æ”¹ <code>~/.zshrc</code> é…ç½®æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source /usr/local/etc/profile.d/z.sh</div></pre></td></tr></table></figure></p>
<p>åˆ«å¿˜äº†ï¼Œ<code>source ~/.zshrc</code> ç”Ÿæ•ˆï¼Œé‡å¯ç»ˆç«¯ã€‚</p>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼š<code>z ~</code>ï¼Œ<code>z desktop</code>ï¼Œ<code>z xxxç›®å½•è·¯å¾„</code> å›è½¦å°±èƒ½å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šçš„ä½ç½®äº†ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£æ‰ <code>cd</code> å‘½ä»¤ï¼Œä¸å¿…ä¸€å±‚å±‚çš„è·³è½¬ï¼Œä»»ä½•æ—¶å€™æƒ³å»å“ªé‡Œå°±å»å“ªé‡Œï¼Œé…åˆä¸Šè‡ªåŠ¨è¡¥å…¨æ’ä»¶ï¼Œå„ç§è¡¥å…¨ï¼Œæ–‡ä»¶åã€ç›®å½•è·¯å¾„ã€å‘½ä»¤åç­‰ï¼ŒğŸ‘ç®€ç›´ä¸è¦å¤ªå¥½ç”¨ã€‚<br><code>z</code> ä¼šè®°å½•ä½ è®¿é—®è¿‡çš„ç›®å½•ï¼Œæ¯”å¦‚ï¼š<code>z desktop</code>ï¼Œç¬¬äºŒæ¬¡ï¼Œç›´æ¥è¾“å…¥ <code>z d</code> å°±èƒ½è·³è½¬åˆ° <code>Desktop</code> ç›®å½•ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œç”šè‡³ç›´æ¥è¾“å…¥ç›®å½•åå°±èƒ½è·³è½¬ï¼Œæ¯”å¦‚ï¼š<code>~</code>ï¼Œ<code>..</code>ã€‚</p>
<p><strong>è¡¥å……ï¼š</strong></p>
<p>ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ <code>~/.bash_profile</code> ç¯å¢ƒå˜é‡ä¸­çš„è®¾ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">alias setproxy=&quot;export http_proxy=http://127.0.0.1:8080; export https_proxy=$http_proxy; echo &apos;HTTP Proxy on&apos;;&quot;</div><div class="line">alias unsetproxy=&quot;unset http_proxy; unset https_proxy; echo &apos;HTTP Proxy off&apos;;&quot;</div><div class="line"></div><div class="line">source ~/.profile</div><div class="line">source ~/.bashrc</div><div class="line"></div><div class="line">[[ -s &quot;$HOME/.rvm/scripts/rvm&quot; ]] &amp;&amp; source &quot;$HOME/.rvm/scripts/rvm&quot; # Load RVM into a shell session *as a function*</div></pre></td></tr></table></figure></p>
<p>åœ¨åˆ‡æ¢ shell ä¸º <code>zsh</code> åï¼Œå¯åŠ¨ç³»ç»Ÿä¼šåŠ è½½ <code>~/.zshrc</code> æ–‡ä»¶ï¼Œè€Œä¸ä¼šåŠ è½½ <code>~/.bash_profile</code> æ–‡ä»¶ï¼ˆshell ä¸º <code>bash</code> æ—¶æ‰ä¼šæ‰§è¡Œï¼‰ï¼Œå¯¼è‡´é‡Œé¢çš„è®¾ç½®æ— æ•ˆï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨ <code>~/.zshrc</code> æ–‡ä»¶æœ«å°¾åŠ ä¸Šä»¥ä¸‹ä»£ç ï¼Œè¿™æ ·æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ  <code>zsh</code> çš„é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~/.bash_profile</div></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ååˆ«å¿˜äº†ï¼Œ<code>source ~/.zshrc</code> ç”Ÿæ•ˆã€‚<br>å•Šï¼Œå¤§è‡´å°±æ˜¯è¿™äº›äº†ã€‚è¿˜æ²¡æœ‰å®‰è£…çš„ç«¥é‹å¿« get èµ·æ¥å§ï¼Œè®©ä½ çš„ç»ˆç«¯å¿«å¦‚é£ ã€‚ã€‚ã€‚</p>
<p><strong>å‚è€ƒï¼š</strong><br><a href="https://github.com/nodejh/nodejh.github.io/issues/34" target="_blank" rel="external">macOS/Linux ç¯å¢ƒå˜é‡è®¾ç½®</a><br><a href="http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html" target="_blank" rel="external">oh-my-zshé…ç½®ä½ çš„zshæé«˜shellé€¼æ ¼ç»ˆæé€‰æ‹©</a><br><a href="http://yijiebuyi.com/blog/36955b84c57e338dd8255070b80829bf.html" target="_blank" rel="external">incr.zsh è¡¥å…¨æ’ä»¶ è®©ä½ åœ¨zsh æ¨¡å¼ä¸‹å…¨è‡ªåŠ¨è¡¥å…¨æŒ‡ä»¤æˆ–ç›®å½•</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170428-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ä½œä¸ºç¨‹åº ğŸ¦ä»¬æ¯å¤©æ‰“äº¤é“çš„å·¥å…·ä¹‹ä¸€ï¼Œç†Ÿç»ƒä½¿ç”¨èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜å·¥ä½œæ•ˆç‡ï¼Œè™½ç„¶æ¯å¤©æ•²çš„åŸºæœ¬éƒ½æ˜¯ä¸€äº›å¸¸ç”¨çš„
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="Shell" scheme="http://yoursite.com/categories/Technology/Shell/"/>
    
    
      <category term="oh-my-zsh" scheme="http://yoursite.com/tags/oh-my-zsh/"/>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
      <category term="zsh" scheme="http://yoursite.com/tags/zsh/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨ Hexo æ­å»ºåšå®¢</title>
    <link href="http://yoursite.com/2017/04/19/hello-hexo/"/>
    <id>http://yoursite.com/2017/04/19/hello-hexo/</id>
    <published>2017-04-19T07:35:34.000Z</published>
    <updated>2018-04-14T08:56:27.433Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-00-blog.png" alt=""></p>
<p>çœ‹åˆ°è¶Šæ¥è¶Šå¤šäººæ­å»ºäº†æ¼‚äº®çš„ä¸ªäººåšå®¢ç½‘ç«™ï¼Œä¸€ç›´å¿ƒé‡Œç—’ç—’æƒ³ç€è‡ªå·±ä¹Ÿå¼„ä¸€ä¸ªï¼Œåˆšå¥½æœ€è¿‘é¡¹ç›®å‘Šä¸€æ®µè½äº†æœ‰ç‚¹ç©ºé—²æ—¶é—´ï¼Œäºæ˜¯ç½‘ä¸Šæ‰¾äº†æ•™ç¨‹å°±å¼€å§‹(zhuangbility)å•¦ï¼</p>
<p>å½“ç„¶å†™æœ¬æ–‡çš„ç›®çš„åªæ˜¯ä¸ºäº†è®°å½•æˆ‘è‡ªå·±çš„æ­å»ºè¿‡ç¨‹åŠè¸©çš„å‘ï¼Œæ›´è¯¦ç»†çš„å»ºç«™ç­‰ç»†èŠ‚å¤§å®¶å¯ä»¥æŸ¥çœ‹<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexoçš„å®˜æ–¹æ–‡æ¡£</a>ï¼Œè€Œä¸”æœ¬æ–‡åªæ˜¯é’ˆå¯¹Mac OSX ç³»ç»Ÿå¹³å°, Windowsç³»ç»Ÿçš„è¡¨ç¤ºä¸ä¼š(è¯è¯´å¾ˆå¤šå¹´æ²¡ç”¨è¿‡äº†ï¼Œå¿˜è®°Windowsé•¿å•¥æ ·å•¦(ã¥ï½¡â—•â€¿â€¿â—•ï½¡)ã¥)ã€‚æ‰€ä»¥è¿˜æ˜¯å»ºè®®å¤§å®¶çœ‹å®˜æ–¹æ–‡æ¡£å§ï¼Œå„å¹³å°éƒ½æœ‰è¯´æ˜ï¼Œå¥½å•¦ï¼ŒåºŸè¯ä¸å¤šè¯´ã€‚</p>
<p>ç›®å‰æ­å»ºå…è´¹åšå®¢æœ‰ä¸¤ç§æ–¹å¼ï¼š<br>ä¸€æ˜¯ï¼š<code>github Pages + Hexo</code>ï¼› äºŒæ˜¯ï¼š<code>github Pages + Jekyll</code>ï¼›<br>ä¸¤è€…éƒ½æ˜¯åˆ©ç”¨githubæ—¢å…è´¹åˆç¨³å®šçš„ç©ºé—´ä½œä¸ºæ‰˜ç®¡ï¼Œå¯¹æ¯”äº†ä¸‹ï¼Œ<strong>Hexo</strong> æ›´ç®€æ´é«˜æ•ˆæ›´å¤šäººä½¿ç”¨ï¼Œæœ‰éå¸¸è¯¦ç»†çš„å»ºç«™æ–‡æ¡£ï¼Œå½“ç„¶ <strong>Jekyll</strong> ä¹Ÿæœ‰æ–‡æ¡£æä¾›ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥<a href="http://jekyllcn.com/docs/home/" target="_blank" rel="external">çœ‹è¿™é‡Œ</a>ï¼Œä½†æ˜¯ç›¸æ¯”Hexoå®šåˆ¶æ€§æ›´é«˜ï¼Œæ›´æœ‰ä¸°å¯Œçš„Themeå¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚æœä½ æ˜¯ä¸€åå‰ç«¯å¼€å‘è€…ï¼Œç”šè‡³å¯ä»¥è‡ªå·±å†™Themeï¼›soï¼Hexo ç»å¯¹æ˜¯çˆ±æŠ˜è…¾å…¼å®Œç¾ä¸»ä¹‰è€…çš„ä¸äºŒä¹‹é€‰ã€‚</p>
<h3 id="ä¸€-Github-Account"><a href="#ä¸€-Github-Account" class="headerlink" title="ä¸€. Github Account"></a>ä¸€. Github Account</h3><p>å¯¹äºä¸€ä¸ªå¼€å‘è€…æ¥è¯´ï¼Œä»¥ä¸‹æ­¥éª¤æˆ‘æƒ³å¯ä»¥å¿½ç•¥å§ã€‚</p>
<p>1.1. ä½ éœ€è¦ä¸€ä¸ªGitHubå¸å·ï¼Œåˆ°<a href="https://github.com/" target="_blank" rel="external">GitHubå®˜ç½‘</a>æŒ‰ç…§æ­¥éª¤æ³¨å†Œå³å¯ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-01-blog.png" alt="join GitHub"></p>
<p>1.2. æ³¨å†ŒæˆåŠŸåï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-02-blog.png?imageView/1/w/500/h/300" alt="new repository"> </p>
<p>1.3. åˆ›å»ºä»“åº“è¿‡ç¨‹è¯´æ˜ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä»“åº“åç§°çš„å‘½åè§„åˆ™ï¼Œå¿…é¡»æ˜¯<code>æ³¨å†Œå.github.io</code>è¿™ç§æ ¼å¼ï¼Œåç»­å°±å¯ä»¥é€šè¿‡<code>https://æ³¨å†Œå.github.io/</code>æ¥è®¿é—®ä½ çš„åšå®¢ç½‘ç«™å•¦ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-03-blog.png" alt="create repository"></p>
<h3 id="äºŒ-ç¯å¢ƒå‡†å¤‡"><a href="#äºŒ-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="äºŒ. ç¯å¢ƒå‡†å¤‡"></a>äºŒ. ç¯å¢ƒå‡†å¤‡</h3><h3 id="1-Git"><a href="#1-Git" class="headerlink" title="1. Git"></a>1. <a href="https://git-scm.com/" target="_blank" rel="external">Git</a></h3><p>é¦–å…ˆå®‰è£…Gitï¼Œåç»­çš„æ“ä½œå…¨éƒ¨ä¾èµ–å®ƒï¼Œå®‰è£…æ•™ç¨‹<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" target="_blank" rel="external">çœ‹å®˜æ–¹æ–‡æ¡£</a>So Easyï¼Œæˆ–è€…è‡ªè¡ŒGoogleã€‚<br>PS: ç›¸ä¿¡åšå¼€å‘çš„ç«¥é‹éƒ½ä¸é™Œç”Ÿ, iOS å¼€å‘è€…æ›´ä¸ç”¨è¯´ï¼Œxcode è‡ªå¸¦ï¼</p>
<h3 id="2-Node-js"><a href="#2-Node-js" class="headerlink" title="2. Node.js"></a>2. <a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a></h3><p>åœ¨å®‰è£…Nodeä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·<code>nvm</code>ï¼Œç”¨äºNodeç‰ˆæœ¬åˆ‡æ¢ï¼Œå®‰è£…æ–¹å¼æœ‰ä¸¤ç§ï¼Œå…ˆæ¥çœ‹ç¬¬ä¸€ç§ï¼Œ<a href="https://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a> å®‰è£…æ–¹å¼ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”è¿™ç§æ–¹å¼å®‰è£…åNodeç‰ˆæœ¬åˆ‡æ¢æœ‰é—®é¢˜ï¼Œå› æ­¤ä¸æ¨èè¿™ç§æ–¹å¼ï¼Œå®‰è£…å®Œåä¸éœ€è¦é‡å¯ç»ˆç«¯ï¼Œä¾æ¬¡æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ brew install nvm  </div><div class="line">$ mkdir ~/.nvm</div><div class="line">$ export NVM_DIR=~/.nvm</div><div class="line">$ . $(brew --prefix nvm)/nvm.sh</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§å®‰è£…æ–¹å¼ï¼š</p>
<p><strong>curl</strong>å®‰è£…æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨<code>Homebrew</code>å®‰è£…è¿‡ï¼Œç›´æ¥è·³è¿‡å‰é¢çš„å‘½ä»¤æ‰§è¡Œæœ€åä¸€æ¡å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹å·²ç»å®‰è£…åœ¨å…¨å±€çš„æ¨¡å—ï¼Œä»¥ä¾¿åˆ é™¤è¿™äº›å…¨å±€æ¨¡å—åå†æŒ‰ç…§ä¸åŒçš„ node ç‰ˆæœ¬é‡æ–°è¿›è¡Œå…¨å±€å®‰è£… </div><div class="line">$ npm ls -g --depth=0 </div><div class="line"></div><div class="line"># åˆ é™¤å…¨å±€ node_modules ç›®å½•</div><div class="line">$ sudo rm -rf /usr/local/lib/node_modules </div><div class="line"></div><div class="line"># åˆ é™¤ node </div><div class="line">$ sudo rm /usr/local/bin/node </div><div class="line"></div><div class="line"># åˆ é™¤å…¨å±€ node æ¨¡å—æ³¨å†Œçš„è½¯é“¾</div><div class="line">$ cd /usr/local/bin &amp;&amp; ls -l | grep &quot;../lib/node_modules/&quot; | awk &apos;&#123;print $9&#125;&apos;| xargs rm  </div><div class="line"></div><div class="line"># æœ€åï¼Œå®‰è£…nvmçš„æ­£ç¡®å§¿åŠ¿</div><div class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash</div></pre></td></tr></table></figure>
<p>ç„¶åå¯ä»¥çœ‹åˆ°ä¸‹è½½<code>nvm</code>æˆåŠŸå¹¶å®‰è£…ï¼Œå¹¶ä¸”åœ¨<code>~/.zshrc</code>ä¸­å·²ç»è‡ªåŠ¨åŠ å…¥äº†ç¯å¢ƒå˜é‡ï¼Œç°åœ¨éœ€è¦é‡å¯ä½ çš„ç»ˆç«¯ã€‚<del>ï¼ˆä»€ä¹ˆæ˜¯<code>zshrc</code>ï¼Ÿåé¢å†ä¸“é—¨å†™ç¯‡æ–‡ç« æ¥è®²ï¼Œè¿™é‡Œå…ˆç•¥è¿‡ï¼‰</del> ä¼ é€é—¨ï¼š<a href="https://kejiasir.github.io/2017/04/28/oh-my-zsh/" target="_blank" rel="external">æé«˜Terminalæ•ˆç‡çš„Shellï¼Œoh-my-zsh</a>ï¼Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œé¢å¯ä»¥äº†è§£åˆ° <code>zshrc</code>ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-04-blog.png" alt="install nvm"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export NVM_DIR=&quot;$HOME/.nvm&quot;</div><div class="line">[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm</div></pre></td></tr></table></figure>
<p>è¿™é‡Œé™„ä¸Šä¸€ç¯‡<a href="http://www.imooc.com/article/14617" target="_blank" rel="external">ã€Šæ­£ç¡®çš„å®‰è£…å’Œä½¿ç”¨nvm(mac)ã€‹</a>æ–‡ç« é“¾æ¥ï¼Œå†™çš„éå¸¸è¯¦ç»†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒã€‚ </p>
<p>é‡å¯ç»ˆç«¯åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…<strong>Node.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…nodeï¼Œç‰ˆæœ¬5ä»¥ä¸Š</div><div class="line">$ nvm install 5</div></pre></td></tr></table></figure>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-05-blog.png" alt="install node"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹nodeç‰ˆæœ¬</div><div class="line">$ nvm ls</div></pre></td></tr></table></figure>
<h3 id="3-Hexo"><a href="#3-Hexo" class="headerlink" title="3. Hexo"></a>3. <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a></h3><p>ä»¥ä¸Šç¯å¢ƒå®‰è£…å®Œäº†ï¼Œæœ€åæˆ‘ä»¬å°±å¯ä»¥å®‰è£…<strong>Hexo</strong>å•¦ï¼<br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™é‡Œéœ€è¦ç”³è¯·sudoæƒé™ï¼Œè¾“å…¥ç®¡ç†å‘˜å¯†ç å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…hexo</div><div class="line">$ sudo npm install hexo-cli -g</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶å‘½ä»¤è¡Œ bilibala~ è¾“å‡ºå¥½å¤šä¸œè¥¿ï¼Œç¨ç­‰ç‰‡åˆ»å°±å®‰è£…å¥½äº†ã€‚</p>
<p><img src="http://oonis1a4c.bkt.clouddn.com/20170419-06-blog.png" alt="install hexo"></p>
<p>å®‰è£… Hexo å®Œæˆåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹åˆ›å»ºåšå®¢ç½‘ç«™æ‰€éœ€çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo init MyBlog</div><div class="line">$ cd MyBlog</div><div class="line">$ npm install</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œå†å®‰è£… <strong><a href="$ npm install hexo-deployer-git --save">åšå®¢è‡ªåŠ¨éƒ¨ç½²å·¥å…·</a></strong> å¸®åŠ©æˆ‘ä»¬å°†ç¼–å†™çš„æ–‡ç« å‘å¸ƒå¹¶éƒ¨ç½²åˆ°githubæœåŠ¡å™¨ã€‚<br>æ³¨æ„åé¢çš„<code>--save</code>ä¸€å®šè¦å¸¦ä¸Šï¼Œä¸ç„¶éƒ¨ç½²åˆ°githubæ—¶ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…gitè‡ªåŠ¨éƒ¨ç½²å·¥å…·</div><div class="line">$ npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p><strong><em>åˆ°æ­¤ä¸ºæ­¢ï¼Œå·²ç»æˆåŠŸå®‰è£…å¥½æ‰€æœ‰ç¯å¢ƒï¼Œå»ºç«™å®Œæˆã€‚</em></strong></p>
<h3 id="ä¸‰-ç½‘ç«™é…ç½®"><a href="#ä¸‰-ç½‘ç«™é…ç½®" class="headerlink" title="ä¸‰. ç½‘ç«™é…ç½®"></a>ä¸‰. ç½‘ç«™é…ç½®</h3><p>å»ºç«™å®Œæˆåï¼Œåœ¨æŒ‡å®šç›®å½•ä¸‹çš„ <code>MyBlog</code> æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ _config.yml		# ç½‘ç«™çš„ é…ç½® ä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</div><div class="line">â”œâ”€â”€ db.json		# ç¼“å­˜æ–‡ä»¶</div><div class="line">â”œâ”€â”€ debug.log		# è°ƒè¯•ä¿¡æ¯</div><div class="line">â”œâ”€â”€ node_modules	# å®‰è£…çš„nodeæ–‡ä»¶å¤¹</div><div class="line">â”œâ”€â”€ nvm			# å®‰è£…çš„nvmæ–‡ä»¶</div><div class="line">â”œâ”€â”€ package.json 	# åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚</div><div class="line">â”œâ”€â”€ scaffolds		# æ¨¡ç‰ˆæ–‡ä»¶å¤¹ï¼Œæ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚</div><div class="line">â”œâ”€â”€ source		# èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚ </div><div class="line">|   â”œâ”€â”€ _drafts		# è‰ç¨¿ã€‚</div><div class="line">|   â””â”€â”€ _posts		# æ–°å»ºçš„æ–‡ç« .md ä¼šæ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</div><div class="line">â””â”€â”€ themes		# ä¸»é¢˜æ–‡ä»¶å¤¹ï¼ŒHexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</div></pre></td></tr></table></figure>
<p>è‹¥è¦ä¿®æ”¹ç½‘ç«™é…ç½®ï¼Œä½¿ç”¨vimç¼–è¾‘å™¨æ‰“å¼€<code>_config.yml</code>æ–‡ä»¶ï¼ŒæŒ‰<code>i</code>å³å¯è¿›è¡Œç¼–è¾‘ã€‚<br>ä»¥ä¸‹æ˜¯æˆ‘çš„ç«™ç‚¹é…ç½®ï¼Œä½ éœ€è¦ä¿®æ”¹çš„æ˜¯ä½ çš„ç½‘ç«™æ ‡é¢˜å’Œæœ€ä¸‹é¢çš„<code>deploy</code>é…ç½®ï¼Œä¿®æ”¹<code>repo</code>ä¸ºä½ çš„githubä»“åº“åœ°å€å³å¯ï¼Œå…¶å®ƒå¯é€‰ï¼›</p>
<p>è¯´ä¸€ä¸‹<code>theme</code>å­—æ®µï¼Œè¿™ä¸ªæ˜¯ä¸»é¢˜è®¾ç½®ï¼Œé»˜è®¤ä¸º<code>next</code>ä¸»é¢˜ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯<a href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="external">Hueman</a>ä¸»é¢˜ï¼Œæ›´å¤šä¸»é¢˜å¯ä»¥<a href="https://hexo.io/themes/" target="_blank" rel="external">çœ‹è¿™é‡Œ</a>ï¼Œå®åœ¨å¤ªå¤šï¼Œä»»å›é€‰æ‹©ã€‚ï¼ˆä¸»é¢˜æ›¿æ¢è¿˜æ˜¯å¾ˆå¤šå‘çš„ï¼Œæœ‰æ—¶é—´å†å†™ä¸€ç¯‡æ–‡ç« ä¸“é—¨è®²ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"># Hexo Configuration             # hexo é…ç½®</div><div class="line">## Docs: https://hexo.io/docs/configuration.html</div><div class="line">## Source: https://github.com/hexojs/hexo/</div><div class="line"></div><div class="line"># Site                           # ç½‘ç«™</div><div class="line">title: Arvin&apos;s                   # ç½‘ç«™æ ‡é¢˜</div><div class="line">subtitle: Arvin&apos;s blog           # ç½‘ç«™å‰¯æ ‡é¢˜</div><div class="line">description: æœ‰å¹¸ç«™åœ¨äº’è”ç½‘æŠ€æœ¯é©å‘½çš„æµªæ½®ä¹‹ä¸Š, å¥‹å‹‡å‰è¡Œ. # ç½‘ç«™æè¿°</div><div class="line">author: Arvin&apos;s                  # æ‚¨çš„åå­—</div><div class="line">language: zh-CN                  # ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€</div><div class="line">timezone:                        # ç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚æ—¶åŒºåˆ—è¡¨ã€‚æ¯”å¦‚è¯´ï¼šAmerica/New_York, Japan, å’Œ UTC ã€‚</div><div class="line"></div><div class="line"># URL                            # é“¾æ¥æ ¼å¼</div><div class="line">## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;</div><div class="line">url: http://yoursite.com                # ç½‘å€</div><div class="line">root: /                                 # ç½‘ç«™æ ¹ç›®å½•</div><div class="line">permalink: :year/:month/:day/:title/    # æ–‡ç« çš„ æ°¸ä¹…é“¾æ¥ æ ¼å¼</div><div class="line">permalink_defaults:                     # æ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼</div><div class="line"></div><div class="line"># RSSè®¢é˜…æ”¯æŒ</div><div class="line">plugin:</div><div class="line">- hexo-generator-feed</div><div class="line"></div><div class="line"># Feed Atom</div><div class="line">feed:</div><div class="line">type: atom</div><div class="line">path: atom.xml</div><div class="line">limit: 20</div><div class="line"></div><div class="line"># Directory                      # ç›®å½•</div><div class="line">source_dir: source               # èµ„æºæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å†…å®¹ã€‚</div><div class="line">public_dir: public               # å…¬å…±æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚</div><div class="line">tag_dir: tags                    # æ ‡ç­¾æ–‡ä»¶å¤¹</div><div class="line">archive_dir: archives            # å½’æ¡£æ–‡ä»¶å¤¹</div><div class="line">category_dir: categories         # åˆ†ç±»æ–‡ä»¶å¤¹</div><div class="line">code_dir: downloads/code         # Include code æ–‡ä»¶å¤¹</div><div class="line">i18n_dir: :lang                  # å›½é™…åŒ–ï¼ˆi18nï¼‰æ–‡ä»¶å¤¹</div><div class="line">skip_render:                     # è·³è¿‡æŒ‡å®šæ–‡ä»¶çš„æ¸²æŸ“ï¼Œæ‚¨å¯ä½¿ç”¨ glob è¡¨è¾¾å¼æ¥åŒ¹é…è·¯å¾„ã€‚</div><div class="line"></div><div class="line"># Writing                                               # æ–‡ç« </div><div class="line">new_post_name: :title.md # File name of new posts       # æ–°æ–‡ç« çš„æ–‡ä»¶åç§°</div><div class="line">default_layout: post                                    # é¢„è®¾å¸ƒå±€</div><div class="line">titlecase: false # Transform title into titlecase       # æŠŠæ ‡é¢˜è½¬æ¢ä¸º title case</div><div class="line">external_link: true # Open external links in new tab    # åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€é“¾æ¥</div><div class="line">filename_case: 0                                        # æŠŠæ–‡ä»¶åç§°è½¬æ¢ä¸º (1) å°å†™æˆ– (2) å¤§å†™</div><div class="line">render_drafts: false                                    # æ˜¾ç¤ºè‰ç¨¿</div><div class="line">post_asset_folder: false                                # å¯åŠ¨ Asset æ–‡ä»¶å¤¹</div><div class="line">relative_link: false                                    # æŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€</div><div class="line">future: true                                            # æ˜¾ç¤ºæœªæ¥çš„æ–‡ç« </div><div class="line">highlight:                                              # ä»£ç å—çš„è®¾ç½®</div><div class="line">  enable: true                   # æ˜¯å¦å¯ç”¨</div><div class="line">  line_number: true              # æ˜¾ç¤ºè¡Œå·</div><div class="line">  auto_detect: false             #</div><div class="line">  tab_replace:</div><div class="line"></div><div class="line"># Category &amp; Tag                 # åˆ†ç±»å’Œæ ‡ç­¾</div><div class="line">default_category: uncategorized  # é»˜è®¤åˆ†ç±»</div><div class="line">category_map:                    # åˆ†ç±»åˆ«å</div><div class="line">tag_map:                         # æ ‡ç­¾åˆ«å</div><div class="line"></div><div class="line"># Date / Time format             # æ—¥æœŸæ—¶é—´æ ¼å¼</div><div class="line">## Hexo uses Moment.js to parse and display date</div><div class="line">## You can customize the date format as defined in</div><div class="line">## http://momentjs.com/docs/#/displaying/format/</div><div class="line">date_format: YYYY-MM-DD          # æ—¥æœŸæ ¼å¼</div><div class="line">time_format: HH:mm:ss            # æ—¶é—´æ ¼å¼</div><div class="line"></div><div class="line"># Pagination                     # åˆ†é¡µ</div><div class="line">## Set per_page to 0 to disable pagination</div><div class="line">per_page: 10                     # æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ (0 = å…³é—­åˆ†é¡µåŠŸèƒ½)</div><div class="line">pagination_dir: page             # åˆ†é¡µç›®å½•</div><div class="line"></div><div class="line"># Extensions                     # æ‹“å±•æ’ä»¶</div><div class="line">## Plugins: https://hexo.io/plugins/</div><div class="line">## Themes: https://hexo.io/themes/</div><div class="line">theme: hueman                    # å½“å‰ä¸»é¢˜åç§°ã€‚å€¼ä¸ºfalseæ—¶ç¦ç”¨ä¸»é¢˜</div><div class="line"></div><div class="line"># Deployment                     # éƒ¨ç½²</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line">deploy:                          # éƒ¨ç½²éƒ¨åˆ†çš„è®¾ç½®</div><div class="line">  type: git</div><div class="line">  repo: git@github.com:kejiasir/kejiasir.github.io.git</div><div class="line">  branch: master</div><div class="line">  message:</div></pre></td></tr></table></figure>
<h3 id="å››-æ–‡ç« å‘å¸ƒ"><a href="#å››-æ–‡ç« å‘å¸ƒ" class="headerlink" title="å››. æ–‡ç« å‘å¸ƒ"></a>å››. æ–‡ç« å‘å¸ƒ</h3><h4 id="1-æ–‡ç« æ–°å»º"><a href="#1-æ–‡ç« æ–°å»º" class="headerlink" title="1. æ–‡ç« æ–°å»º"></a>1. æ–‡ç« æ–°å»º</h4><p>æ‰§è¡Œä¸‹åˆ—å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># layout å¯ä»¥ä¸å†™ï¼Œé»˜è®¤ä¸ºpostï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ _config.yml ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚</div><div class="line"># title æ–‡ç« æ ‡é¢˜ï¼Œå¦‚æœæœ‰ç©ºæ ¼ï¼Œéœ€ä½¿ç”¨åŒå¼•å·åŒ…æ‹¬ï¼Œä¾‹ï¼šâ€œhello worldâ€ã€‚</div><div class="line">$ hexo new [layout] &lt;title&gt;</div></pre></td></tr></table></figure></p>
<h4 id="2-æ–‡ç« å¸ƒå±€"><a href="#2-æ–‡ç« å¸ƒå±€" class="headerlink" title="2. æ–‡ç« å¸ƒå±€"></a>2. æ–‡ç« å¸ƒå±€</h4><p>Hexo æœ‰ä¸‰ç§é»˜è®¤å¸ƒå±€ï¼š<code>page</code> ã€<code>post</code>å’Œ <code>draft</code>ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¸åŒçš„è·¯å¾„ï¼Œå¦‚æœä½ è‡ªå®šä¹‰å¸ƒå±€å°†å’Œ <code>post</code> ä¸€æ ·ï¼Œéƒ½ä¼šå‚¨å­˜åˆ° <code>source/_posts</code> è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚ </p>
<table>
<thead>
<tr>
<th>å¸ƒå±€</th>
<th style="text-align:center">è·¯å¾„</th>
</tr>
</thead>
<tbody>
<tr>
<td>page</td>
<td style="text-align:center">source</td>
</tr>
<tr>
<td>post</td>
<td style="text-align:center">source/_posts</td>
</tr>
<tr>
<td>draft</td>
<td style="text-align:center">source/_drafts</td>
</tr>
</tbody>
</table>
<h4 id="3-è‰ç¨¿"><a href="#3-è‰ç¨¿" class="headerlink" title="3. è‰ç¨¿"></a>3. è‰ç¨¿</h4><p>Hexo çš„ä¸€ç§ç‰¹æ®Šå¸ƒå±€ï¼š<code>draft</code>ï¼Œè¿™ç§å¸ƒå±€åœ¨å»ºç«‹æ—¶ä¼šè¢«ä¿å­˜åˆ° <code>source/_drafts</code> æ–‡ä»¶å¤¹ï¼Œå¯ä»¥é€šè¿‡ <code>publish</code> å‘½ä»¤å°†è‰ç¨¿ç§»åŠ¨åˆ° <code>source/_posts</code> æ–‡ä»¶å¤¹ï¼Œè¯¥å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼ä¸ <code>new</code> ååˆ†ç±»ä¼¼ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®š layout æ¥è®¾ç½®å¸ƒå±€ï¼ˆæ–‡ç« è·¯å¾„ï¼‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># æŠŠ source/_drafts æ–‡ä»¶å¤¹å†…çš„æ–‡ç« ç§»åŠ¨åˆ° source/_posts æ–‡ä»¶å¤¹ä¸­</div><div class="line">$ hexo publish [layout] &lt;title&gt;</div></pre></td></tr></table></figure>
<h4 id="4-æ–‡ç« ç¼–å†™"><a href="#4-æ–‡ç« ç¼–å†™" class="headerlink" title="4. æ–‡ç« ç¼–å†™"></a>4. æ–‡ç« ç¼–å†™</h4><p>ä¸Šé¢è¯´åˆ°æ–°å»ºçš„æ–‡ç« ä¸æŒ‡å®šå¸ƒå±€ä¼šé»˜è®¤ä¿å­˜åœ¨<code>source/_posts</code>è·¯å¾„ä¸‹ï¼Œæ–°å»ºæ–‡ç« åç¼€æ ¼å¼ä¸º<code>.md</code>æ–‡ä»¶ï¼Œå³éœ€è¦ä½¿ç”¨<a href="http://www.markdown.cn/" target="_blank" rel="external">Markdown</a>è¯­æ³•ç¼–å†™ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>vim</code>ç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘ï¼Œä½†æ˜¯å¯æƒ³è€ŒçŸ¥é‚£æœ‰å¤šä¹ˆæ¶å¿ƒã€‚æ‰€ä»¥è¿˜æ˜¯é€‰æ‹©ä¸€æ¬¾ä¸“ä¸šçš„markdownç¼–è¾‘å™¨å§ï¼ŒMacå¹³å°çš„ <a href="https://www.macupdate.com/app/mac/40420/mou" target="_blank" rel="external">Mou</a> ç¼–è¾‘å™¨ä¸é”™ï¼›è€Œæˆ‘è‡ªå·±ç”¨çš„æ˜¯ <a href="http://zh.mweb.im/" target="_blank" rel="external">MWeb Lite</a> å…è´¹ç‰ˆï¼ˆå›½å†…å¼€å‘è€…è‰¯å¿ƒä¹‹ä½œï¼‰ï¼Œä½“éªŒå·²ç»éå¸¸ä¸é”™ï¼Œç›®å‰è¶³ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚äº†ï¼Œå½“ç„¶åœŸè±ªå¯ä»¥è´­ä¹°æ”¶è´¹ç‰ˆçš„æ”¯æŒä¸‹ï¼Œæ®è¯´åŠŸèƒ½è¶³å¤Ÿå¼ºå¤§ã€‚</p>
<p>æ–‡ç« ç¼–è¾‘å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæœ¬åœ°æµ‹è¯•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å¯åŠ¨æœåŠ¡å™¨ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:4000/. æ¥è®¿é—®ä½ çš„åšå®¢ç½‘ç«™ï¼ŒæŸ¥çœ‹æ–‡ç« </div><div class="line">$ hexo server		---&gt;&gt;&gt; å¯ä»¥ç®€å†™ä¸º  hexo s</div></pre></td></tr></table></figure>
<h4 id="5-æ–‡ç« å‘å¸ƒ"><a href="#5-æ–‡ç« å‘å¸ƒ" class="headerlink" title="5. æ–‡ç« å‘å¸ƒ"></a>5. æ–‡ç« å‘å¸ƒ</h4><p>å½“ç„¶ä½ å¯ä»¥éšæ—¶åœ¨markdownç¼–è¾‘å™¨ä¸­ä¿®æ”¹æ–‡ç« ï¼Œè®°å¾—å­˜å‚¨ï¼ˆcommand+sï¼‰ï¼Œç›´åˆ°ä½ æƒ³è¦éƒ¨ç½²åˆ°githubï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)</div><div class="line">$ hexo clean		</div><div class="line"></div><div class="line"># ç”Ÿæˆç¼“å­˜å’Œé™æ€æ–‡ä»¶</div><div class="line">$ hexo generate		---&gt;&gt;&gt; å¯ä»¥ç®€å†™ä¸º  hexo g </div><div class="line"></div><div class="line"># é‡æ–°éƒ¨ç½²åˆ°æœåŠ¡å™¨</div><div class="line">$ hexo deploy		---&gt;&gt;&gt; å¯ä»¥ç®€å†™ä¸º  hexo d</div></pre></td></tr></table></figure>
<p>åˆ°æ­¤ï¼Œå¦‚æ— æ„å¤–ï¼Œä½ å·²ç»é¡ºåˆ©éƒ¨ç½²æ–‡ç« åˆ°githubæœåŠ¡å™¨ï¼Œå¿«ä½¿ç”¨<code>https://æ³¨å†Œå.github.io/</code>åŸŸåæ¥è®¿é—®ä½ çš„åšå®¢ç½‘ç«™ï¼Œçœ‹çœ‹å‘å¸ƒçš„æ–‡ç« å§ã€‚ï¼ˆåŸŸåç»‘å®šè¿˜æ²¡æœ‰å¼„ï¼Œåé¢å¼„å¥½äº†åœ¨å†™ï¼‰  </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://oonis1a4c.bkt.clouddn.com/20170419-00-blog.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¶Šæ¥è¶Šå¤šäººæ­å»ºäº†æ¼‚äº®çš„ä¸ªäººåšå®¢ç½‘ç«™ï¼Œä¸€ç›´å¿ƒé‡Œç—’ç—’æƒ³ç€è‡ªå·±ä¹Ÿå¼„ä¸€ä¸ªï¼Œåˆšå¥½æœ€è¿‘é¡¹ç›®å‘Šä¸€æ®µè½äº†æœ‰ç‚¹ç©ºé—²æ—¶é—´ï¼Œäºæ˜¯ç½‘ä¸Š
    
    </summary>
    
      <category term="Technology" scheme="http://yoursite.com/categories/Technology/"/>
    
      <category term="Hexo" scheme="http://yoursite.com/categories/Technology/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
